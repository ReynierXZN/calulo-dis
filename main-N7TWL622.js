var PM=Object.defineProperty,xM=Object.defineProperties;var kM=Object.getOwnPropertyDescriptors;var Uw=Object.getOwnPropertySymbols;var OM=Object.prototype.hasOwnProperty,FM=Object.prototype.propertyIsEnumerable;var Bw=(n,e,t)=>e in n?PM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})OM.call(e,t)&&Bw(n,t,e[t]);if(Uw)for(var t of Uw(e))FM.call(e,t)&&Bw(n,t,e[t]);return n},ie=(n,e)=>xM(n,kM(e));var C=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Wp;function ll(){return Wp}function Rn(n){let e=Wp;return Wp=n,e}var $w=Symbol("NotFound");function Vo(n){return n===$w||n?.name==="\u0275NotFound"}var pt=null,dl=!1,Kp=1,LM=null,gt=Symbol("SIGNAL");function oe(n){let e=pt;return pt=n,e}function gl(){return pt}var jo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Uo(n){if(dl)throw new Error("");if(pt===null)return;pt.consumerOnSignalRead(n);let e=pt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=pt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:pt.producers,t!==void 0&&t.producer===n)){pt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===pt&&(!r||jM(i,pt)))return;let o=$o(pt),s={producer:n,consumer:pt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};pt.producersTail=s,e!==void 0?e.nextProducer=s:pt.producers=s,o&&Gw(n,s)}function Hw(){Kp++}function ml(n){if(!($o(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Kp)){if(!n.producerMustRecompute(n)&&!za(n)){pl(n);return}n.producerRecomputeValue(n),pl(n)}}function Qp(n){if(n.consumers===void 0)return;let e=dl;dl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||VM(r)}}finally{dl=e}}function Yp(){return pt?.consumerAllowSignalWrites!==!1}function VM(n){n.dirty=!0,Qp(n),n.consumerMarkedDirty?.(n)}function pl(n){n.dirty=!1,n.lastCleanEpoch=Kp}function Bo(n){return n&&qw(n),oe(n)}function qw(n){n.producersTail=void 0,n.recomputing=!0}function qa(n,e){oe(e),n&&zw(n)}function zw(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if($o(n))do t=Zp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function za(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ml(t),r!==t.version))return!0}return!1}function Ga(n){if($o(n)){let e=n.producers;for(;e!==void 0;)e=Zp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Gw(n,e){let t=n.consumersTail,r=$o(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Gw(i.producer,i)}function Zp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!$o(e)){let o=e.producers;for(;o!==void 0;)o=Zp(o)}return t}function $o(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function yl(n){LM?.(n)}function jM(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function vl(n,e){return Object.is(n,e)}function _l(n,e){let t=Object.create(UM);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ml(t),Uo(t),t.value===Ha)throw t.error;return t.value};return r[gt]=t,yl(t),r}var hl=Symbol("UNSET"),fl=Symbol("COMPUTING"),Ha=Symbol("ERRORED"),UM=ie(O({},jo),{value:hl,dirty:!0,error:null,equal:vl,kind:"computed",producerMustRecompute(n){return n.value===hl||n.value===fl},producerRecomputeValue(n){if(n.value===fl)throw new Error("");let e=n.value;n.value=fl;let t=Bo(n),r,i=!1;try{r=n.computation(),oe(null),i=e!==hl&&e!==Ha&&r!==Ha&&n.equal(e,r)}catch(o){r=Ha,n.error=o}finally{qa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function BM(){throw new Error}var Ww=BM;function Kw(n){Ww(n)}function Jp(n){Ww=n}var $M=null;function Xp(n,e){let t=Object.create(El);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Qw(t);return r[gt]=t,yl(t),[r,s=>Ho(t,s),s=>eg(t,s)]}function Qw(n){return Uo(n),n.value}function Ho(n,e){Yp()||Kw(n),n.equal(n.value,e)||(n.value=e,HM(n))}function eg(n,e){Yp()||Kw(n),Ho(n,e(n.value))}var El=ie(O({},jo),{equal:vl,value:void 0,kind:"signal"});function HM(n){n.version++,Hw(),Qp(n),$M?.(n)}function ee(n){return typeof n=="function"}function qo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Il=qo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof Il?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Yw(o)}catch(s){e=e??[],s instanceof Il?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Il(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ai(t,e)}remove(e){let{_finalizers:t}=this;t&&Ai(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var tg=Pe.EMPTY;function wl(n){return n instanceof Pe||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function Yw(n){ee(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zo={setTimeout(n,e,...t){let{delegate:r}=zo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Dl(n){zo.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function Wa(){}var Zw=ng("C",void 0,void 0);function Jw(n){return ng("E",void 0,n)}function Xw(n){return ng("N",n,void 0)}function ng(n,e,t){return{kind:n,value:e,error:t}}var Ri=null;function Go(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!Ri;if(e&&(Ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ri;if(Ri=null,t)throw r}}else n()}function eD(n){un.useDeprecatedSynchronousErrorHandling&&Ri&&(Ri.errorThrown=!0,Ri.error=n)}var Ni=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wl(e)&&e.add(this)):this.destination=GM}static create(e,t,r){return new Wo(e,t,r)}next(e){this.isStopped?ig(Xw(e),this):this._next(e)}error(e){this.isStopped?ig(Jw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ig(Zw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qM=Function.prototype.bind;function rg(n,e){return qM.call(n,e)}var og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Tl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Tl(r)}else Tl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Tl(t)}}},Wo=class extends Ni{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rg(e.next,o),error:e.error&&rg(e.error,o),complete:e.complete&&rg(e.complete,o)}):i=e}this.destination=new og(i)}};function Tl(n){un.useDeprecatedSynchronousErrorHandling?eD(n):Dl(n)}function zM(n){throw n}function ig(n,e){let{onStoppedNotification:t}=un;t&&zo.setTimeout(()=>t(n,e))}var GM={closed:!0,next:Wa,error:zM,complete:Wa};var Ko=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ot(n){return n}function Cl(...n){return sg(n)}function sg(n){return n.length===0?Ot:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=KM(t)?t:new Wo(t,r,i);return Go(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=tD(r),new r((i,o)=>{let s=new Wo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ko](){return this}pipe(...t){return sg(t)(this)}toPromise(t){return t=tD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function tD(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function WM(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function KM(n){return n&&n instanceof Ni||WM(n)&&wl(n)}function ag(n){return ee(n?.lift)}function pe(n){return e=>{if(ag(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new cg(n,e,t,r,i)}var cg=class extends Ni{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qo(){return pe((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Yo=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ag(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Qo()(this)}};var nD=qo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nD}next(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?tg:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,Ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new bl(e,t),n})(),bl=class extends Be{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:tg}};var st=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ug={now(){return(ug.delegate||Date).now()},delegate:void 0};var Sl=class extends Pe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ka={setInterval(n,e,...t){let{delegate:r}=Ka;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ka;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zo=class extends Sl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ka.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ka.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Jo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Jo.now=ug.now;var Xo=class extends Jo{constructor(e,t=Jo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var lg=new Xo(Zo);var Al=class extends Zo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Rl=class extends Xo{};var dg=new Rl(Al);var Rt=new re(n=>n.complete());function rD(n){return n&&ee(n.schedule)}function iD(n){return n[n.length-1]}function Nl(n){return ee(iD(n))?n.pop():void 0}function Or(n){return rD(iD(n))?n.pop():void 0}function hg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function oD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mi(n){return this instanceof Mi?(this.v=n,this):new Mi(n)}function aD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(M){return new Promise(function(R,V){o.push([y,M,R,V])>1||u(y,M)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof Mi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function cD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof oD=="function"?oD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function Pl(n){return ee(n?.then)}function xl(n){return ee(n[Ko])}function kl(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function Ol(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fl=QM();function Ll(n){return ee(n?.[Fl])}function Vl(n){return aD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Mi(t.read());if(i)return yield Mi(void 0);yield yield Mi(r)}}finally{t.releaseLock()}})}function jl(n){return ee(n?.getReader)}function $e(n){if(n instanceof re)return n;if(n!=null){if(xl(n))return YM(n);if(Ml(n))return ZM(n);if(Pl(n))return JM(n);if(kl(n))return uD(n);if(Ll(n))return XM(n);if(jl(n))return eP(n)}throw Ol(n)}function YM(n){return new re(e=>{let t=n[Ko]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZM(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function JM(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Dl)})}function XM(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uD(n){return new re(e=>{tP(n,e).catch(t=>e.error(t))})}function eP(n){return uD(Vl(n))}function tP(n,e){var t,r,i,o;return sD(this,void 0,void 0,function*(){try{for(t=cD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Nt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Fr(n,e=0){return pe((t,r)=>{t.subscribe(de(r,i=>Nt(r,n,()=>r.next(i),e),()=>Nt(r,n,()=>r.complete(),e),i=>Nt(r,n,()=>r.error(i),e)))})}function Lr(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function lD(n,e){return $e(n).pipe(Lr(e),Fr(e))}function dD(n,e){return $e(n).pipe(Lr(e),Fr(e))}function hD(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function fD(n,e){return new re(t=>{let r;return Nt(t,e,()=>{r=n[Fl](),Nt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Ul(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{Nt(t,e,()=>{let r=n[Symbol.asyncIterator]();Nt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function pD(n,e){return Ul(Vl(n),e)}function gD(n,e){if(n!=null){if(xl(n))return lD(n,e);if(Ml(n))return hD(n,e);if(Pl(n))return dD(n,e);if(kl(n))return Ul(n,e);if(Ll(n))return fD(n,e);if(jl(n))return pD(n,e)}throw Ol(n)}function Ae(n,e){return e?gD(n,e):$e(n)}function W(...n){let e=Or(n);return Ae(n,e)}function es(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function fg(n){return!!n&&(n instanceof re||ee(n.lift)&&ee(n.subscribe))}var nr=qo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:nP}=Array;function rP(n,e){return nP(e)?n(...e):n(e)}function Bl(n){return ae(e=>rP(n,e))}var{isArray:iP}=Array,{getPrototypeOf:oP,prototype:sP,keys:aP}=Object;function $l(n){if(n.length===1){let e=n[0];if(iP(e))return{args:e,keys:null};if(cP(e)){let t=aP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function cP(n){return n&&typeof n=="object"&&oP(n)===sP}function Hl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qa(...n){let e=Or(n),t=Nl(n),{args:r,keys:i}=$l(n);if(r.length===0)return Ae([],e);let o=new re(uP(r,e,i?s=>Hl(i,s):Ot));return t?o.pipe(Bl(t)):o}function uP(n,e,t=Ot){return r=>{mD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)mD(e,()=>{let l=Ae(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function mD(n,e,t){n?Nt(t,n,e):e()}function yD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let R=!1;$e(t(M,h++)).subscribe(de(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let V=u.shift();s?Nt(e,s,()=>S(V)):S(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Fe(n,e,t=1/0){return ee(e)?Fe((r,i)=>ae((o,s)=>e(r,o,i,s))($e(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>yD(r,i,n,t)))}function ts(n=1/0){return Fe(Ot,n)}function vD(){return ts(1)}function ns(...n){return vD()(Ae(n,Or(n)))}function Ya(n){return new re(e=>{$e(n()).subscribe(e)})}function pg(...n){let e=Nl(n),{args:t,keys:r}=$l(n),i=new re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(t[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Hl(r,a):a),o.complete())}))}});return e?i.pipe(Bl(e)):i}function Ct(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function rr(n){return pe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=$e(n(s,rr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function _D(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Vr(n,e){return ee(e)?Fe(n,e,1):Fe(n,1)}function jr(n){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ir(n){return n<=0?()=>Rt:pe((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ql(n=lP){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lP(){return new nr}function Za(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function or(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,o)=>n(i,o,r)):Ot,ir(1),t?jr(e):ql(()=>new nr))}function rs(n){return n<=0?()=>Rt:pe((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,o)=>n(i,o,r)):Ot,rs(1),t?jr(e):ql(()=>new nr))}function zl(n,e){return pe(_D(n,e,arguments.length>=2,!0))}function Gl(...n){let e=Or(n);return pe((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function bt(n,e){return pe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;$e(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wl(n){return pe((e,t)=>{$e(n).subscribe(de(t,()=>t.complete(),Wa)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ot}function ED(n){let e=oe(null);try{return n()}finally{oe(e)}}var Ur=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ag=new Ur("20.3.14");var Zl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(Li(e,t)),this.code=e}};function dP(n){return`NG0${Math.abs(n)}`}function Li(n,e){return`${dP(n)}${e?": "+e:""}`}var tc=globalThis;function _e(n){for(let e in n)if(n[e]===_e)return e;throw Error("")}function DD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ar(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ar).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Rg(n,e){return n?e?`${n} ${e}`:n:e||""}var hP=_e({__forward_ref__:_e});function dn(n){return n.__forward_ref__=dn,n.toString=function(){return ar(this())},n}function at(n){return Ng(n)?n():n}function Ng(n){return typeof n=="function"&&n.hasOwnProperty(hP)&&n.__forward_ref__===dn}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function hn(n){return{providers:n.providers||[],imports:n.imports||[]}}function nc(n){return fP(n,Jl)}function Mg(n){return nc(n)!==null}function fP(n,e){return n.hasOwnProperty(e)&&n[e]||null}function pP(n){let e=n?.[Jl]??null;return e||null}function yg(n){return n&&n.hasOwnProperty(Ql)?n[Ql]:null}var Jl=_e({\u0275prov:_e}),Ql=_e({\u0275inj:_e}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Pg(n){return n&&!!n.\u0275providers}var xg=_e({\u0275cmp:_e}),kg=_e({\u0275dir:_e}),Og=_e({\u0275pipe:_e}),Fg=_e({\u0275mod:_e}),Xa=_e({\u0275fac:_e}),Vi=_e({__NG_ELEMENT_ID__:_e}),ID=_e({__NG_ENV_ID__:_e});function rc(n){return typeof n=="string"?n:n==null?"":String(n)}function TD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():rc(n)}var CD=_e({ngErrorCode:_e}),gP=_e({ngErrorMessage:_e}),mP=_e({ngTokenPath:_e});function Lg(n,e){return bD("",-200,e)}function Xl(n,e){throw new $(-201,!1)}function bD(n,e,t){let r=new $(e,n);return r[CD]=e,r[gP]=n,t&&(r[mP]=t),r}function yP(n){return n[CD]}var vg;function SD(){return vg}function Ft(n){let e=vg;return vg=n,e}function Vg(n,e,t){let r=nc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Xl(n,"Injector")}var vP={},Pi=vP,_g="__NG_DI_FLAG__",Eg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=xi(t)||0;try{return this.injector.get(e,r&8?null:Pi,r)}catch(i){if(Vo(i))return i;throw i}}};function _P(n,e=0){let t=ll();if(t===void 0)throw new $(-203,!1);if(t===null)return Vg(n,void 0,e);{let r=EP(e),i=t.retrieve(n,r);if(Vo(i)){if(r.optional)return null;throw i}return i}}function K(n,e=0){return(SD()||_P)(at(n),e)}function N(n,e){return K(n,xi(e))}function xi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function EP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ig(n){let e=[];for(let t=0;t<n.length;t++){let r=at(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=IP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function AD(n,e){return n[_g]=e,n.prototype[_g]=e,n}function IP(n){return n[_g]}function ki(n,e){let t=n.hasOwnProperty(Xa);return t?n[Xa]:null}function ed(n,e){n.forEach(t=>Array.isArray(t)?ed(t,e):e(t))}function jg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ic(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ND(n,e,t){let r=os(n,e);return r>=0?n[r|1]=t:(r=~r,RD(n,r,e,t)),r}function td(n,e){let t=os(n,e);if(t>=0)return n[t|1]}function os(n,e){return wP(n,e,1)}function wP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var $r={},Lt=[],ur=new B(""),Ug=new B("",-1),Bg=new B(""),ec=class{get(e,t=Pi){if(t===Pi){let i=bD("",-201);throw i.name="\u0275NotFound",i}return t}};function $g(n){return n[Fg]||null}function lr(n){return n[xg]||null}function Hg(n){return n[kg]||null}function MD(n){return n[Og]||null}function Wt(n){return{\u0275providers:n}}function PD(n){return Wt([{provide:ur,multi:!0,useValue:n}])}function xD(...n){return{\u0275providers:qg(!0,n),\u0275fromNgModule:!0}}function qg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ed(e,s=>{let a=s;Yl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kD(i,o),t}function kD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];zg(i,o=>{e(o,r)})}}function Yl(n,e,t,r){if(n=at(n),!n)return!1;let i=null,o=yg(n),s=!o&&lr(n);if(!o&&!s){let u=n.ngModule;if(o=yg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Yl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ed(o.imports,h=>{Yl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&kD(l,e)}if(!a){let l=ki(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:Bg,useValue:i,multi:!0},i),e({provide:ur,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;zg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function zg(n,e){for(let t of n)Pg(t)&&(t=t.\u0275providers),Array.isArray(t)?zg(t,e):e(t)}var DP=_e({provide:String,useValue:_e});function OD(n){return n!==null&&typeof n=="object"&&DP in n}function TP(n){return!!(n&&n.useExisting)}function CP(n){return!!(n&&n.useFactory)}function Oi(n){return typeof n=="function"}function FD(n){return!!n.useClass}var oc=new B(""),Kl={},wD={},mg;function sc(){return mg===void 0&&(mg=new ec),mg}var Le=class{},Fi=class extends Le{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Dg(e,s=>this.processProvider(s)),this.records.set(Ug,is(void 0,this)),i.has("environment")&&this.records.set(Le,is(void 0,this));let o=this.records.get(oc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Bg,Lt,{self:!0}))}retrieve(e,t){let r=xi(t)||0;try{return this.get(e,Pi,r)}catch(i){if(Vo(i))return i;throw i}}destroy(){Ja(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return Ja(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ja(this);let t=Rn(this),r=Ft(void 0),i;try{return e()}finally{Rn(t),Ft(r)}}get(e,t=Pi,r){if(Ja(this),e.hasOwnProperty(ID))return e[ID](this);let i=xi(r),o,s=Rn(this),a=Ft(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=NP(e)&&nc(e);h&&this.injectableDefInScope(h)?l=is(wg(e),Kl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?sc():this.parent;return t=i&8&&t===Pi?null:t,u.get(e,t)}catch(u){let l=yP(u);throw l===-200||l===-201?new $(l,null):u}finally{Ft(a),Rn(s)}}resolveInjectorInitializers(){let e=oe(null),t=Rn(this),r=Ft(void 0),i;try{let o=this.get(ur,Lt,{self:!0});for(let s of o)s()}finally{Rn(t),Ft(r),oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ar(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=at(e);let t=Oi(e)?e:at(e&&e.provide),r=SP(e);if(!Oi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=is(void 0,Kl,!0),i.factory=()=>Ig(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=oe(null);try{if(t.value===wD)throw Lg(ar(e));return t.value===Kl&&(t.value=wD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&RP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=at(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wg(n){let e=nc(n),t=e!==null?e.factory:ki(n);if(t!==null)return t;if(n instanceof B)throw new $(204,!1);if(n instanceof Function)return bP(n);throw new $(204,!1)}function bP(n){if(n.length>0)throw new $(204,!1);let t=pP(n);return t!==null?()=>t.factory(n):()=>new n}function SP(n){if(OD(n))return is(void 0,n.useValue);{let e=Gg(n);return is(e,Kl)}}function Gg(n,e,t){let r;if(Oi(n)){let i=at(n);return ki(i)||wg(i)}else if(OD(n))r=()=>at(n.useValue);else if(CP(n))r=()=>n.useFactory(...Ig(n.deps||[]));else if(TP(n))r=(i,o)=>K(at(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=at(n&&(n.useClass||n.provide));if(AP(n))r=()=>new i(...Ig(n.deps));else return ki(i)||wg(i)}return r}function Ja(n){if(n.destroyed)throw new $(205,!1)}function is(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AP(n){return!!n.deps}function RP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function NP(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Dg(n,e){for(let t of n)Array.isArray(t)?Dg(t,e):t&&Pg(t)?Dg(t.\u0275providers,e):e(t)}function qe(n,e){let t;n instanceof Fi?(Ja(n),t=n):t=new Eg(n);let r,i=Rn(t),o=Ft(void 0);try{return e()}finally{Rn(i),Ft(o)}}function LD(){return SD()!==void 0||ll()!=null}var fn=0,se=1,Z=2,ct=3,Kt=4,Qt=5,ac=6,ss=7,mt=8,Hr=9,Nn=10,xe=11,as=12,Wg=13,ji=14,Yt=15,Ui=16,Bi=17,$i=18,cc=19,Kg=20,sr=21,nd=22,uc=23,Vt=24,Hi=25,lc=26,jt=27,VD=1;var qr=7,dc=8,hc=9,Mt=10;function Mn(n){return Array.isArray(n)&&typeof n[VD]=="object"}function pn(n){return Array.isArray(n)&&n[VD]===!0}function Qg(n){return(n.flags&4)!==0}function zr(n){return n.componentOffset>-1}function fc(n){return(n.flags&1)===1}function Pn(n){return!!n.template}function cs(n){return(n[Z]&512)!==0}function qi(n){return(n[Z]&256)===256}var jD="svg",UD="math";function Zt(n){for(;Array.isArray(n);)n=n[fn];return n}function Yg(n,e){return Zt(e[n])}function gn(n,e){return Zt(e[n.index])}function rd(n,e){return n.data[e]}function Jt(n,e){let t=e[n];return Mn(t)?t:t[fn]}function id(n){return(n[Z]&128)===128}function BD(n){return pn(n[ct])}function pc(n,e){return e==null?null:n[e]}function Zg(n){n[Bi]=0}function Jg(n){n[Z]&1024||(n[Z]|=1024,id(n)&&us(n))}function $D(n,e){for(;n>0;)e=e[ji],n--;return e}function gc(n){return!!(n[Z]&9216||n[Vt]?.dirty)}function od(n){n[Nn].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),gc(n)&&us(n)}function us(n){n[Nn].changeDetectionScheduler?.notify(0);let e=Br(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!id(e)));)e=Br(e)}function Xg(n,e){if(qi(n))throw new $(911,!1);n[sr]===null&&(n[sr]=[]),n[sr].push(e)}function HD(n,e){if(n[sr]===null)return;let t=n[sr].indexOf(e);t!==-1&&n[sr].splice(t,1)}function Br(n){let e=n[ct];return pn(e)?e[ct]:e}function qD(n){return n[ss]??=[]}function zD(n){return n.cleanup??=[]}var he={lFrame:aT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Tg=!1;function GD(){return he.lFrame.elementDepthCount}function WD(){he.lFrame.elementDepthCount++}function KD(){he.lFrame.elementDepthCount--}function em(){return he.bindingsEnabled}function QD(){return he.skipHydrationRootTNode!==null}function YD(n){return he.skipHydrationRootTNode===n}function ZD(){he.skipHydrationRootTNode=null}function be(){return he.lFrame.lView}function Ut(){return he.lFrame.tView}function mn(n){return he.lFrame.contextLView=n,n[mt]}function yn(n){return he.lFrame.contextLView=null,n}function yt(){let n=tm();for(;n!==null&&n.type===64;)n=n.parent;return n}function tm(){return he.lFrame.currentTNode}function JD(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ls(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function nm(){return he.lFrame.isParent}function XD(){he.lFrame.isParent=!1}function rm(){return Tg}function im(n){let e=Tg;return Tg=n,e}function eT(n){return he.lFrame.bindingIndex=n}function mc(){return he.lFrame.bindingIndex++}function tT(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nT(){return he.lFrame.inI18n}function rT(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,sd(e)}function iT(){return he.lFrame.currentDirectiveIndex}function sd(n){he.lFrame.currentDirectiveIndex=n}function oT(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function om(n){he.lFrame.currentQueryIndex=n}function MP(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[Qt]:null}function sm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=MP(o),i===null||(o=o[ji],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=sT();return r.currentTNode=e,r.lView=n,!0}function ad(n){let e=sT(),t=n[se];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sT(){let n=he.lFrame,e=n===null?null:n.child;return e===null?aT(n):e}function aT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cT(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var am=cT;function cd(){let n=cT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uT(n){return(he.lFrame.contextLView=$D(n,he.lFrame.contextLView))[mt]}function zi(){return he.lFrame.selectedIndex}function Gr(n){he.lFrame.selectedIndex=n}function ud(){let n=he.lFrame;return rd(n.tView,n.selectedIndex)}function lT(){return he.lFrame.currentNamespace}var dT=!0;function ld(){return dT}function dd(n){dT=n}function Cg(n,e=null,t=null,r){let i=cm(n,e,t,r);return i.resolveInjectorInitializers(),i}function cm(n,e=null,t=null,r,i=new Set){let o=[t||Lt,xD(n)];return r=r||(typeof n=="object"?void 0:ar(n)),new Fi(o,e||sc(),r||null,i)}var He=class n{static THROW_IF_NOT_FOUND=Pi;static NULL=new ec;static create(e,t){if(Array.isArray(e))return Cg({name:""},t,e,"");{let r=e.name??"";return Cg({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>K(Ug)});static __NG_ELEMENT_ID__=-1},Ve=new B(""),Xt=(()=>{class n{static __NG_ELEMENT_ID__=PP;static __NG_ENV_ID__=t=>t}return n})(),bg=class extends Xt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return qi(this._lView)}onDestroy(e){let t=this._lView;return Xg(t,e),()=>HD(t,e)}};function PP(){return new bg(be())}var ln=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Pt=new B("",{providedIn:"root",factory:()=>{let n=N(Le),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ln),e.handleError(t))}}}),hT={provide:ur,useValue:()=>void N(ln),multi:!0},xP=new B("",{providedIn:"root",factory:()=>{let n=N(Ve).defaultView;if(!n)return;let e=N(Pt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),N(Xt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function um(){return Wt([PD(()=>void N(xP))])}function lm(n){return typeof n=="function"&&n[gt]!==void 0}function xt(n,e){let[t,r,i]=Xp(n,e?.equal),o=t,s=o[gt];return o.set=r,o.update=i,o.asReadonly=fT.bind(o),o}function fT(){let n=this[gt];if(n.readonlyFn===void 0){let e=()=>this();e[gt]=n,n.readonlyFn=e}return n.readonlyFn}function dm(n){return lm(n)&&typeof n.set=="function"}var hd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=kP}return n})();function kP(){return new hd(be(),yt())}var cr=class{},yc=new B("",{providedIn:"root",factory:()=>!1});var hm=new B(""),fm=new B(""),xn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new st(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new re(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),ds=(()=>{class n{internalPendingTasks=N(xn);scheduler=N(cr);errorHandler=N(Pt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();function vc(...n){}var pm=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Sg})}return n})(),Sg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function vs(n){return{toString:n}.toString()}var fd="__parameters__";function HP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function qP(n,e,t){return vs(()=>{let r=HP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(fd)?u[fd]:Object.defineProperty(u,fd,{value:[]})[fd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var fr=AD(qP("Optional"),8);function zP(n){return typeof n=="function"}var _d=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function GT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Kr=(()=>{let n=()=>WT;return n.ngInherit=!0,n})();function WT(n){return n.type.prototype.ngOnChanges&&(n.setInput=WP),GP}function GP(){let n=QT(this),e=n?.current;if(e){let t=n.previous;if(t===$r)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WP(n,e,t,r,i){let o=this.declaredInputs[r],s=QT(n)||KP(n,{previous:$r,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new _d(l&&l.currentValue,t,u===$r),GT(n,e,i,t)}var KT="__ngSimpleChanges__";function QT(n){return n[KT]||null}function KP(n,e){return n[KT]=e}var pT=[];var we=function(n,e=null,t){for(let r=0;r<pT.length;r++){let i=pT[r];i(n,e,t)}};function QP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=WT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function YT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function md(n,e,t){ZT(n,e,3,t)}function yd(n,e,t,r){(n[Z]&3)===t&&ZT(n,e,t,r)}function gm(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function ZT(n,e,t,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Bi]+=65536),(a<o||o==-1)&&(YP(n,t,e,u),n[Bi]=(n[Bi]&4294901760)+u+2),u++}function gT(n,e){we(4,n,e);let t=oe(null);try{e.call(n)}finally{oe(t),we(5,n,e)}}function YP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[Bi]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,gT(a,o)):gT(a,o)}var fs=-1,Wi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function ZP(n){return(n.flags&8)!==0}function JP(n){return(n.flags&16)!==0}function XP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];ex(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function JT(n){return n===3||n===4||n===6}function ex(n){return n.charCodeAt(0)===64}function Ic(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mT(n,t,i,null,e[++r]):mT(n,t,i,null,null))}}return n}function mT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function XT(n){return n!==fs}function Ed(n){return n&32767}function tx(n){return n>>16}function Id(n,e){let t=tx(n),r=e;for(;t>0;)r=r[ji],t--;return r}var Cm=!0;function yT(n){let e=Cm;return Cm=n,e}var nx=256,eC=nx-1,tC=5,rx=0,kn={};function ix(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vi)&&(r=t[Vi]),r==null&&(r=t[Vi]=rx++);let i=r&eC,o=1<<i;e.data[n+(i>>tC)]|=o}function wd(n,e){let t=nC(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,mm(r.data,n),mm(e,null),mm(r.blueprint,null));let i=qm(n,e),o=n.injectorIndex;if(XT(i)){let s=Ed(i),a=Id(i,e),u=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function mm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aC(i),r===null)return fs;if(t++,i=i[ji],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fs}function bm(n,e,t){ix(n,e,t)}function ox(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(JT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function rC(n,e,t){if(t&8||n!==void 0)return n;Xl(e,"NodeInjector")}function iC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Hr],o=Ft(void 0);try{return i?i.get(e,r,t&8):Vg(e,r,t&8)}finally{Ft(o)}}return rC(r,e,t)}function oC(n,e,t,r=0,i){if(n!==null){if(e[Z]&2048&&!(r&2)){let s=lx(n,e,t,r,kn);if(s!==kn)return s}let o=sC(n,e,t,r,kn);if(o!==kn)return o}return iC(e,t,r,i)}function sC(n,e,t,r,i){let o=cx(t);if(typeof o=="function"){if(!sm(e,n,r))return r&1?rC(i,t,r):iC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Xl(t);else return s}finally{am()}}else if(typeof o=="number"){let s=null,a=nC(n,e),u=fs,l=r&1?e[Yt][Qt]:null;for((a===-1||r&4)&&(u=a===-1?qm(n,e):e[a+8],u===fs||!_T(r,!1)?a=-1:(s=e[se],a=Ed(u),e=Id(u,e)));a!==-1;){let h=e[se];if(vT(o,a,h.data)){let p=sx(a,e,t,s,r,l);if(p!==kn)return p}u=e[a+8],u!==fs&&_T(r,e[se].data[a+8]===l)&&vT(o,a,e)?(s=h,a=Ed(u),e=Id(u,e)):a=-1}}return i}function sx(n,e,t,r,i,o){let s=e[se],a=s.data[n+8],u=r==null?zr(a)&&Cm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=ax(a,s,t,u,l);return h!==null?Dd(e,s,h,a,i):kn}function ax(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&Pn(y)&&y.type===t)return u}return null}function Dd(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Wi){let a=o;if(a.resolving){let y=TD(s[t]);throw Lg(y)}let u=yT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Ft(a.injectImpl):null,m=sm(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&QP(t,s[t],e)}finally{p!==null&&Ft(p),yT(u),a.resolving=!1,am()}}return o}function cx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vi)?n[Vi]:void 0;return typeof e=="number"?e>=0?e&eC:ux:e}function vT(n,e,t){let r=1<<n;return!!(t[e+(n>>tC)]&r)}function _T(n,e){return!(n&2)&&!(n&1&&e)}var Gi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return oC(this._tNode,this._lView,e,xi(r),t)}};function ux(){return new Gi(yt(),be())}function pr(n){return vs(()=>{let e=n.prototype.constructor,t=e[Xa]||Sm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Xa]||Sm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Sm(n){return Ng(n)?()=>{let e=Sm(at(n));return e&&e()}:ki(n)}function lx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!cs(s);){let a=sC(o,s,t,r|2,kn);if(a!==kn)return a;let u=o.parent;if(!u){let l=s[Kg];if(l){let h=l.get(t,kn,r);if(h!==kn)return h}u=aC(s),s=s[ji]}o=u}return i}function aC(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[Qt]:null}function Cc(n){return ox(yt(),n)}function dx(){return Od(yt(),be())}function Od(n,e){return new _n(gn(n,e))}var _n=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=dx}return n})();function cC(n){return(n.flags&128)===128}var zm=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(zm||{}),uC=new Map,hx=0;function fx(){return hx++}function px(n){uC.set(n[cc],n)}function Am(n){uC.delete(n[cc])}var ET="__ngContext__";function ps(n,e){Mn(e)?(n[ET]=e[cc],px(e)):n[ET]=e}function lC(n){return hC(n[as])}function dC(n){return hC(n[Kt])}function hC(n){for(;n!==null&&!pn(n);)n=n[Kt];return n}var Rm;function Gm(n){Rm=n}function fC(){if(Rm!==void 0)return Rm;if(typeof document<"u")return document;throw new $(210,!1)}var Fd=new B("",{providedIn:"root",factory:()=>gx}),gx="ng",Ld=new B(""),Zi=new B("",{providedIn:"platform",factory:()=>"unknown"});var Vd=new B("",{providedIn:"root",factory:()=>fC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mx="h",yx="b";var pC=!1,gC=new B("",{providedIn:"root",factory:()=>pC});var Wm=new B("");var vx=(n,e,t,r)=>{};function _x(n,e,t,r){vx(n,e,t,r)}function Km(n){return(n.flags&32)===32}var Ex=()=>null;function mC(n,e,t=!1){return Ex(n,e,t)}function yC(n,e){let t=n.contentQueries;if(t!==null){let r=oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];om(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function Nm(n,e,t){om(0);let r=oe(null);try{e(n,t)}finally{oe(r)}}function vC(n,e,t){if(Qg(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{oe(r)}}}var dr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(dr||{});var pd;function Ix(){if(pd===void 0&&(pd=null,tc.trustedTypes))try{pd=tc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pd}function IT(n){return Ix()?.createScriptURL(n)||n}var Td=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zl})`}};function bc(n){return n instanceof Td?n.changingThisBreaksApplicationSecurity:n}function Qm(n,e){let t=_C(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Zl})`)}return t===e}function _C(n){return n instanceof Td&&n.getTypeName()||null}var wx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function EC(n){return n=String(n),n.match(wx)?n:"unsafe:"+n}var jd=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(jd||{});function IC(n){let e=DC();return e?e.sanitize(jd.URL,n)||"":Qm(n,"URL")?bc(n):EC(rc(n))}function wC(n){let e=DC();if(e)return IT(e.sanitize(jd.RESOURCE_URL,n)||"");if(Qm(n,"ResourceURL"))return IT(bc(n));throw new $(904,!1)}function Dx(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?wC:IC}function Ym(n,e,t){return Dx(e,t)(n)}function DC(){let n=be();return n&&n[Nn].sanitizer}function TC(n){return n instanceof Function?n():n}function Tx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var CC="ng-template";function Cx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Tx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Zm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Zm(n){return n.type===4&&n.value!==CC}function bx(n,e,t){let r=n.type===4&&!t?CC:n.value;return e===r}function Sx(n,e,t){let r=4,i=n.attrs,o=i!==null?Nx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!vn(r)&&!vn(u))return!1;if(s&&vn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!bx(n,u,t)||u===""&&e.length===1){if(vn(r))return!1;s=!0}}else if(r&8){if(i===null||!Cx(n,i,u,t)){if(vn(r))return!1;s=!0}}else{let l=e[++a],h=Ax(u,i,Zm(n),t);if(h===-1){if(vn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(vn(r))return!1;s=!0}}}}return vn(r)||s}function vn(n){return(n&1)===0}function Ax(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Mx(e,n)}function Rx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Sx(n,e[r],t))return!0;return!1}function Nx(n){for(let e=0;e<n.length;e++){let t=n[e];if(JT(t))return e}return n.length}function Mx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wT(n,e){return n?":not("+e.trim()+")":e}function Px(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vn(s)&&(e+=wT(o,i),i=""),r=s,o=o||!vn(r);t++}return i!==""&&(e+=wT(o,i)),e}function xx(n){return n.map(Px).join(",")}function kx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!vn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Qr={};function Ox(n,e){return n.createText(e)}function Fx(n,e,t){n.setValue(e,t)}function bC(n,e,t){return n.createElement(e,t)}function Cd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function SC(n,e,t){n.appendChild(e,t)}function DT(n,e,t,r,i){r!==null?Cd(n,e,t,r,i):SC(n,e,t)}function Lx(n,e,t,r){n.removeChild(null,e,t,r)}function Vx(n,e,t){n.setAttribute(e,"style",t)}function jx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function AC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&XP(n,e,r),i!==null&&jx(n,e,i),o!==null&&Vx(n,e,o)}function Jm(n,e,t,r,i,o,s,a,u,l,h){let p=jt+r,m=p+i,y=Ux(p,m),S=typeof l=="function"?l():l;return y[se]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Ux(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qr);return t}function Bx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Jm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Xm(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[fn]=i,p[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),Zg(p),p[ct]=p[ji]=n,p[mt]=t,p[Nn]=s||n&&n[Nn],p[xe]=a||n&&n[xe],p[Hr]=u||n&&n[Hr]||null,p[Qt]=o,p[cc]=fx(),p[ac]=h,p[Kg]=l,p[Yt]=e.type==2?n[Yt]:p,p}function $x(n,e,t){let r=gn(e,n),i=Bx(t),o=n[Nn].rendererFactory,s=ey(n,Xm(n,i,null,RC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function RC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function NC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ey(n,e){return n[as]?n[Wg][Kt]=e:n[as]=e,n[Wg]=e,e}function ue(n=1){MC(Ut(),be(),zi()+n,!1)}function MC(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&md(e,o,t)}else{let o=n.preOrderHooks;o!==null&&yd(e,o,0,t)}Gr(t)}var Ud=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ud||{});function Mm(n,e,t,r){let i=oe(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Ud.SignalBased)!==0&&(u=e[o][gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):GT(e,u,o,r)}finally{oe(i)}}var hr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(hr||{}),Hx;function ty(n,e){return Hx(n,e)}var gs=new Set,Bd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Bd||{}),Ji=new B(""),TT=new Set;function Xi(n){TT.has(n)||(TT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var PC=!1,Pm=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,LD()&&(this.destroyRef=N(Xt,{optional:!0})??void 0,this.pendingTasks=N(xn,{optional:!0})??void 0)}emit(e){let t=oe(null);try{super.next(e)}finally{oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ze=Pm;function xC(n){let e,t;function r(){n=vc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function CT(n){return queueMicrotask(()=>n()),()=>{n=vc}}var ny="isAngularZone",bd=ny+"_ID",qx=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=PC}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Wx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zx,vc,vc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},zx={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xC(()=>{n.callbackScheduled=!1,xm(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),xm(n)}function Wx(n){let e=()=>{Gx(n)},t=qx++;n._inner=n._inner.fork({name:"angular",properties:{[ny]:!0,[bd]:t,[bd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Kx(u))return r.invokeTask(o,s,a,u);try{return bT(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ST(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return bT(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Qx(u)&&e(),ST(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,xm(n),ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function xm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ST(n){n._nesting--,ry(n)}var Sd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Kx(n){return kC(n,"__ignore_ng_zone__")}function Qx(n){return kC(n,"__scheduler_tick__")}function kC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var iy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),OC=[0,1,2,3],FC=(()=>{class n{ngZone=N(De);scheduler=N(cr);errorHandler=N(ln,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(Ji,{optional:!0})}execute(){let t=this.sequences.size>0;t&&we(16),this.executing=!0;for(let r of OC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&we(17)}register(t){let{view:r}=t;r!==void 0?((r[Hi]??=[]).push(t),us(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Bd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ad=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Hi];e&&(this.view[Hi]=e.filter(t=>t!==this))}};function Sc(n,e){let t=e?.injector??N(He);return Xi("NgAfterNextRender"),Zx(n,t,e,!0)}function Yx(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Zx(n,e,t,r){let i=e.get(iy);i.impl??=e.get(FC);let o=e.get(Ji,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Xt):null,a=e.get(hd,null,{optional:!0}),u=new Ad(i.impl,Yx(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Jx=new B("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function LC(n,e,t){let r=n.get(Jx);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Xx(n,e){for(let[t,r]of e)LC(n,r.animateFns)}function AT(n,e,t,r){let i=n?.[lc]?.enter;e!==null&&i&&i.has(t.index)&&Xx(r,i)}function hs(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;pn(i)?u=i:Mn(i)&&(l=!0,i=i[fn]);let h=Zt(i);n===0&&r!==null?(AT(a,r,o,t),s==null?SC(e,r,h):Cd(e,r,h,s||null,!0)):n===1&&r!==null?(AT(a,r,o,t),Cd(e,r,h,s||null,!0)):n===2?RT(a,o,t,p=>{Lx(e,h,l,p)}):n===3&&RT(a,o,t,()=>{e.destroyNode(h)}),u!=null&&hk(e,n,t,u,o,r,s)}}function ek(n,e){VC(n,e),e[fn]=null,e[Qt]=null}function tk(n,e,t,r,i,o){r[fn]=i,r[Qt]=e,$d(n,r,t,1,i,o)}function VC(n,e){e[Nn].changeDetectionScheduler?.notify(9),$d(n,e,e[xe],2,null,null)}function nk(n){let e=n[as];if(!e)return ym(n[se],n);for(;e;){let t=null;if(Mn(e))t=e[as];else{let r=e[Mt];r&&(t=r)}if(!t){for(;e&&!e[Kt]&&e!==n;)Mn(e)&&ym(e[se],e),e=e[ct];e===null&&(e=n),Mn(e)&&ym(e[se],e),t=e&&e[Kt]}e=t}}function oy(n,e){let t=n[hc],r=t.indexOf(e);t.splice(r,1)}function jC(n,e){if(qi(e))return;let t=e[xe];t.destroyNode&&$d(n,e,t,3,null,null),nk(e)}function ym(n,e){if(qi(e))return;let t=oe(null);try{e[Z]&=-129,e[Z]|=256,e[Vt]&&Ga(e[Vt]),ok(n,e),ik(n,e),e[se].type===1&&e[xe].destroy();let r=e[Ui];if(r!==null&&pn(e[ct])){r!==e[ct]&&oy(r,e);let i=e[$i];i!==null&&i.detachView(n)}Am(e)}finally{oe(t)}}function RT(n,e,t,r){let i=n?.[lc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&gs.add(n),LC(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),rk(n,r)}else n&&gs.delete(n),r(!1)},i)}function rk(n,e){let t=n[lc]?.running;if(t){t.then(()=>{n[lc].running=void 0,gs.delete(n),e(!0)});return}e(!1)}function ik(n,e){let t=n.cleanup,r=e[ss];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ss]=null);let i=e[sr];if(i!==null){e[sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[uc];if(o!==null){e[uc]=null;for(let s of o)s.destroy()}}function ok(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Wi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];we(4,a,u);try{u.call(a)}finally{we(5,a,u)}}else{we(4,i,o);try{o.call(i)}finally{we(5,i,o)}}}}}function sk(n,e,t){return ak(n,e.parent,t)}function ak(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[fn];if(zr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===dr.None||i===dr.Emulated)return null}return gn(r,t)}function ck(n,e,t){return lk(n,e,t)}function uk(n,e,t){return n.type&40?gn(n,t):null}var lk=uk,NT;function sy(n,e,t,r){let i=sk(n,r,e),o=e[xe],s=r.parent||e[Qt],a=ck(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)DT(o,i,t[u],a,!1);else DT(o,i,t,a,!1);NT!==void 0&&NT(o,r,e,t,i)}function _c(n,e){if(e!==null){let t=e.type;if(t&3)return gn(e,n);if(t&4)return km(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _c(n,r);{let i=n[e.index];return pn(i)?km(-1,i):Zt(i)}}else{if(t&128)return _c(n,e.next);if(t&32)return ty(e,n)()||Zt(n[e.index]);{let r=UC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(n[Yt]);return _c(i,r)}else return _c(n,e.next)}}}return null}function UC(n,e){if(e!==null){let r=n[Yt][Qt],i=e.projection;return r.projection[i]}return null}function km(n,e){let t=Mt+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return _c(r,i)}return e[qr]}function ay(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Hr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ps(Zt(u),r),t.flags|=2),!Km(t))if(l&8)ay(n,e,t.child,r,i,o,!1),hs(e,n,a,i,u,t,o,r);else if(l&32){let h=ty(t,r),p;for(;p=h();)hs(e,n,a,i,p,t,o,r);hs(e,n,a,i,u,t,o,r)}else l&16?dk(n,e,r,t,i,o):hs(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function $d(n,e,t,r,i,o){ay(t,r,n.firstChild,e,i,o,!1)}function dk(n,e,t,r,i,o){let s=t[Yt],u=s[Qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];hs(e,n,t[Hr],i,h,r,o,t)}else{let l=u,h=s[ct];cC(r)&&(l.flags|=128),ay(n,e,l,h,i,o,!0)}}function hk(n,e,t,r,i,o,s){let a=r[qr],u=Zt(r);a!==u&&hs(e,n,t,o,a,i,s);for(let l=Mt;l<r.length;l++){let h=r[l];$d(h[se],h,n,e,o,a)}}function fk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:hr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hr.Important),n.setStyle(t,r,i,o))}}function BC(n,e,t,r,i){let o=zi(),s=r&2;try{Gr(-1),s&&e.length>jt&&MC(n,e,jt,!1),we(s?2:0,i,t),t(r,i)}finally{Gr(o),we(s?3:1,i,t)}}function cy(n,e,t){Ek(n,e,t),(t.flags&64)===64&&Ik(n,e,t)}function $C(n,e,t=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function pk(n,e,t,r){let o=r.get(gC,pC)||t===dr.ShadowDom,s=n.selectRootElement(e,o);return gk(s),s}function gk(n){mk(n)}var mk=()=>null;function yk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HC(n,e,t,r,i,o){let s=e[se];if(uy(n,s,e,t,r)){zr(n)&&_k(e,n.index);return}n.type&3&&(t=yk(t)),vk(n,e,t,r,i,o)}function vk(n,e,t,r,i,o){if(n.type&3){let s=gn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function _k(n,e){let t=Jt(e,n);t[Z]&16||(t[Z]|=64)}function Ek(n,e,t){let r=t.directiveStart,i=t.directiveEnd;zr(t)&&$x(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||wd(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Dd(e,n,s,t);if(ps(u,e),o!==null&&Ck(e,s-r,u,a,t,o),Pn(a)){let l=Jt(t.index,e);l[mt]=Dd(e,n,s,t)}}}function Ik(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=iT();try{Gr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];sd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&wk(u,l)}}finally{Gr(-1),sd(s)}}function wk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function qC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Rx(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function Dk(n,e,t,r,i,o){let s=gn(n,e);Tk(e[xe],s,o,n.value,t,r,i)}function Tk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?rc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Ck(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Mm(r,t,u,l)}}function bk(n,e,t,r,i){let o=jt+t,s=e[se],a=i(s,e,n,r,t);e[o]=a,ls(n,!0);let u=n.type===2;return u?(AC(e[xe],a,n),(GD()===0||fc(n))&&ps(a,e),WD()):ps(a,e),ld()&&(!u||!Km(n))&&sy(s,e,a,n),n}function Sk(n){let e=n;return nm()?XD():(e=e.parent,ls(e,!1)),e}function Ak(n,e){let t=n[Hr];if(!t)return;let r;try{r=t.get(Pt,null)}catch{r=null}r?.(e)}function uy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Mm(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Mm(h,l,r,i),a=!0}return a}function Rk(n,e){let t=Jt(e,n),r=t[se];Nk(r,t);let i=t[fn];i!==null&&t[ac]===null&&(t[ac]=mC(i,t[Hr])),we(18),ly(r,t,t[mt]),we(19,t[mt])}function Nk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ly(n,e,t){ad(e);try{let r=n.viewQuery;r!==null&&Nm(1,r,t);let i=n.template;i!==null&&BC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[$i]?.finishViewCreation(n),n.staticContentQueries&&yC(n,e),n.staticViewQueries&&Nm(2,n.viewQuery,t);let o=n.components;o!==null&&Mk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,cd()}}function Mk(n,e){for(let t=0;t<e.length;t++)Rk(n,e[t])}function Pk(n,e,t,r){let i=oe(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=Xm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ui]=l;let h=n[$i];return h!==null&&(u[$i]=h.createEmbeddedView(o)),ly(o,u,t),u}finally{oe(i)}}function MT(n,e){return!e||e.firstChild===null||cC(n)}function wc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Zt(o)),pn(o)&&zC(o,r);let s=t.type;if(s&8)wc(n,e,t.child,r);else if(s&32){let a=ty(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=UC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Br(e[Yt]);wc(u[se],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function zC(n,e){for(let t=Mt;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&wc(r[se],r,i,e)}n[qr]!==n[fn]&&e.push(n[qr])}function GC(n){if(n[Hi]!==null){for(let e of n[Hi])e.impl.addSequence(e);n[Hi].length=0}}var WC=[];function xk(n){return n[Vt]??kk(n)}function kk(n){let e=WC.pop()??Object.create(Fk);return e.lView=n,e}function Ok(n){n.lView[Vt]!==n&&(n.lView=null,WC.push(n))}var Fk=ie(O({},jo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{us(n.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function Lk(n){let e=n[Vt]??Object.create(Vk);return e.lView=n,e}var Vk=ie(O({},jo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Br(n.lView);for(;e&&!KC(e[se]);)e=Br(e);e&&Jg(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function KC(n){return n.type!==2}function QC(n){if(n[uc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[uc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var jk=100;function YC(n,e=0){let r=n[Nn].rendererFactory,i=!1;i||r.begin?.();try{Uk(n,e)}finally{i||r.end?.()}}function Uk(n,e){let t=rm();try{im(!0),Om(n,e);let r=0;for(;gc(n);){if(r===jk)throw new $(103,!1);r++,Om(n,1)}}finally{im(t)}}function Bk(n,e,t,r){if(qi(e))return;let i=e[Z],o=!1,s=!1;ad(e);let a=!0,u=null,l=null;o||(KC(n)?(l=xk(e),u=Bo(l)):gl()===null?(a=!1,l=Lk(e),u=Bo(l)):e[Vt]&&(Ga(e[Vt]),e[Vt]=null));try{Zg(e),eT(n.bindingStartIndex),t!==null&&BC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&md(e,y,null)}else{let y=n.preOrderHooks;y!==null&&yd(e,y,0,null),gm(e,0)}if(s||$k(e),QC(e),ZC(e,0),n.contentQueries!==null&&yC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&md(e,y)}else{let y=n.contentHooks;y!==null&&yd(e,y,1),gm(e,1)}qk(n,e);let p=n.components;p!==null&&XC(e,p,0);let m=n.viewQuery;if(m!==null&&Nm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&md(e,y)}else{let y=n.viewHooks;y!==null&&yd(e,y,2),gm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[nd]){for(let y of e[nd])y();e[nd]=null}o||(GC(e),e[Z]&=-73)}catch(h){throw o||us(e),h}finally{l!==null&&(qa(l,u),a&&Ok(l)),cd()}}function ZC(n,e){for(let t=lC(n);t!==null;t=dC(t))for(let r=Mt;r<t.length;r++){let i=t[r];JC(i,e)}}function $k(n){for(let e=lC(n);e!==null;e=dC(e)){if(!(e[Z]&2))continue;let t=e[hc];for(let r=0;r<t.length;r++){let i=t[r];Jg(i)}}}function Hk(n,e,t){we(18);let r=Jt(e,n);JC(r,t),we(19,r[mt])}function JC(n,e){id(n)&&Om(n,e)}function Om(n,e){let r=n[se],i=n[Z],o=n[Vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&za(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)Bk(r,n,r.template,n[mt]);else if(i&8192){let a=oe(null);try{QC(n),ZC(n,1);let u=r.components;u!==null&&XC(n,u,1),GC(n)}finally{oe(a)}}}function XC(n,e,t){for(let r=0;r<e.length;r++)Hk(n,e[r],t)}function qk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gr(~i);else{let o=i,s=t[++r],a=t[++r];rT(s,o);let u=e[o];we(24,u),a(2,u),we(25,u)}}}finally{Gr(-1)}}function dy(n,e){let t=rm()?64:1088;for(n[Nn].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=Br(n);if(cs(n)&&!r)return n;n=r}return null}function eb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function zk(n,e,t,r=!0){let i=e[se];if(Gk(i,e,n,t),r){let s=km(t,n),a=e[xe],u=a.parentNode(n[qr]);u!==null&&tk(i,n[Qt],a,e,u,s)}let o=e[ac];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Fm(n,e){if(n.length<=Mt)return;let t=Mt+e,r=n[t];if(r){let i=r[Ui];i!==null&&i!==n&&oy(i,r),e>0&&(n[t-1][Kt]=r[Kt]);let o=ic(n,Mt+e);ek(r[se],r);let s=o[$i];s!==null&&s.detachView(o[se]),r[ct]=null,r[Kt]=null,r[Z]&=-129}return r}function Gk(n,e,t,r){let i=Mt+r,o=t.length;r>0&&(t[i-1][Kt]=e),r<o-Mt?(e[Kt]=t[i],jg(t,Mt+r,e)):(t.push(e),e[Kt]=null),e[ct]=t;let s=e[Ui];s!==null&&t!==s&&tb(s,e);let a=e[$i];a!==null&&a.insertView(n),od(e),e[Z]|=128}function tb(n,e){let t=n[hc],r=e[ct];if(Mn(r))n[Z]|=2;else{let i=r[ct][Yt];e[Yt]!==i&&(n[Z]|=2)}t===null?n[hc]=[e]:t.push(e)}var Wr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[se];return wc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[mt]}set context(e){this._lView[mt]=e}get destroyed(){return qi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(pn(e)){let t=e[dc],r=t?t.indexOf(this):-1;r>-1&&(Fm(e,r),ic(t,r))}this._attachedToViewContainer=!1}jC(this._lView[se],this._lView)}onDestroy(e){Xg(this._lView,e)}markForCheck(){dy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){od(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,YC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cs(this._lView),t=this._lView[Ui];t!==null&&!e&&oy(t,this._lView),VC(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=cs(this._lView),r=this._lView[Ui];r!==null&&!t&&tb(r,this._lView),od(this._lView)}};var Hd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Wk;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Pk(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Wr(o)}}return n})();function Wk(){return Kk(yt(),be())}function Kk(n,e){return n.type&4?new Hd(e,n,Od(n,e)):null}function hy(n,e,t,r,i){let o=n.data[e];if(o===null)o=Qk(n,e,t,r,i),nT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=JD();o.injectorIndex=s===null?-1:s.injectorIndex}return ls(o,!0),o}function Qk(n,e,t,r,i){let o=tm(),s=nm(),a=s?o:o&&o.parent,u=n.data[e]=Zk(n,a,t,e,r,i);return Yk(n,u,o,s),u}function Yk(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Zk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return QD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var l9=new RegExp(`^(\\d+)*(${yx}|${mx})*(.*)`);var Jk=()=>null;function PT(n,e){return Jk(n,e)}var nb=class{},qd=class{},Lm=class{resolveComponentFactory(e){throw new $(917,!1)}},Ac=class{static NULL=new Lm},Ki=class{},On=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Xk()}return n})();function Xk(){let n=be(),e=yt(),t=Jt(e.index,n);return(Mn(t)?t:n)[xe]}var rb=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var vd={},Vm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,vd,r);return i!==vd||t===vd?i:this.parentInjector.get(e,t,r)}};function xT(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Rg(i,a);else if(o==2){let u=a,l=e[++s];r=Rg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function te(n,e=0){let t=be();if(t===null)return K(n,e);let r=yt();return oC(r,t,at(n),e)}function fy(){let n="invalid";throw new Error(n)}function ib(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}nO(n,e,t,a,o,u,l)}o!==null&&r!==null&&eO(t,r,o)}function eO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function tO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nO(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Pn(y)&&(u=!0,tO(n,t,m)),bm(wd(t,e),n,y.type)}cO(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=NC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Ic(t.mergedAttrs,y.hostAttrs),iO(n,t,e,p,y),aO(p,y,i),s!==null&&s.has(y)){let[M,R]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}rO(n,t,o)}function rO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))kT(0,e,i,r),kT(1,e,i,r),FT(e,r,!1);else{let o=t.get(i);OT(0,e,o,r),OT(1,e,o,r),FT(e,r,!0)}}}function kT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ob(e,o)}}function OT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ob(e,s)}}function ob(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function FT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Zm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function iO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ki(i.type,!0)),s=new Wi(o,Pn(i),te,null);n.blueprint[r]=s,t[r]=s,oO(n,e,r,NC(n,t,i.hostVars,Qr),i)}function oO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;sO(s)!=a&&s.push(a),s.push(t,r,o)}}function sO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function aO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pn(e)&&(t[""]=n)}}function cO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sb(n,e,t,r,i,o,s,a){let u=e[se],l=u.consts,h=pc(l,s),p=hy(u,n,t,r,h);return o&&ib(u,e,p,pc(l,a),i),p.mergedAttrs=Ic(p.mergedAttrs,p.attrs),p.attrs!==null&&xT(p,p.attrs,!1),p.mergedAttrs!==null&&xT(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function ab(n,e){YT(n,e),Qg(e)&&n.queries.elementEnd(e)}function py(n){return ub(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function cb(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ub(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Rc(n,e,t){if(t===Qr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vm(n,e,t){return function r(i){let o=zr(n)?Jt(n.index,e):e;dy(o,5);let s=e[mt],a=LT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=LT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function LT(n,e,t,r){let i=oe(null);try{return we(6,e,t),t(r)!==!1}catch(o){return Ak(n,o),!1}finally{we(7,e,t),oe(i)}}function uO(n,e,t,r,i,o,s,a){let u=fc(n),l=!1,h=null;if(!r&&u&&(h=dO(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=gn(n,t),m=r?r(p):p;_x(t,m,o,a);let y=i.listen(m,o,a);if(!lO(o)){let S=r?M=>r(Zt(M[n.index])):n.index;lb(S,e,t,o,a,y,!1)}}return l}function lO(n){return n.startsWith("animation")||n.startsWith("transition")}function dO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ss],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function lb(n,e,t,r,i,o,s){let a=e.firstCreatePass?zD(e):null,u=qD(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function VT(n,e,t,r,i,o){let s=e[t],a=e[se],l=a.data[t].outputs[r],p=s[l].subscribe(o);lb(n.index,a,e,i,o,p,!0)}var jm=Symbol("BINDING");var Rd=class extends Ac{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=lr(e);return new Qi(t,this.ngModule)}};function hO(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ud.SignalBased)!==0};return i&&(o.transform=i),o})}function fO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function pO(n,e,t){let r=e instanceof Le?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Vm(t,r):t}function gO(n){let e=n.get(Ki,null);if(e===null)throw new $(407,!1);let t=n.get(rb,null),r=n.get(cr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function mO(n,e){let t=db(n);return bC(e,t,t==="svg"?jD:t==="math"?UD:null)}function db(n){return(n.selectors[0][0]||"div").toLowerCase()}var Qi=class extends qd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=hO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=xx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){we(22);let a=oe(null);try{let u=this.componentDef,l=yO(r,u,s,o),h=pO(u,i||this.ngModule,e),p=gO(h),m=p.rendererFactory.createRenderer(null,u),y=r?pk(m,r,u.encapsulation,h):mO(u,m),S=s?.some(jT)||o?.some(V=>typeof V!="function"&&V.bindings.some(jT)),M=Xm(null,l,null,512|RC(u),null,null,p,m,h,null,mC(y,h,!0));M[jt]=y,ad(M);let R=null;try{let V=sb(jt,M,2,"#host",()=>l.directiveRegistry,!0,0);AC(m,y,V),ps(y,M),cy(l,M,V),vC(l,V,M),ab(l,V),t!==void 0&&_O(V,this.ngContentSelectors,t),R=Jt(V.index,M),M[mt]=R[mt],ly(l,M,null)}catch(V){throw R!==null&&Am(R),Am(M),V}finally{we(23),cd()}return new Nd(this.componentType,M,!!S)}finally{oe(a)}}};function yO(n,e,t,r){let i=n?["ng-version","20.3.14"]:kx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[jm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[jm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Hg(p);u.push(m)}return Jm(0,null,vO(o,s),1,a,u,null,null,null,[i],null)}function vO(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function jT(n){let e=n[jm].kind;return e==="input"||e==="twoWay"}var Nd=class extends nb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=rd(t[se],jt),this.location=Od(this._tNode,t),this.instance=Jt(this._tNode.index,t)[mt],this.hostView=this.changeDetectorRef=new Wr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=uy(r,i[se],i,e,t);this.previousInputValues.set(e,t);let s=Jt(r.index,i);dy(s,1)}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _O(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var _s=(()=>{class n{static __NG_ELEMENT_ID__=EO}return n})();function EO(){let n=yt();return wO(n,be())}var IO=_s,hb=class extends IO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Od(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=qm(this._hostTNode,this._hostLView);if(XT(e)){let t=Id(e,this._hostLView),r=Ed(e),i=t[se].data[r+8];return new Gi(i,t)}else return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=UT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=PT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,MT(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!zP(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Qi(lr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let V=(u?p:this.parentInjector).get(Le,null);V&&(o=V)}let m=lr(h.componentType??{}),y=PT(this._lContainer,m?.id??null),S=y?.firstChild??null,M=h.create(p,i,S,o,s,a);return this.insertImpl(M.hostView,l,MT(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(BD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ct],l=new hb(u,u[Qt],u[ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return zk(s,i,o,r),e.attachToViewContainerRef(),jg(_m(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=UT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fm(this._lContainer,t);r&&(ic(_m(this._lContainer),t),jC(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fm(this._lContainer,t);return r&&ic(_m(this._lContainer),t)!=null?new Wr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UT(n){return n[dc]}function _m(n){return n[dc]||(n[dc]=[])}function wO(n,e){let t,r=e[n.index];return pn(r)?t=r:(t=eb(r,e,null,n),e[n.index]=t,ey(e,t)),TO(t,e,n,r),new hb(t,n,e)}function DO(n,e){let t=n[xe],r=t.createComment(""),i=gn(e,n),o=t.parentNode(i);return Cd(t,o,r,t.nextSibling(i),!1),r}var TO=SO,CO=()=>!1;function bO(n,e,t){return CO(n,e,t)}function SO(n,e,t,r){if(n[qr])return;let i;t.type&8?i=Zt(r):i=DO(e,t),n[qr]=i}var ms=class{},zd=class{};var Md=class extends ms{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=$g(e);this._bootstrapComponents=TC(o.bootstrap),this._r3Injector=cm(e,t,[{provide:ms,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver},...r],ar(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pd=class extends zd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Md(this.moduleType,e,[])}};var Dc=class extends ms{injector;componentFactoryResolver=new Rd(this);instance=null;constructor(e){super();let t=new Fi([...e.providers,{provide:ms,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver}],e.parent||sc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Es(n,e,t=null){return new Dc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var AO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qg(!1,t.type),i=r.length>0?Es([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(K(Le))})}return n})();function En(n){return vs(()=>{let e=fb(n),t=ie(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(AO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||dr.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Xi("NgStandalone"),pb(t);let r=n.dependencies;return t.directiveDefs=BT(r,RO),t.pipeDefs=BT(r,MD),t.id=PO(t),t})}function RO(n){return lr(n)||Hg(n)}function Fn(n){return vs(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NO(n,e){if(n==null)return $r;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Ud.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function MO(n){if(n==null)return $r;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function je(n){return vs(()=>{let e=fb(n);return pb(e),e})}function fb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$r,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:NO(n.inputs,e),outputs:MO(n.outputs),debugInfo:null}}function pb(n){n.features?.forEach(e=>e(n))}function BT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function PO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function xO(n){return Object.getPrototypeOf(n.prototype).constructor}function en(n){let e=xO(n.type),t=!0,r=[n];for(;e;){let i;if(Pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Em(n.inputs),s.declaredInputs=Em(n.declaredInputs),s.outputs=Em(n.outputs);let a=i.hostBindings;a&&VO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&FO(n,u),l&&LO(n,l),kO(n,i),DD(n.outputs,i.outputs),Pn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}OO(r)}function kO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function OO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ic(i.hostAttrs,t=Ic(t,i.hostAttrs))}}function Em(n){return n===$r?{}:n===Lt?[]:n}function FO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function LO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function VO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function jO(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ic(n.mergedAttrs,n.attrs);let h=n.tView=Jm(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ls(n,!1);let u=BO(t,e,n,r);ld()&&sy(t,e,u,n),ps(u,e);let l=eb(u,e,u,n);e[r+jt]=l,ey(e,l),bO(l,n,e)}function UO(n,e,t,r,i,o,s,a,u,l,h){let p=t+jt,m;return e.firstCreatePass?(m=hy(e,p,4,s||null,a||null),em()&&ib(e,n,m,pc(e.consts,l),qC),YT(e,m)):m=e.data[p],jO(m,n,e,t,r,i,o,u),fc(m)&&cy(e,n,m),l!=null&&$C(n,m,h),m}function Yr(n,e,t,r,i,o,s,a){let u=be(),l=Ut(),h=pc(l.consts,o);return UO(u,l,n,e,t,r,i,h,void 0,s,a),Yr}var BO=$O;function $O(n,e,t,r){return dd(!0),e[xe].createComment("")}var gy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var my=new B("");function eo(n){return!!n&&typeof n.then=="function"}function gb(n){return!!n&&typeof n.subscribe=="function"}var yy=new B("");function Gd(n){return Wt([{provide:yy,multi:!0,useValue:n}])}var vy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(yy,{optional:!0})??[];injector=N(He);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=qe(this.injector,i);if(eo(o))t.push(o);else if(gb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nc=new B("");function mb(){Jp(()=>{let n="";throw new $(600,n)})}function yb(n){return n.isBoundToModule}var HO=10;var gr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(Pt);afterRenderManager=N(iy);zonelessEnabled=N(yc);rootEffectScheduler=N(pm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(xn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(t=>!t))}constructor(){N(Ji,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(Le);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=He.NULL){return this._injector.get(De).run(()=>{we(10);let s=t instanceof qd;if(!this._injector.get(vy).done){let S="";throw new $(405,S)}let u;s?u=t:u=this._injector.get(Ac).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=yb(u)?void 0:this._injector.get(ms),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(my,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ec(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),we(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){we(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Bd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let t=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(t),this.afterTick.next(),we(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ki,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<HO;)we(14),this.synchronizeOnce(),we(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!gc(i))continue;let o=r&&!this.zonelessEnabled?0:1;YC(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>gc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ec(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Nc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ec(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ec(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mc(n,e,t,r){let i=be(),o=mc();if(Rc(i,o,e)){let s=Ut(),a=ud();Dk(a,i,n,e,t,r)}return Mc}var y9=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Zr(n,e,t){let r=be(),i=mc();if(Rc(r,i,e)){let o=Ut(),s=ud();HC(s,r,n,e,r[xe],t)}return Zr}function $T(n,e,t,r,i){uy(e,n,t,i?"class":"style",r)}function k(n,e,t,r){let i=be(),o=i[se],s=n+jt,a=o.firstCreatePass?sb(s,i,2,e,qC,em(),t,r):o.data[s];if(bk(a,i,n,e,qO),fc(a)){let u=i[se];cy(u,i,a),vC(u,a,i)}return r!=null&&$C(i,a),k}function F(){let n=Ut(),e=yt(),t=Sk(e);return n.firstCreatePass&&ab(n,t),YD(t)&&ZD(),KD(),t.classesWithoutHost!=null&&ZP(t)&&$T(n,t,be(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&JP(t)&&$T(n,t,be(),t.stylesWithoutHost,!1),F}function Jr(n,e,t,r){return k(n,e,t,r),F(),Jr}var qO=(n,e,t,r,i)=>(dd(!0),bC(e[xe],r,lT()));function to(){return be()}var Pc="en-US";var zO=Pc;function vb(n){typeof n=="string"&&(zO=n.toLowerCase().replace(/_/g,"-"))}function ke(n,e,t){let r=be(),i=Ut(),o=yt();return _b(i,r,r[xe],o,n,e,t),ke}function _b(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=vm(r,e,o),uO(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=vm(r,e,o),VT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=vm(r,e,o),VT(r,e,p,i,i,u)}}function Ln(n=1){return uT(n)}function gd(n,e){return n<<17|e<<2}function Yi(n){return n>>17&32767}function GO(n){return(n&2)==2}function WO(n,e){return n&131071|e<<17}function Um(n){return n|2}function ys(n){return(n&131068)>>2}function Im(n,e){return n&-131069|e<<2}function KO(n){return(n&1)===1}function Bm(n){return n|1}function QO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yi(s),u=ys(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||os(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Yi(n[a+1]);n[r+1]=gd(m,a),m!==0&&(n[m+1]=Im(n[m+1],r)),n[a+1]=WO(n[a+1],r)}else n[r+1]=gd(a,0),a!==0&&(n[a+1]=Im(n[a+1],r)),a=r;else n[r+1]=gd(u,0),a===0?a=r:n[u+1]=Im(n[u+1],r),u=r;l&&(n[r+1]=Um(n[r+1])),HT(n,h,r,!0),HT(n,h,r,!1),YO(e,h,n,r,o),s=gd(a,u),o?e.classBindings=s:e.styleBindings=s}function YO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&os(o,e)>=0&&(t[r+1]=Bm(t[r+1]))}function HT(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yi(i):ys(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ZO(u,e)&&(a=!0,n[s+1]=r?Bm(l):Um(l)),s=r?Yi(l):ys(l)}a&&(n[t+1]=r?Um(i):Bm(i))}function ZO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?os(n,e)>=0:!1}function xc(n,e){return JO(n,e,null,!0),xc}function JO(n,e,t,r){let i=be(),o=Ut(),s=tT(2);if(o.firstUpdatePass&&e1(o,n,s,r),e!==Qr&&Rc(i,s,e)){let a=o.data[zi()];o1(o,a,i,i[xe],n,i[s+1]=s1(e,t),r,s)}}function XO(n,e){return e>=n.expandoStartIndex}function e1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[zi()],s=XO(n,t);a1(o,r)&&e===null&&!s&&(e=!1),e=t1(i,o,e,r),QO(i,o,e,t,s,r)}}function t1(n,e,t,r){let i=oT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wm(null,n,e,t,r),t=Tc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wm(i,n,e,t,r),o===null){let u=n1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=wm(null,n,e,u[1],r),u=Tc(u,e.attrs,r),r1(n,e,r,u))}else o=i1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function n1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ys(r)!==0)return n[Yi(r)]}function r1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yi(i)]=r}function i1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Tc(r,s,t)}return Tc(r,e.attrs,t)}function wm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Tc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Tc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ND(n,s,t?!0:e[++o]))}return n===void 0?null:n}function o1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=KO(l)?qT(u,e,t,i,ys(l),s):void 0;if(!xd(h)){xd(o)||GO(l)&&(o=qT(u,null,t,i,a,s));let p=Yg(zi(),t);fk(r,s,p,i,o)}}function qT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Qr&&(m=p?Lt:void 0);let y=p?td(m,r):h===r?m:void 0;if(l&&!xd(y)&&(y=td(u,r)),xd(y)&&(a=y,s))return a;let S=n[i+1];i=s?Yi(S):ys(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=td(u,r))}return a}function xd(n){return n!==void 0}function s1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ar(bc(n)))),n}function a1(n,e){return(n.flags&(e?8:16))!==0}function j(n,e=""){let t=be(),r=Ut(),i=n+jt,o=r.firstCreatePass?hy(r,i,1,e,null):r.data[i],s=c1(r,t,o,e,n);t[i]=s,ld()&&sy(r,t,s,o),ls(o,!1)}var c1=(n,e,t,r,i)=>(dd(!0),Ox(e[xe],r));function u1(n,e,t,r=""){return Rc(n,mc(),t)?e+rc(t)+r:Qr}function Ye(n){return mr("",n),Ye}function mr(n,e,t){let r=be(),i=u1(r,n,e,t);return i!==Qr&&l1(r,zi(),i),mr}function l1(n,e,t){let r=Yg(e,n);Fx(n[xe],r,t)}function Ze(n,e,t){dm(e)&&(e=e());let r=be(),i=mc();if(Rc(r,i,e)){let o=Ut(),s=ud();HC(s,r,n,e,r[xe],t)}return Ze}function nt(n,e){let t=dm(n);return t&&n.set(e),t}function Je(n,e){let t=be(),r=Ut(),i=yt();return _b(r,t,t[xe],i,n,e),Je}function d1(n,e,t){let r=Ut();if(r.firstCreatePass){let i=Pn(n);$m(t,r.data,r.blueprint,i,!0),$m(e,r.data,r.blueprint,i,!1)}}function $m(n,e,t,r,i){if(n=at(n),Array.isArray(n))for(let o=0;o<n.length;o++)$m(n[o],e,t,r,i);else{let o=Ut(),s=be(),a=yt(),u=Oi(n)?n:at(n.provide),l=Gg(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Oi(n)||!n.multi){let y=new Wi(l,i,te,null),S=Tm(u,e,i?h:h+m,p);S===-1?(bm(wd(a,s),o,u),Dm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=Tm(u,e,h+m,p),S=Tm(u,e,h,h+m),M=y>=0&&t[y],R=S>=0&&t[S];if(i&&!R||!i&&!M){bm(wd(a,s),o,u);let V=p1(i?f1:h1,t.length,i,r,l,n);!i&&R&&(t[S].providerFactory=V),Dm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=Eb(t[i?S:y],l,!i&&r);Dm(o,n,y>-1?y:S,V)}!i&&r&&R&&t[S].componentProviders++}}}function Dm(n,e,t,r){let i=Oi(e),o=FD(e);if(i||o){let u=(o?at(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Eb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Tm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function h1(n,e,t,r,i){return Hm(this.multi,[])}function f1(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Dd(r,r[se],this.providerFactory.index,i);s=u.slice(0,a),Hm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Hm(o,s);return s}function Hm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function p1(n,e,t,r,i,o){let s=new Wi(n,t,te,null);return s.multi=[],s.index=e,s.componentProviders=0,Eb(s,i,r&&!t),s}function Xr(n,e=[]){return t=>{t.providersResolver=(r,i)=>d1(r,i?i(n):n,e)}}var kd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_y=(()=>{class n{compileModuleSync(t){return new Pd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$g(t),o=TC(i.declarations).reduce((s,a)=>{let u=lr(a);return u&&s.push(new Qi(u)),s},[]);return new kd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g1=(()=>{class n{zone=N(De);changeDetectionScheduler=N(cr);applicationRef=N(gr);applicationErrorHandler=N(Pt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ib=new B("",{factory:()=>!1});function Ey({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(ie(O({},wy()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:ur,multi:!0,useFactory:()=>{let r=N(g1,{optional:!0});return()=>r.initialize()}},{provide:ur,multi:!0,useFactory:()=>{let r=N(m1);return()=>{r.initialize()}}},e===!0?{provide:hm,useValue:!0}:[],{provide:fm,useValue:t??PC},{provide:Pt,useFactory:()=>{let r=N(De),i=N(Le),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(ln),o.handleError(s))})}}}]}function Iy(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Ey({ngZoneFactory:()=>{let i=wy(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Xi("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Wt([{provide:Ib,useValue:!0},{provide:yc,useValue:!1},r])}function wy(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var m1=(()=>{class n{subscription=new Pe;initialized=!1;zone=N(De);pendingTasks=N(xn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wb=(()=>{class n{applicationErrorHandler=N(Pt);appRef=N(gr);taskService=N(xn);ngZone=N(De);zonelessEnabled=N(yc);tracing=N(Ji,{optional:!0});disableScheduling=N(hm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(fm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Sd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?CT:xC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,CT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y1(){return typeof $localize<"u"&&$localize.locale||Pc}var Dy=new B("",{providedIn:"root",factory:()=>N(Dy,{optional:!0,skipSelf:!0})||y1()});function ut(n){return ED(n)}function Is(n,e){return _l(n,e?.equal)}var Db=class{[gt];constructor(e){this[gt]=e}destroy(){this[gt].destroy()}};var Ab=Symbol("InputSignalNode#UNSET"),R1=ie(O({},El),{transformFn:void 0,applyValueToInputSignal(n,e){Ho(n,e)}});function Rb(n,e){let t=Object.create(R1);t.value=n,t.transformFn=e?.transform;function r(){if(Uo(t),t.value===Ab){let i=null;throw new $(-950,i)}return t.value}return r[gt]=t,r}var Kd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Cc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},N1=new B("");N1.__NG_ELEMENT_ID__=n=>{let e=yt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new $(204,!1)};function Tb(n,e){return Rb(n,e)}function M1(n){return Rb(Ab,n)}var Nb=(Tb.required=M1,Tb);var Ty=new B(""),P1=new B("");function kc(n){return!n.moduleRef}function x1(n){let e=kc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{kc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Pt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),kc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ty);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ty);s.add(o),n.moduleRef.onDestroy(()=>{Ec(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return O1(r,t,()=>{let o=e.get(xn),s=o.add(),a=e.get(vy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Dy,Pc);if(vb(u||Pc),!e.get(P1,!0))return kc(n)?e.get(gr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(kc(n)){let h=e.get(gr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return k1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var k1;function O1(n,e,t){try{let r=t();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Wd=null;function F1(n=[],e){return He.create({name:e,providers:[{provide:oc,useValue:"platform"},{provide:Ty,useValue:new Set([()=>Wd=null])},...n]})}function L1(n=[]){if(Wd)return Wd;let e=F1(n);return Wd=e,mb(),V1(e),e}function V1(n){let e=n.get(Ld,null);qe(n,()=>{e?.forEach(t=>t())})}function Ry(){return!1}var ei=(()=>{class n{static __NG_ELEMENT_ID__=j1}return n})();function j1(n){return U1(yt(),be(),(n&16)===16)}function U1(n,e,t){if(zr(n)&&!t){let r=Jt(n.index,e);return new Wr(r,r)}else if(n.type&175){let r=e[Yt];return new Wr(r,e)}return null}var Cy=class{constructor(){}supports(e){return py(e)}create(e){return new by(e)}},B1=(n,e)=>e,by=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||B1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Cb(r,i,o)?t:r,a=Cb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!py(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,cb(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Sy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Ay=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ay,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Cb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function bb(){return new Ny([new Cy])}var Ny=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:bb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=N(n,{optional:!0,skipSelf:!0});return n.create(t,r||bb())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function Mb(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;we(8);try{let o=i?.injector??L1(r),s=[Ey({}),{provide:cr,useExisting:wb},hT,...t||[]],a=new Dc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return x1({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{we(9)}}function no(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Pb(n){let e=lr(n);if(!e)return null;let t=new Qi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ob=null;function tn(){return Ob}function My(n){Ob??=n}var Oc=class{},Fc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(Fb),providedIn:"platform"})}return n})(),Py=new B(""),Fb=(()=>{class n extends Fc{_location;_history;_doc=N(Ve);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tn().getBaseHref(this._doc)}onPopState(t){let r=tn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Zd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function xb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function In(n){return n&&n[0]!=="?"?`?${n}`:n}var wn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(Xd),providedIn:"root"})}return n})(),Jd=new B(""),Xd=(()=>{class n extends wn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(Ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Zd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+In(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+In(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+In(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(Fc),K(Jd,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ti=(()=>{class n{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=q1(xb(kb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+In(r))}normalize(t){return n.stripTrailingSlash(H1(this._basePath,kb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+In(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+In(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=In;static joinWithSlash=Zd;static stripTrailingSlash=xb;static \u0275fac=function(r){return new(r||n)(K(wn))};static \u0275prov=q({token:n,factory:()=>$1(),providedIn:"root"})}return n})();function $1(){return new ti(K(wn))}function H1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function kb(n){return n.replace(/\/index.html$/,"")}function q1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var xy=(()=>{class n extends wn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Zd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+In(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+In(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(Fc),K(Jd,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var eh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ni=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new eh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Lb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Lb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(te(_s),te(Hd),te(Ny))};static \u0275dir=je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Lb(n,e){n.context.$implicit=e.item}var Vn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=hn({})}return n})();function ky(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Lc=class{};var Vb="browser";var jb=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Oy(N(Ve),window)})}return n})(),Oy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ie(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=z1(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Li(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ie(O({},t),{left:i-s[0],top:o-s[1]}))}};function z1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vc=class{_doc;constructor(e){this._doc=e}manager},nh=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(K(Ve))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ih=new B(""),Uy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof nh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof nh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(K(ih),K(De))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Fy="ng-app-id";function Ub(n){for(let e of n)e.remove()}function Bb(n,e){let t=e.createElement("style");return t.textContent=n,t}function G1(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Fy}="${e}"],link[${Fy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Fy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Vy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var By=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,G1(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Bb);r?.forEach(i=>this.addUsage(i,this.external,Vy))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Ub(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Ub(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Bb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Vy(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(K(Ve),K(Fd),K(Vd,8),K(Zi))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$y=/%COMP%/g;var Hb="%COMP%",W1=`_nghost-${Hb}`,K1=`_ngcontent-${Hb}`,Q1=!0,Y1=new B("",{providedIn:"root",factory:()=>Q1});function Z1(n){return K1.replace($y,n)}function J1(n){return W1.replace($y,n)}function qb(n,e){return e.map(t=>t.replace($y,n))}var Hy=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new jc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof rh?i.applyToHost(t):i instanceof Uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case dr.Emulated:o=new rh(u,l,r,this.appId,h,s,a,p,m);break;case dr.ShadowDom:return new jy(u,l,t,r,s,a,this.nonce,p,m);default:o=new Uc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(K(Uy),K(By),K(Fd),K(Y1),K(Ve),K(De),K(Vd),K(Ji,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),jc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ly[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($b(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($b(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ly[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ly[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hr.DashCase|hr.Important)?e.style.setProperty(t,r,i&hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=tn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function $b(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jy=class extends jc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=qb(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Vy(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uc=class extends jc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?qb(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&gs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rh=class extends Uc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=Z1(h),this.hostAttr=J1(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var oh=class n extends Oc{supportsDOMEvents=!0;static makeCurrent(){My(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=X1();return t==null?null:eF(t)}resetBaseElement(){Bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ky(document.cookie,e)}},Bc=null;function X1(){return Bc=Bc||document.head.querySelector("base"),Bc?Bc.getAttribute("href"):null}function eF(n){return new URL(n,document.baseURI).pathname}var tF=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),zb=["alt","control","meta","shift"],nF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gb=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),zb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=nF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zb.forEach(s=>{if(s!==i){let a=rF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(K(Ve))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function qy(n,e,t){let r=O({rootComponent:n,platformRef:t?.platformRef},iF(e));return Mb(r)}function iF(n){return{appProviders:[...uF,...n?.providers??[]],platformProviders:cF}}function oF(){oh.makeCurrent()}function sF(){return new ln}function aF(){return Gm(document),document}var cF=[{provide:Zi,useValue:Vb},{provide:Ld,useValue:oF,multi:!0},{provide:Ve,useFactory:aF}];var uF=[{provide:oc,useValue:"root"},{provide:ln,useFactory:sF},{provide:ih,useClass:nh,multi:!0,deps:[Ve]},{provide:ih,useClass:Gb,multi:!0,deps:[Ve]},Hy,By,Uy,{provide:Ki,useExisting:Hy},{provide:Lc,useClass:tF},[]];var Wb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(K(Ve))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var J="primary",eu=Symbol("RouteTitle"),Qy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function oo(n){return new Qy(n)}function tS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function dF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?Yy(n):void 0,r=e?Yy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!nS(n[i],e[i]))return!1;return!0}function Yy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function rS(n){return n.length>0?n[n.length-1]:null}function yr(n){return fg(n)?n:eo(n)?Ae(Promise.resolve(n)):W(n)}var hF={exact:oS,subset:sS},iS={exact:fF,subset:pF,ignored:()=>!0};function Kb(n,e,t){return hF[t.paths](n.root,e.root,t.matrixParams)&&iS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function fF(n,e){return jn(n,e)}function oS(n,e,t){if(!ro(n.segments,e.segments)||!ch(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!oS(n.children[r],e.children[r],t))return!1;return!0}function pF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nS(n[t],e[t]))}function sS(n,e,t){return aS(n,e,e.segments,t)}function aS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!ch(i,t,r))}else if(n.segments.length===t.length){if(!ro(n.segments,t)||!ch(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!sS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ro(n.segments,i)||!ch(n.segments,i,r)||!n.children[J]?!1:aS(n.children[J],e,o,r)}}function ch(n,e,t){return e.every((r,i)=>iS[t](n[i].parameters,r.parameters))}var Bn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=oo(this.queryParams),this._queryParamMap}toString(){return yF.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uh(this)}},ri=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=oo(this.parameters),this._parameterMap}toString(){return uS(this)}};function gF(n,e){return ro(n,e)&&n.every((t,r)=>jn(t.parameters,e[r].parameters))}function ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function mF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===J&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==J&&(t=t.concat(e(i,r)))}),t}var so=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new ii,providedIn:"root"})}return n})(),ii=class{parse(e){let t=new Jy(e);return new Bn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$c(e.root,!0)}`,r=EF(e.queryParams),i=typeof e.fragment=="string"?`#${vF(e.fragment)}`:"";return`${t}${r}${i}`}},yF=new ii;function uh(n){return n.segments.map(e=>uS(e)).join("/")}function $c(n,e){if(!n.hasChildren())return uh(n);if(e){let t=n.children[J]?$c(n.children[J],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==J&&r.push(`${i}:${$c(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=mF(n,(r,i)=>i===J?[$c(n.children[J],!1)]:[`${i}:${$c(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[J]!=null?`${uh(n)}/${t[0]}`:`${uh(n)}/(${t.join("//")})`}}function cS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sh(n){return cS(n).replace(/%3B/gi,";")}function vF(n){return encodeURI(n)}function Zy(n){return cS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lh(n){return decodeURIComponent(n)}function Qb(n){return lh(n.replace(/\+/g,"%20"))}function uS(n){return`${Zy(n.path)}${_F(n.parameters)}`}function _F(n){return Object.entries(n).map(([e,t])=>`;${Zy(e)}=${Zy(t)}`).join("")}function EF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${sh(t)}=${sh(i)}`).join("&"):`${sh(t)}=${sh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var IF=/^[^\/()?;#]+/;function zy(n){let e=n.match(IF);return e?e[0]:""}var wF=/^[^\/()?;=#]+/;function DF(n){let e=n.match(wF);return e?e[0]:""}var TF=/^[^=?&#]+/;function CF(n){let e=n.match(TF);return e?e[0]:""}var bF=/^[^&#]+/;function SF(n){let e=n.match(bF);return e?e[0]:""}var Jy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[J]=new ye(e,t)),r}parseSegment(){let e=zy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new ri(lh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=DF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=zy(this.remaining);i&&(r=i,this.capture(r))}e[lh(t)]=lh(r)}parseQueryParam(e){let t=CF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=SF(this.remaining);s&&(r=s,this.capture(r))}let i=Qb(t),o=Qb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=J);let s=this.parseChildren();t[o??J]=Object.keys(s).length===1&&s[J]?s[J]:new ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function lS(n){return n.segments.length>0?new ye([],{[J]:n}):n}function dS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=dS(i);if(r===J&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ye(n.segments,e);return AF(t)}function AF(n){if(n.numberOfChildren===1&&n.children[J]){let e=n.children[J];return new ye(n.segments.concat(e.segments),e.children)}return n}function oi(n){return n instanceof Bn}function hS(n,e,t=null,r=null){let i=fS(n);return pS(i,e,t,r)}function fS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ye(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=lS(r);return e??i}function pS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Gy(i,i,i,t,r);let o=RF(e);if(o.toRoot())return Gy(i,i,new ye([],{}),t,r);let s=NF(o,i,n),a=s.processChildren?qc(s.segmentGroup,s.index,o.commands):mS(s.segmentGroup,s.index,o.commands);return Gy(i,s.segmentGroup,a,t,r)}function dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gc(n){return typeof n=="object"&&n!=null&&n.outlets}function Gy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=gS(n,e,t);let a=lS(dS(s));return new Bn(a,o,i)}function gS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=gS(o,e,t)}),new ye(n.segments,r)}var hh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&dh(r[0]))throw new $(4003,!1);let i=r.find(Gc);if(i&&i!==rS(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function RF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new hh(t,e,r)}var Ts=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function NF(n,e,t){if(n.isAbsolute)return new Ts(e,!0,0);if(!t)return new Ts(e,!1,NaN);if(t.parent===null)return new Ts(t,!0,0);let r=dh(n.commands[0])?0:1,i=t.segments.length-1+r;return MF(t,i,n.numberOfDoubleDots)}function MF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ts(r,!1,i-o)}function PF(n){return Gc(n[0])?n[0].outlets:{[J]:n}}function mS(n,e,t){if(n??=new ye([],{}),n.segments.length===0&&n.hasChildren())return qc(n,e,t);let r=xF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ye(n.segments.slice(0,r.pathIndex),{});return o.children[J]=new ye(n.segments.slice(r.pathIndex),n.children),qc(o,0,i)}else return r.match&&i.length===0?new ye(n.segments,{}):r.match&&!n.hasChildren()?Xy(n,e,t):r.match?qc(n,0,i):Xy(n,e,t)}function qc(n,e,t){if(t.length===0)return new ye(n.segments,{});{let r=PF(t),i={};if(Object.keys(r).some(o=>o!==J)&&n.children[J]&&n.numberOfChildren===1&&n.children[J].segments.length===0){let o=qc(n.children[J],e,t);return new ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=mS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ye(n.segments,i)}}function xF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Gc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Zb(u,l,s))return o;r+=2}else{if(!Zb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Gc(o)){let u=kF(o.outlets);return new ye(r,u)}if(i===0&&dh(t[0])){let u=n.segments[e];r.push(new ri(u.path,Yb(t[0]))),i++;continue}let s=Gc(o)?o.outlets[J]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&dh(a)?(r.push(new ri(s,Yb(a))),i+=2):(r.push(new ri(s,{})),i++)}return new ye(r,{})}function kF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Xy(new ye([],{}),0,r))}),e}function Yb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Zb(n,e,t){return n==t.path&&jn(e,t.parameters)}var Cs="imperative",Xe=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Xe||{}),Ht=class{id;url;constructor(e,t){this.id=e,this.url=t}},si=class extends Ht{type=Xe.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nn=class extends Ht{urlAfterRedirects;type=Xe.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(St||{}),Ss=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ss||{}),Un=class extends Ht{reason;code;type=Xe.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$n=class extends Ht{reason;code;type=Xe.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},As=class extends Ht{error;target;type=Xe.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wc=class extends Ht{urlAfterRedirects;state;type=Xe.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class extends Ht{urlAfterRedirects;state;type=Xe.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class extends Ht{urlAfterRedirects;state;shouldActivate;type=Xe.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gh=class extends Ht{urlAfterRedirects;state;type=Xe.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mh=class extends Ht{urlAfterRedirects;state;type=Xe.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class{route;type=Xe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vh=class{route;type=Xe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_h=class{snapshot;type=Xe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{snapshot;type=Xe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ih=class{snapshot;type=Xe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wh=class{snapshot;type=Xe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rs=class{routerEvent;position;anchor;type=Xe.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Kc=class{},Ns=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function OF(n){return!(n instanceof Kc)&&!(n instanceof Ns)}function FF(n,e){return n.providers&&!n._injector&&(n._injector=Es(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dn(n){return n.outlet||J}function LF(n,e){let t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}function xs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Dh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ao(this.rootInjector)}},ao=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Dh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(K(Le))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Th=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ev(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ev(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=tv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tv(e,this._root).map(t=>t.value)}};function ev(n,e){if(n===e.value)return e;for(let t of e.children){let r=ev(n,t);if(r)return r}return null}function tv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=tv(n,t);if(r.length)return r.unshift(e),r}return[]}var $t=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qc=class extends Th{snapshot;constructor(e,t){super(e),this.snapshot=t,uv(this,e)}toString(){return this.snapshot.toString()}};function yS(n){let e=VF(n),t=new st([new ri("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Hn(t,r,o,s,i,J,n,e.root);return a.snapshot=e.root,new Qc(new $t(a,[]),e)}function VF(n){let e={},t={},r={},o=new io([],e,r,"",t,J,n,null,{});return new Yc("",new $t(o,[]))}var Hn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[eu]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>oo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>oo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ch(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&_S(i)&&(r.resolve[eu]=i.title),r}var io=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[eu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=oo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=oo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yc=class extends Th{url;constructor(e,t){super(t),this.url=e,uv(this,t)}toString(){return vS(this._root)}};function uv(n,e){e.value._routerState=n,e.children.forEach(t=>uv(n,t))}function vS(n){let e=n.children.length>0?` { ${n.children.map(vS).join(", ")} } `:"";return`${n.value}${e}`}function Wy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),dF(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function nv(n,e){let t=jn(n.params,e.params)&&gF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||nv(n.parent,e.parent))}function _S(n){return typeof n.title=="string"||n.title===null}var ES=new B(""),tu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=J;activateEvents=new ze;deactivateEvents=new ze;attachEvents=new ze;detachEvents=new ze;routerOutletData=Nb();parentContexts=N(ao);location=N(_s);changeDetector=N(ei);inputBinder=N(nu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new rv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=je({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Kr]})}return n})(),rv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Hn?this.route:e===ao?this.childContexts:e===ES?this.outletData:this.parent.get(e,t)}},nu=new B(""),lv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Qa([r.queryParams,r.params,r.data]).pipe(bt(([o,s,a],u)=>(a=O(O(O({},o),s),a),u===0?W(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Pb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),dv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=En({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Jr(0,"router-outlet")},dependencies:[tu],encapsulation:2})}return n})();function hv(n){let e=n.children&&n.children.map(hv),t=e?ie(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==J&&(t.component=dv),t}function jF(n,e,t){let r=Zc(n,e._root,t?t._root:void 0);return new Qc(r,e)}function Zc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=UF(n,e,t);return new $t(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zc(n,a)),s}}let r=BF(e.value),i=e.children.map(o=>Zc(n,o));return new $t(r,i)}}function UF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zc(n,r,i);return Zc(n,r)})}function BF(n){return new Hn(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var Ms=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},IS="ngNavigationCancelingError";function bh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=oi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wS(!1,St.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[IS]=!0,t.cancellationCode=e,t}function $F(n){return DS(n)&&oi(n.url)}function DS(n){return!!n&&n[IS]}var HF=(n,e,t,r)=>ae(i=>(new iv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),iv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Eh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Wy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Sh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function qF(n,e,t){let r=n._root,i=e?e._root:null;return Hc(r,i,t,[r.value])}function zF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ks(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Mg(n)?n:e.get(n):r}function Hc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ds(e);return n.children.forEach(s=>{GF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zc(a,t.getContext(s),i)),i}function GF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=WF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hc(n,e,a?a.children:null,r,i):Hc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new bs(a.outlet.component,s))}else s&&zc(e,a,i),i.canActivateChecks.push(new Sh(r)),o.component?Hc(n,null,a?a.children:null,r,i):Hc(n,null,t,r,i);return i}function WF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nv(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!nv(n,e)}}function zc(n,e,t){let r=Ds(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zc(s,e.children.getContext(o),t):zc(s,null,t):zc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bs(e.outlet.component,i)):t.canDeactivateChecks.push(new bs(null,i)):t.canDeactivateChecks.push(new bs(null,i))}function ru(n){return typeof n=="function"}function KF(n){return typeof n=="boolean"}function QF(n){return n&&ru(n.canLoad)}function YF(n){return n&&ru(n.canActivate)}function ZF(n){return n&&ru(n.canActivateChild)}function JF(n){return n&&ru(n.canDeactivate)}function XF(n){return n&&ru(n.canMatch)}function TS(n){return n instanceof nr||n?.name==="EmptyError"}var ah=Symbol("INITIAL_VALUE");function Ps(){return bt(n=>Qa(n.map(e=>e.pipe(ir(1),Gl(ah)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===ah)return ah;if(t===!1||eL(t))return t}return!0}),Ct(e=>e!==ah),ir(1)))}function eL(n){return oi(n)||n instanceof Ms}function tL(n,e){return Fe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?W(ie(O({},t),{guardsResult:!0})):nL(s,r,i,n).pipe(Fe(a=>a&&KF(a)?rL(r,o,n,e):W(a)),ae(a=>ie(O({},t),{guardsResult:a})))})}function nL(n,e,t,r){return Ae(n).pipe(Fe(i=>cL(i.component,i.route,t,e,r)),or(i=>i!==!0,!0))}function rL(n,e,t,r){return Ae(e).pipe(Vr(i=>ns(oL(i.route.parent,r),iL(i.route,r),aL(n,i.path,t),sL(n,i.route,t))),or(i=>i!==!0,!0))}function iL(n,e){return n!==null&&e&&e(new Ih(n)),W(!0)}function oL(n,e){return n!==null&&e&&e(new _h(n)),W(!0)}function sL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Ya(()=>{let s=xs(e)??t,a=ks(o,s),u=YF(a)?a.canActivate(e,n):qe(s,()=>a(e,n));return yr(u).pipe(or())}));return W(i).pipe(Ps())}function aL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>zF(s)).filter(s=>s!==null).map(s=>Ya(()=>{let a=s.guards.map(u=>{let l=xs(s.node)??t,h=ks(u,l),p=ZF(h)?h.canActivateChild(r,n):qe(l,()=>h(r,n));return yr(p).pipe(or())});return W(a).pipe(Ps())}));return W(o).pipe(Ps())}function cL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let u=xs(e)??i,l=ks(a,u),h=JF(l)?l.canDeactivate(n,e,t,r):qe(u,()=>l(n,e,t,r));return yr(h).pipe(or())});return W(s).pipe(Ps())}function uL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=ks(s,n),u=QF(a)?a.canLoad(e,t):qe(n,()=>a(e,t));return yr(u)});return W(o).pipe(Ps(),CS(r))}function CS(n){return Cl(tt(e=>{if(typeof e!="boolean")throw bh(n,e)}),ae(e=>e===!0))}function lL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=ks(s,n),u=XF(a)?a.canMatch(e,t):qe(n,()=>a(e,t));return yr(u)});return W(o).pipe(Ps(),CS(r))}var Jc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Xc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ws(n){return es(new Jc(n))}function dL(n){return es(new $(4e3,!1))}function hL(n){return es(wS(!1,St.GuardRejected))}var ov=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[J])return dL(`${e.redirectTo}`);i=i.children[J]}}applyRedirectCommands(e,t,r,i,o){return fL(t,i,o).pipe(ae(s=>{if(s instanceof Bn)throw new Xc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Xc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Bn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function fL(n,e,t){if(typeof n=="string")return W(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return yr(qe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var sv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pL(n,e,t,r,i){let o=bS(n,e,t);return o.matched?(r=FF(e,r),lL(r,e,t,i).pipe(ae(s=>s===!0?o:O({},sv)))):W(o)}function bS(n,e,t){if(e.path==="**")return gL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},sv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||tS)(t,n,e);if(!i)return O({},sv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function gL(n){return{matched:!0,parameters:n.length>0?rS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Jb(n,e,t,r){return t.length>0&&vL(n,t,r)?{segmentGroup:new ye(e,yL(r,new ye(t,n.children))),slicedSegments:[]}:t.length===0&&_L(n,t,r)?{segmentGroup:new ye(n.segments,mL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ye(n.segments,n.children),slicedSegments:t}}function mL(n,e,t,r){let i={};for(let o of t)if(Rh(n,e,o)&&!r[Dn(o)]){let s=new ye([],{});i[Dn(o)]=s}return O(O({},r),i)}function yL(n,e){let t={};t[J]=e;for(let r of n)if(r.path===""&&Dn(r)!==J){let i=new ye([],{});t[Dn(r)]=i}return t}function vL(n,e,t){return t.some(r=>Rh(n,e,r)&&Dn(r)!==J)}function _L(n,e,t){return t.some(r=>Rh(n,e,r))}function Rh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function EL(n,e,t){return e.length===0&&!n.children[t]}var av=class{};function IL(n,e,t,r,i,o,s="emptyOnly"){return new cv(n,e,t,r,i,s,o).recognize()}var wL=31,cv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ov(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=Jb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new $t(r,t),o=new Yc("",i),s=hS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new io([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),J,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,J,t).pipe(ae(r=>({children:r,rootSnapshot:t})),rr(r=>{if(r instanceof Xc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof $t?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(Vr(s=>{let a=r.children[s],u=LF(t,s);return this.processSegmentGroup(e,u,a,s,i)}),zl((s,a)=>(s.push(...a),s)),jr(null),gg(),Fe(s=>{if(s===null)return ws(r);let a=SS(s);return DL(a),W(a)}))}processSegment(e,t,r,i,o,s,a){return Ae(t).pipe(Vr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(rr(l=>{if(l instanceof Jc)return W(null);throw l}))),or(u=>!!u),rr(u=>{if(TS(u))return EL(r,i,o)?W(new av):ws(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Dn(r)!==s&&(s===J||!Rh(i,o,r))?ws(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ws(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=bS(t,i,o);if(!u)return ws(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wL&&(this.allowRedirects=!1));let y=new io(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(i),Dn(i),i.component??i._loadedComponent??null,i,eS(i)),S=Ch(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(bt(R=>this.applyRedirects.lineralizeSegments(i,R)),Fe(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=pL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new io(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(r),Dn(r),r.component??r._loadedComponent??null,r,eS(r)),M=Ch(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(M.params),S.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:V}=Jb(t,m,y,l);if(V.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(ae(Y=>new $t(S,Y)));if(l.length===0&&V.length===0)return W(new $t(S,[]));let Q=Dn(r)===o;return this.processSegment(h,l,R,V,Q?J:o,!0,S).pipe(ae(Y=>new $t(S,Y instanceof $t?[Y]:[])))}))):ws(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):uL(e,t,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):hL(t))):W({routes:[],injector:e})}};function DL(n){n.sort((e,t)=>e.value.outlet===J?-1:t.value.outlet===J?1:e.value.outlet.localeCompare(t.value.outlet))}function TL(n){let e=n.value.routeConfig;return e&&e.path===""}function SS(n){let e=[],t=new Set;for(let r of n){if(!TL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=SS(r.children);e.push(new $t(r.value,i))}return e.filter(r=>!t.has(r))}function Xb(n){return n.data||{}}function eS(n){return n.resolve||{}}function CL(n,e,t,r,i,o){return Fe(s=>IL(n,e,t,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:u})=>ie(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function bL(n,e){return Fe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of AS(u))s.add(l);let a=0;return Ae(s).pipe(Vr(u=>o.has(u)?SL(u,r,n,e):(u.data=Ch(u,u.parent,n).resolve,W(void 0))),tt(()=>a++),rs(1),Fe(u=>a===s.size?W(t):Rt))})}function AS(n){let e=n.children.map(t=>AS(t)).flat();return[n,...e]}function SL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!_S(i)&&(o[eu]=i.title),Ya(()=>(n.data=Ch(n,n.parent,t).resolve,AL(o,n,e,r).pipe(ae(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function AL(n,e,t,r){let i=Yy(n);if(i.length===0)return W({});let o={};return Ae(i).pipe(Fe(s=>RL(n[s],e,t,r).pipe(or(),tt(a=>{if(a instanceof Ms)throw bh(new ii,a);o[s]=a}))),rs(1),ae(()=>o),rr(s=>TS(s)?Rt:es(s)))}function RL(n,e,t,r){let i=xs(e)??r,o=ks(n,i),s=o.resolve?o.resolve(e,t):qe(i,()=>o(e,t));return yr(s)}function Ky(n){return bt(e=>{let t=n(e);return t?Ae(t).pipe(ae(()=>e)):W(e)})}var fv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===J);return r}getResolvedTitleForRoute(t){return t.data[eu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(RS),providedIn:"root"})}return n})(),RS=(()=>{class n extends fv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(K(Wb))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ai=new B("",{providedIn:"root",factory:()=>({})}),co=new B(""),Nh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(_y);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=yr(qe(t,()=>r.loadComponent())).pipe(ae(MS),bt(PS),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Za(()=>{this.componentLoaders.delete(r)})),o=new Yo(i,()=>new Be).pipe(Qo());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NS(r,this.compiler,t,this.onLoadEndListener).pipe(Za(()=>{this.childrenLoaders.delete(r)})),s=new Yo(o,()=>new Be).pipe(Qo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NS(n,e,t,r){return yr(qe(t,()=>n.loadChildren())).pipe(ae(MS),bt(PS),Fe(i=>i instanceof zd||Array.isArray(i)?W(i):Ae(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(co,[],{optional:!0,self:!0}).flat()),{routes:s.map(hv),injector:o}}))}function NL(n){return n&&typeof n=="object"&&"default"in n}function MS(n){return NL(n)?n.default:n}function PS(n){return W(n)}var Mh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(ML),providedIn:"root"})}return n})(),ML=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pv=new B(""),gv=new B("");function xS(n,e,t){let r=n.get(gv),i=n.get(Ve);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),PL(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&qe(n,()=>u({transition:a,from:e,to:t})),s}function PL(n){return new Promise(e=>{Sc({read:()=>setTimeout(e)},{injector:n})})}var mv=new B(""),Ph=(()=>{class n{currentNavigation=xt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Be;transitionAbortWithErrorSubject=new Be;configLoader=N(Nh);environmentInjector=N(Le);destroyRef=N(Xt);urlSerializer=N(so);rootContexts=N(ao);location=N(ti);inputBindingEnabled=N(nu,{optional:!0})!==null;titleStrategy=N(fv);options=N(ai,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(Mh);createViewTransition=N(pv,{optional:!0});navigationErrorHandler=N(mv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new yh(i)),r=i=>this.events.next(new vh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ut(()=>{this.transitions?.next(ie(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new st(null),this.transitions.pipe(Ct(r=>r!==null),bt(r=>{let i=!1;return W(r).pipe(bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),Rt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ie(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new $n(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ss.IgnoredSameUrlNavigation)),o.resolve(!1),Rt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(bt(u=>(this.events.next(new si(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Rt:Promise.resolve(u))),CL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Wc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new si(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=yS(this.rootComponentType).snapshot;return this.currentTransition=r=ie(O({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:ie(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(M=>(M.finalUrl=l,M)),W(r)}else return this.events.next(new $n(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ss.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Rt}),tt(o=>{let s=new fh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=ie(O({},o),{guards:qF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),tL(this.environmentInjector,o=>this.events.next(o)),tt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw bh(this.urlSerializer,o.guardsResult);let s=new ph(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ct(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",St.GuardRejected),!1)),Ky(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(tt(s=>{let a=new gh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),bt(s=>{let a=!1;return W(s).pipe(bL(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",St.NoDataFromResolver)}}))}),tt(s=>{let a=new mh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Ky(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=xs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(tt(h=>{a.component=h}),ae(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Qa(s(o.targetSnapshot.root)).pipe(jr(null),ir(1))}),Ky(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ae(a).pipe(ae(()=>r)):W(r)}),ae(o=>{let s=jF(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ie(O({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),tt(()=>{this.events.next(new Kc)}),HF(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ir(1),Wl(new re(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ct(()=>!i&&!r.targetRouterState),tt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",St.Aborted)}))),tt({next:o=>{i=!0,this.lastSuccessfulNavigation=ut(this.currentNavigation),this.events.next(new nn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Wl(this.transitionAbortWithErrorSubject.pipe(tt(o=>{throw o}))),Za(()=>{i||this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),rr(o=>{if(this.destroyed)return r.resolve(!1),Rt;if(i=!0,DS(o))this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),$F(o)?this.events.next(new Ns(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new As(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ms){let{message:u,cancellationCode:l}=bh(this.urlSerializer,a);this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ns(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new Un(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ut(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xL(n){return n!==Cs}var kS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(kL),providedIn:"root"})}return n})(),Ah=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kL=(()=>{class n extends Ah{static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OS=(()=>{class n{urlSerializer=N(so);options=N(ai,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(ti);urlHandlingStrategy=N(Mh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Bn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=yS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(OL),providedIn:"root"})}return n})(),OL=(()=>{class n extends OS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof si?this.updateStateMemento():t instanceof $n?this.commitTransition(r):t instanceof Wc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Un&&t.code!==St.SupersededByNewNavigation&&t.code!==St.Redirect?this.restoreHistory(r):t instanceof As?this.restoreHistory(r,!0):t instanceof nn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xh(n,e){n.events.pipe(Ct(t=>t instanceof nn||t instanceof Un||t instanceof As||t instanceof $n),ae(t=>t instanceof nn||t instanceof $n?0:(t instanceof Un?t.code===St.Redirect||t.code===St.SupersededByNewNavigation:!1)?2:1),Ct(t=>t!==2),ir(1)).subscribe(()=>{e()})}var FL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(gy);stateManager=N(OS);options=N(ai,{optional:!0})||{};pendingTasks=N(xn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(Ph);urlSerializer=N(so);location=N(ti);urlHandlingStrategy=N(Mh);injector=N(Le);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(kS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(co,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(nu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ut(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Un&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nn)this.navigated=!0;else if(r instanceof Ns){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xL(i.source)},s);this.scheduleNavigation(a,Cs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}OF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Pt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ut(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=fS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return pS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=oi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cs,null,r)}navigate(t,r={skipLocationChange:!1}){return VL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Li(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},FL):r===!1?i=O({},LL):i=r,oi(t))return Kb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Kb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return xh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var kh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=xt(null);get href(){return ut(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Be;applicationErrorHandler=N(Pt);options=N(ai,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(N(new Kd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof nn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(oi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:oi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(te(qn),te(Hn),Cc("tabindex"),te(On),te(_n),te(wn))};static \u0275dir=je({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ke("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Mc("href",i.reactiveHref(),Ym)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",no],skipLocationChange:[2,"skipLocationChange","skipLocationChange",no],replaceUrl:[2,"replaceUrl","replaceUrl",no],routerLink:"routerLink"},features:[Kr]})}return n})();var iu=class{};var FS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(t=>t instanceof nn),Vr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Es(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ae(i).pipe(ts())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=W(null);let o=i.pipe(Fe(s=>s===null?W(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Ae([o,s]).pipe(ts())}else return o})}static \u0275fac=function(r){return new(r||n)(K(qn),K(Le),K(iu),K(Nh))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LS=new B(""),jL=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Cs;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $n&&t.code===Ss.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Rs))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>C(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Rs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){fy()};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function ou(n,...e){return Wt([{provide:co,multi:!0,useValue:n},[],{provide:Hn,useFactory:VS,deps:[qn]},{provide:Nc,multi:!0,useFactory:jS},e.map(t=>t.\u0275providers)])}function VS(n){return n.routerState.root}function su(n,e){return{\u0275kind:n,\u0275providers:e}}function jS(){let n=N(He);return e=>{let t=n.get(gr);if(e!==t.components[0])return;let r=n.get(qn),i=n.get(US);n.get(vv)===1&&r.initialNavigation(),n.get(HS,null,{optional:!0})?.setUpPreloading(),n.get(LS,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var US=new B("",{factory:()=>new Be}),vv=new B("",{providedIn:"root",factory:()=>1});function BS(){let n=[{provide:Wm,useValue:!0},{provide:vv,useValue:0},Gd(()=>{let e=N(He);return e.get(Py,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(qn),o=e.get(US);xh(i,()=>{r(!0)}),e.get(Ph).afterPreactivation=()=>(r(!0),o.closed?W(void 0):o),i.initialNavigation()}))})];return su(2,n)}function $S(){let n=[Gd(()=>{N(qn).setUpLocationChangeListener()}),{provide:vv,useValue:2}];return su(3,n)}var HS=new B("");function qS(n){return su(0,[{provide:HS,useExisting:FS},{provide:iu,useExisting:n}])}function zS(){return su(8,[lv,{provide:nu,useExisting:lv}])}function GS(n){Xi("NgRouterViewTransitions");let e=[{provide:pv,useValue:xS},{provide:gv,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return su(9,e)}var WS=[ti,{provide:so,useClass:ii},qn,ao,{provide:Hn,useFactory:VS,deps:[qn]},Nh,[]],_v=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[WS,[],{provide:co,multi:!0,useValue:t},[],r?.errorHandler?{provide:mv,useValue:r.errorHandler}:[],{provide:ai,useValue:r||{}},r?.useHash?BL():$L(),UL(),r?.preloadingStrategy?qS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?HL(r):[],r?.bindToComponentInputs?zS().\u0275providers:[],r?.enableViewTransitions?GS().\u0275providers:[],qL()]}}static forChild(t){return{ngModule:n,providers:[{provide:co,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=hn({})}return n})();function UL(){return{provide:LS,useFactory:()=>{let n=N(jb),e=N(De),t=N(ai),r=N(Ph),i=N(so);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jL(i,r,n,e,t)}}}function BL(){return{provide:wn,useClass:xy}}function $L(){return{provide:wn,useClass:Xd}}function HL(n){return[n.initialNavigation==="disabled"?$S().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BS().\u0275providers:[]]}var yv=new B("");function qL(){return[{provide:yv,useFactory:jS},{provide:Nc,multi:!0,useExisting:yv}]}var n0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(te(On),te(_n))};static \u0275dir=je({type:n})}return n})(),Hh=(()=>{class n extends n0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275dir=je({type:n,features:[en]})}return n})(),fu=new B("");var GL={provide:fu,useExisting:dn(()=>ui),multi:!0};function WL(){let n=tn()?tn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var KL=new B(""),ui=(()=>{class n extends n0{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!WL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(te(On),te(_n),te(KL,8))};static \u0275dir=je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ke("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xr([GL]),en]})}return n})();var r0=new B(""),i0=new B("");function o0(n){return n!=null}function s0(n){return eo(n)?Ae(n):n}function a0(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function c0(n,e){return e.map(t=>t(n))}function QL(n){return!n.validate}function u0(n){return n.map(e=>QL(e)?e:t=>e.validate(t))}function YL(n){if(!n)return null;let e=n.filter(o0);return e.length==0?null:function(t){return a0(c0(t,e))}}function wv(n){return n!=null?YL(u0(n)):null}function ZL(n){if(!n)return null;let e=n.filter(o0);return e.length==0?null:function(t){let r=c0(t,e).map(s0);return pg(r).pipe(ae(a0))}}function Dv(n){return n!=null?ZL(u0(n)):null}function KS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JL(n){return n._rawValidators}function XL(n){return n._rawAsyncValidators}function Ev(n){return n?Array.isArray(n)?n:[n]:[]}function Fh(n,e){return Array.isArray(n)?n.includes(e):n===e}function QS(n,e){let t=Ev(e);return Ev(n).forEach(i=>{Fh(t,i)||t.push(i)}),t}function YS(n,e){return Ev(e).filter(t=>!Fh(n,t))}var Lh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ls=class extends Lh{name;get formDirective(){return null}get path(){return null}},hu=class extends Lh{_parent=null;name=null;valueAccessor=null},Vh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},eV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},see=ie(O({},eV),{"[class.ng-submitted]":"isSubmitted"}),Vs=(()=>{class n extends Vh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(hu,2))};static \u0275dir=je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&xc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[en]})}return n})(),js=(()=>{class n extends Vh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(te(Ls,10))};static \u0275dir=je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&xc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[en]})}return n})();var au="VALID",Oh="INVALID",Os="PENDING",cu="DISABLED",ci=class{},jh=class extends ci{value;source;constructor(e,t){super(),this.value=e,this.source=t}},lu=class extends ci{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},du=class extends ci{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Fs=class extends ci{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Iv=class extends ci{source;constructor(e){super(),this.source=e}},Uh=class extends ci{source;constructor(e){super(),this.source=e}};function l0(n){return(qh(n)?n.validators:n)||null}function tV(n){return Array.isArray(n)?wv(n):n||null}function d0(n,e){return(qh(e)?e.asyncValidators:n)||null}function nV(n){return Array.isArray(n)?Dv(n):n||null}function qh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function rV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function iV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var Bh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(e){ut(()=>this.statusReactive.set(e))}_status=Is(()=>this.statusReactive());statusReactive=xt(void 0);get valid(){return this.status===au}get invalid(){return this.status===Oh}get pending(){return this.status==Os}get disabled(){return this.status===cu}get enabled(){return this.status!==cu}errors;get pristine(){return ut(this.pristineReactive)}set pristine(e){ut(()=>this.pristineReactive.set(e))}_pristine=Is(()=>this.pristineReactive());pristineReactive=xt(!0);get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(e){ut(()=>this.touchedReactive.set(e))}_touched=Is(()=>this.touchedReactive());touchedReactive=xt(!1);get untouched(){return!this.touched}_events=new Be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YS(e,this._rawAsyncValidators))}hasValidator(e){return Fh(this._rawValidators,e)}hasAsyncValidator(e){return Fh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new du(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new du(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new lu(!0,r))}markAsPending(e={}){this.status=Os;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cu,this.errors=null,this._forEachChild(i=>{i.disable(ie(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jh(this.value,r)),this._events.next(new Fs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=au,this._forEachChild(r=>{r.enable(ie(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===au||this.status===Os)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jh(this.value,t)),this._events.next(new Fs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cu:au}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Os,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=s0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Fs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?cu:this.errors?Oh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Os)?Os:this._anyControlsHaveStatus(Oh)?Oh:au}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new lu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new du(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=tV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=nV(this._rawAsyncValidators)}},$h=class extends Bh{constructor(e,t,r){super(l0(t),d0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){iV(this,!0,e),Object.keys(e).forEach(r=>{rV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Uh(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Tv=new B("",{providedIn:"root",factory:()=>Cv}),Cv="always";function oV(n,e){return[...e.path,n]}function h0(n,e,t=Cv){f0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),aV(n,e),uV(n,e),cV(n,e),sV(n,e)}function ZS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function f0(n,e){let t=JL(n);e.validator!==null?n.setValidators(KS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=XL(n);e.asyncValidator!==null?n.setAsyncValidators(KS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ZS(e._rawValidators,i),ZS(e._rawAsyncValidators,i)}function aV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&p0(n,e)})}function cV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&p0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function p0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function lV(n,e){n==null,f0(n,e)}function dV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function hV(n){return Object.getPrototypeOf(n.constructor)===Hh}function fV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ui?t=o:hV(o)?r=o:i=o}),i||r||t||null}var gV={provide:Ls,useExisting:dn(()=>uo)},uu=Promise.resolve(),uo=(()=>{class n extends Ls{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=Is(()=>this.submittedReactive());submittedReactive=xt(!1);_directives=new Set;form;ngSubmit=new ze;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new $h({},wv(t),Dv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),h0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uu.then(()=>{let r=this._findContainer(t.path),i=new $h({});lV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){uu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),fV(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Iv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(te(r0,10),te(i0,10),te(Tv,8))};static \u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ke("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xr([gV]),en]})}return n})();function JS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var mV=class extends Bh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(l0(t),d0(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Uh(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yV={provide:hu,useExisting:dn(()=>lo)},e0=Promise.resolve(),lo=(()=>{class n extends hu{_changeDetectorRef;callSetDisabledState;control=new mV;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ze;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),dV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){h0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){e0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&no(r);e0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oV(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(te(Ls,9),te(r0,10),te(i0,10),te(fu,10),te(ei,8),te(Tv,8))};static \u0275dir=je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xr([yV]),en,Kr]})}return n})();var Us=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),vV={provide:fu,useExisting:dn(()=>pu),multi:!0},pu=(()=>{class n extends Hh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275dir=je({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ke("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Xr([vV]),en]})}return n})();var _V={provide:fu,useExisting:dn(()=>Bs),multi:!0};function g0(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function EV(n){return n.split(":")[0]}var Bs=(()=>{class n extends Hh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=N(gr).injector;destroyRef=N(Xt);cdr=N(ei);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Sc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=g0(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=EV(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275dir=je({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ke("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([_V]),en]})}return n})(),zh=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(g0(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(te(_n),te(On),te(Bs,9))};static \u0275dir=je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),IV={provide:fu,useExisting:dn(()=>m0),multi:!0};function t0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function wV(n){return n.split(":")[0]}var m0=(()=>{class n extends Hh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=wV(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})();static \u0275dir=je({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ke("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([IV]),en]})}return n})(),Gh=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(t0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(t0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(te(_n),te(On),te(m0,9))};static \u0275dir=je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var DV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=hn({})}return n})();var $s=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Tv,useValue:t.callSetDisabledState??Cv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=hn({imports:[DV]})}return n})();var y0=()=>{};var E0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},TV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(E0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Av;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Av=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CV=function(n){let e=E0(n);return Wh.encodeByteArray(e,!0)},mu=function(n){return CV(n).replace(/\./g,"")},Kh=function(n){try{return Wh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bV=()=>Nv().__FIREBASE_DEFAULTS__,SV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Kh(n[1]);return e&&JSON.parse(e)},Qh=()=>{try{return y0()||bV()||SV()||AV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},I0=n=>{var e,t;return(t=(e=Qh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},w0=n=>{let e=I0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Mv=()=>{var n;return(n=Qh())===null||n===void 0?void 0:n.config},D0=n=>{var e;return(e=Qh())===null||e===void 0?void 0:e[`_${n}`]};var ho=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function fo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Pv(n){return C(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function T0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mu(JSON.stringify(t)),mu(JSON.stringify(s)),""].join(".")}var gu={};function RV(){let n={prod:[],emulator:[]};for(let e of Object.keys(gu))gu[e]?n.emulator.push(e):n.prod.push(e);return n}function NV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var v0=!1;function xv(n,e){if(typeof window>"u"||typeof document>"u"||!fo(window.location.host)||gu[n]===e||gu[n]||v0)return;gu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=RV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{v0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=NV(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),R=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),Q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Y=m.element;a(Y),h(R,M);let Te=l();u(Q,V),Y.append(Q,S,R,Te),document.body.appendChild(Y)}o?(S.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function MV(){var n;let e=(n=Qh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function A0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R0(){return!MV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yu(){try{return typeof indexedDB=="object"}catch{return!1}}function N0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var PV="FirebaseError",rn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=PV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}},Tn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new rn(i,a,r)}};function xV(n,e){return n.replace(kV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kV=/\{\$([^}]+)}/g;function po(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(_0(o)&&_0(s)){if(!po(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _0(n){return n!==null&&typeof n=="object"}function kv(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function M0(n,e){let t=new Rv(n,e);return t.subscribe.bind(t)}var Rv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");OV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Sv),i.error===void 0&&(i.error=Sv),i.complete===void 0&&(i.complete=Sv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function OV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Sv(){}var dee=14400*1e3;function vt(n){return n&&n._delegate?n._delegate:n}var At=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var go="[DEFAULT]";var Ov=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ho;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LV(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FV(n){return n===go?void 0:n}function LV(n){return n.instantiationMode==="EAGER"}var Yh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ov(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var VV=[],le=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(le||{}),jV={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},UV=le.INFO,BV={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},$V=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=BV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=UV,this._logHandler=$V,this._userLogHandler=null,VV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var HV=(n,e)=>e.some(t=>n instanceof t),P0,x0;function qV(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zV(){return x0||(x0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var k0=new WeakMap,Lv=new WeakMap,O0=new WeakMap,Fv=new WeakMap,jv=new WeakMap;function GV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Gn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&k0.set(t,n)}).catch(()=>{}),jv.set(e,n),e}function WV(n){if(Lv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Lv.set(n,e)}var Vv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||O0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F0(n){Vv=n(Vv)}function KV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Zh(this),e,...t);return O0.set(r,e.sort?e.sort():[e]),Gn(r)}:zV().includes(n)?function(...e){return n.apply(Zh(this),e),Gn(k0.get(this))}:function(...e){return Gn(n.apply(Zh(this),e))}}function QV(n){return typeof n=="function"?KV(n):(n instanceof IDBTransaction&&WV(n),HV(n,qV())?new Proxy(n,Vv):n)}function Gn(n){if(n instanceof IDBRequest)return GV(n);if(Fv.has(n))return Fv.get(n);let e=QV(n);return e!==n&&(Fv.set(n,e),jv.set(e,n)),e}var Zh=n=>jv.get(n);function V0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Gn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Gn(s.result),u.oldVersion,u.newVersion,Gn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YV=["get","getKey","getAll","getAllKeys","count"],ZV=["put","add","delete","clear"],Uv=new Map;function L0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Uv.get(e))return Uv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ZV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YV.includes(t)))return;let o=function(s,...a){return C(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Uv.set(e,o),o}F0(n=>ie(O({},n),{get:(e,t,r)=>L0(e,t)||n.get(e,t,r),has:(e,t)=>!!L0(e,t)||n.has(e,t)}));var $v=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function JV(n){let e=n.getComponent();return e?.type==="VERSION"}var Hv="@firebase/app",j0="0.13.2";var vr=new zn("@firebase/app"),XV="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",r2="@firebase/app-check",i2="@firebase/auth",o2="@firebase/auth-compat",s2="@firebase/database",a2="@firebase/data-connect",c2="@firebase/database-compat",u2="@firebase/functions",l2="@firebase/functions-compat",d2="@firebase/installations",h2="@firebase/installations-compat",f2="@firebase/messaging",p2="@firebase/messaging-compat",g2="@firebase/performance",m2="@firebase/performance-compat",y2="@firebase/remote-config",v2="@firebase/remote-config-compat",_2="@firebase/storage",E2="@firebase/storage-compat",I2="@firebase/firestore",w2="@firebase/ai",D2="@firebase/firestore-compat",T2="firebase",C2="11.10.0";var qv="[DEFAULT]",b2={[Hv]:"fire-core",[XV]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[r2]:"fire-app-check",[n2]:"fire-app-check-compat",[i2]:"fire-auth",[o2]:"fire-auth-compat",[s2]:"fire-rtdb",[a2]:"fire-data-connect",[c2]:"fire-rtdb-compat",[u2]:"fire-fn",[l2]:"fire-fn-compat",[d2]:"fire-iid",[h2]:"fire-iid-compat",[f2]:"fire-fcm",[p2]:"fire-fcm-compat",[g2]:"fire-perf",[m2]:"fire-perf-compat",[y2]:"fire-rc",[v2]:"fire-rc-compat",[_2]:"fire-gcs",[E2]:"fire-gcs-compat",[I2]:"fire-fst",[D2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};var vu=new Map,S2=new Map,zv=new Map;function U0(n,e){try{n.container.addComponent(e)}catch(t){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cn(n){let e=n.name;if(zv.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;zv.set(e,n);for(let t of vu.values())U0(t,n);for(let t of S2.values())U0(t,n);return!0}function Jh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _r(n){return n==null?!1:n.settings!==void 0}var A2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new Tn("app","Firebase",A2);var Gv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new At("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}};var Hs=C2;function Qv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(t||(t=Mv()),!t)throw li.create("no-options");let o=vu.get(i);if(o){if(po(t,o.options)&&po(r,o.config))return o;throw li.create("duplicate-app",{appName:i})}let s=new Yh(i);for(let u of zv.values())s.addComponent(u);let a=new Gv(t,r,s);return vu.set(i,a),a}function qs(n=qv){let e=vu.get(n);if(!e&&n===qv&&Mv())return Qv();if(!e)throw li.create("no-app",{appName:n});return e}function Xh(){return Array.from(vu.values())}function Ue(n,e,t){var r;let i=(r=b2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(a.join(" "));return}Cn(new At(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var R2="firebase-heartbeat-database",N2=1,_u="firebase-heartbeat-store",Bv=null;function q0(){return Bv||(Bv=V0(R2,N2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_u)}catch(t){console.warn(t)}}}}).catch(n=>{throw li.create("idb-open",{originalErrorMessage:n.message})})),Bv}function M2(n){return C(this,null,function*(){try{let t=(yield q0()).transaction(_u),r=yield t.objectStore(_u).get(z0(n));return yield t.done,r}catch(e){if(e instanceof rn)vr.warn(e.message);else{let t=li.create("idb-get",{originalErrorMessage:e?.message});vr.warn(t.message)}}})}function B0(n,e){return C(this,null,function*(){try{let r=(yield q0()).transaction(_u,"readwrite");yield r.objectStore(_u).put(e,z0(n)),yield r.done}catch(t){if(t instanceof rn)vr.warn(t.message);else{let r=li.create("idb-set",{originalErrorMessage:t?.message});vr.warn(r.message)}}})}function z0(n){return`${n.name}!${n.options.appId}`}var P2=1024,x2=30,Wv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Kv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>x2){let s=O2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vr.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=$0(),{heartbeatsToSend:r,unsentEntries:i}=k2(this._heartbeatsCache.heartbeats),o=mu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vr.warn(t),""}})}};function $0(){return new Date().toISOString().substring(0,10)}function k2(n,e=P2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),H0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),H0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Kv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return yu()?N0().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield M2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return B0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return B0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function H0(n){return mu(JSON.stringify({version:2,heartbeats:n})).length}function O2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function F2(n){Cn(new At("platform-logger",e=>new $v(e),"PRIVATE")),Cn(new At("heartbeat",e=>new Wv(e),"PRIVATE")),Ue(Hv,j0,n),Ue(Hv,j0,"esm2017"),Ue("fire-js","")}F2("");var L2="firebase",V2="11.10.0";Ue(L2,V2,"app");function G0(n){n===void 0&&(n=N(He));let e=n.get(ds);return t=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var yo=new Ur("ANGULARFIRE2_VERSION");function tf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Gs=(n,e)=>{let t=e?[e]:Xh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zs=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(zs||{}),W0=Ry()&&typeof Zone<"u"?zs.WARN:zs.SILENT;var ef=class{zone;delegate;constructor(e,t=dg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},vo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=N(De);this.outsideAngular=t.runOutsideAngular(()=>new ef(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ef(typeof Zone>"u"?void 0:Zone.current,lg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K0=!1;function j2(n,e){!K0&&(W0>zs.SILENT||Ry())&&(K0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),W0>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function U2(n){let e=N(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function mo(n){let e=N(De,{optional:!0});return e?e.run(()=>n()):n()}var B2=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),qe(t,()=>mo(()=>n.apply(void 0,r)))),on=(n,e,t)=>(t||=e?zs.WARN:zs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=N(vo),s=N(ds),a=N(Le)}catch{return j2(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=mo(()=>s.add())),i[l]=B2(i[l],r,a));let u=U2(()=>n.apply(this,i));return e?u instanceof re?u.pipe(Lr(o.outsideAngular),Fr(o.insideAngular),G0(a)):u instanceof Promise?mo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>qe(a,()=>mo(()=>h(m))),m=>qe(a,()=>mo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:mo(()=>u):u instanceof re?u.pipe(Lr(o.outsideAngular),Fr(o.insideAngular)):mo(()=>u)});var _o=class{constructor(e){return e}},Eu=class{constructor(){return Xh()}};function $2(n){return n&&n.length===1?n[0]:new _o(qs())}var Yv=new B("angularfire2._apps"),H2={provide:_o,useFactory:$2,deps:[[new fr,Yv]]},q2={provide:Eu,deps:[[new fr,Yv]]};function z2(n){return(e,t)=>{let r=t.get(Zi);Ue("angularfire",yo.full,"core"),Ue("angularfire",yo.full,"app"),Ue("angular",Ag.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _o(i)}}function nf(n,...e){return Wt([H2,q2,{provide:Yv,useFactory:z2(n),multi:!0,deps:[De,He,vo,...e]}])}var rf=on(Qv,!0);var G2=new Map,W2={activated:!1,tokenObservers:[]},K2={initialized:!1,enabled:!1};function bn(n){return G2.get(n)||Object.assign({},W2)}function J0(){return K2}var Q2="https://content-firebaseappcheck.googleapis.com/v1";var Y2="exchangeDebugToken",Q0={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},pte=1440*60*1e3;var Xv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new ho,this.pending.promise.catch(t=>{}),yield Z2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ho,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Z2(n){return new Promise(e=>{setTimeout(e,n)})}var J2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},di=new Tn("appCheck","AppCheck",J2);function X0(n){if(!bn(n).activated)throw di.create("use-before-activation",{appName:n.name})}function eA(r,i){return C(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw di.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw di.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw di.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function tA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Q2}/projects/${t}/apps/${r}:${Y2}?key=${i}`,body:{debug_token:e}}}var X2="firebase-app-check-database",ej=1,e_="firebase-app-check-store";var of=null;function tj(){return of||(of=new Promise((n,e)=>{try{let t=indexedDB.open(X2,ej);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(di.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(e_,{keyPath:"compositeKey"})}}}catch(t){e(di.create("storage-open",{originalErrorMessage:t?.message}))}}),of)}function nj(n,e){return rj(ij(n),e)}function rj(n,e){return C(this,null,function*(){let r=(yield tj()).transaction(e_,"readwrite"),o=r.objectStore(e_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(di.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function ij(n){return`${n.options.appId}-${n.name}`}var Iu=new zn("@firebase/app-check");function Zv(n,e){return yu()?nj(n,e).catch(t=>{Iu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nA(){return J0().enabled}function rA(){return C(this,null,function*(){let n=J0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oj={error:"UNKNOWN_ERROR"};function sj(n){return Wh.encodeString(JSON.stringify(n),!1)}function t_(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;X0(r);let i=bn(r),o=i.token,s;if(o&&!wu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(wu(l)?o=l:yield Zv(r,void 0))}if(!e&&o&&wu(o))return{token:o.token};let a=!1;if(nA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=eA(tA(r,yield rA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Zv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Iu.warn(l.message):t&&Iu.error(l),Jv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield bn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Iu.warn(l.message):t&&Iu.error(l),s=l}let u;return o?s?wu(o)?u={token:o.token,internalError:s}:u=Jv(s):(u={token:o.token},i.token=o,yield Zv(r,o)):u=Jv(s),a&&lj(r,u),u})}function aj(n){return C(this,null,function*(){let e=n.app;X0(e);let{provider:t}=bn(e);if(nA()){let r=yield rA(),{token:i}=yield eA(tA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function cj(n,e,t,r){let{app:i}=n,o=bn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&wu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Y0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Y0(n))}function iA(n,e){let t=bn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Y0(n){let{app:e}=n,t=bn(e),r=t.tokenRefresher;r||(r=uj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uj(n){let{app:e}=n;return new Xv(()=>C(null,null,function*(){let t=bn(e),r;if(t.token?r=yield t_(n,!0):r=yield t_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=bn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Q0.RETRIAL_MIN_WAIT,Q0.RETRIAL_MAX_WAIT)}function lj(n,e){let t=bn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wu(n){return n.expireTimeMillis-Date.now()>0}function Jv(n){return{token:sj(oj),error:n}}var n_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bn(this.app);for(let t of e)iA(this.app,t.next);return Promise.resolve()}};function dj(n,e){return new n_(n,e)}function hj(n){return{getToken:e=>t_(n,e),getLimitedUseToken:()=>aj(n),addTokenListener:e=>cj(n,"INTERNAL",e),removeTokenListener:e=>iA(n.app,e)}}var fj="@firebase/app-check",pj="0.10.1";var gj="app-check",Z0="app-check-internal";function mj(){Cn(new At(gj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return dj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Z0).initialize()})),Cn(new At(Z0,n=>{let e=n.getProvider("app-check").getImmediate();return hj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(fj,pj)}mj();var yj="app-check";var sf=class{constructor(){return Gs(yj)}};var vj=["localhost","0.0.0.0","127.0.0.1"],Ste=typeof window<"u"&&vj.includes(window.location.hostname);function hA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fA=hA,pA=new Tn("auth","Firebase",hA());var lf=new zn("@firebase/auth");function Ej(n,...e){lf.logLevel<=le.WARN&&lf.warn(`Auth (${Hs}): ${n}`,...e)}function cf(n,...e){lf.logLevel<=le.ERROR&&lf.error(`Auth (${Hs}): ${n}`,...e)}function oA(n,...e){throw p_(n,...e)}function f_(n,...e){return p_(n,...e)}function gA(n,e,t){let r=Object.assign(Object.assign({},fA()),{[e]:t});return new Tn("auth","Firebase",r).create(e,{appName:n.name})}function uf(n){return gA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pA.create(n,...e)}function ve(n,e,...t){if(!n)throw p_(e,...t)}function Du(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cf(e),new Error(e)}function df(n,e){n||Du(e)}function Ij(){return sA()==="http:"||sA()==="https:"}function sA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function wj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ij()||S0()||"connection"in navigator)?navigator.onLine:!0}function Dj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var wo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,df(t>e,"Short delay should be less than long delay!"),this.isMobile=C0()||A0()}get(){return wj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Tj(n,e){df(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var hf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Du("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Du("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Du("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sj=new wo(3e4,6e4);function mA(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function yf(o,s,a,u){return C(this,arguments,function*(n,e,t,r,i={}){return yA(n,i,()=>C(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=kv(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return b0()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&fo(n.emulatorConfig.host)&&(y.credentials="include"),hf.fetch()(yield vA(n,n.config.apiHost,t,p),y)}))})}function yA(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Cj),e);try{let i=new o_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw af(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw af(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw af(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gA(n,h,l);oA(n,h)}}catch(i){if(i instanceof rn)throw i;oA(n,"network-request-failed",{message:String(i)})}})}function vA(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Tj(n.config,i):`${n.config.apiScheme}://${i}`;return bj.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var o_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(f_(this.auth,"network-request-failed")),Sj.get())})}};function af(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=f_(n,e,r);return i.customData._tokenResponse=t,i}function Aj(n,e){return C(this,null,function*(){return yf(n,"POST","/v1/accounts:delete",e)})}function ff(n,e){return C(this,null,function*(){return yf(n,"POST","/v1/accounts:lookup",e)})}function Tu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function g_(n,e=!1){return C(this,null,function*(){let t=vt(n),r=yield t.getIdToken(e),i=_A(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Tu(r_(i.auth_time)),issuedAtTime:Tu(r_(i.iat)),expirationTime:Tu(r_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function r_(n){return Number(n)*1e3}function _A(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kh(t);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function aA(n){let e=_A(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function s_(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof rn&&Rj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Rj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var a_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pf(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield s_(n,ff(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?EA(o.providerUserInfo):[],a=Nj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function m_(n){return C(this,null,function*(){let e=vt(n);yield pf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Nj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EA(n){return n.map(e=>{var{providerId:t}=e,r=hg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Mj(n,e){return C(this,null,function*(){let t=yield yA(n,{},()=>C(null,null,function*(){let r=kv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield vA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&fo(n.emulatorConfig.host)&&(u.credentials="include"),hf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Pj(n,e){return C(this,null,function*(){return yf(n,"POST","/v2/accounts:revokeToken",mA(n,e))})}var Cu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=aA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Mj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Du("not implemented")}};function hi(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Eo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield s_(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return g_(this,e)}reload(){return m_(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(_r(this.auth.app))return Promise.reject(uf(this.auth));let e=yield this.getIdToken();return yield s_(this,Aj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:Te,isAnonymous:wt,providerData:Ie,stsTokenManager:w}=t;ve(Y&&w,e,"internal-error");let v=Cu.fromJSON(this.name,w);ve(typeof Y=="string",e,"internal-error"),hi(p,e.name),hi(m,e.name),ve(typeof Te=="boolean",e,"internal-error"),ve(typeof wt=="boolean",e,"internal-error"),hi(y,e.name),hi(S,e.name),hi(M,e.name),hi(R,e.name),hi(V,e.name),hi(Q,e.name);let E=new n({uid:Y,auth:e,email:m,emailVerified:Te,displayName:p,isAnonymous:wt,photoURL:S,phoneNumber:y,tenantId:M,stsTokenManager:v,createdAt:V,lastLoginAt:Q});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new Cu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?EA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var cA=new Map;function Io(n){df(n instanceof Function,"Expected a class definition");let e=cA.get(n);return e?(df(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cA.set(n,e),e)}var xj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),c_=xj;function i_(n,e,t){return`firebase:${n}:${e}:${t}`}var gf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=i_(this.userKey,i.apiKey,o),this.fullPersistenceKey=i_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ff(this.auth,{idToken:e}).catch(()=>{});return t?Eo._fromGetAccountInfoResponse(this.auth,t,e):null}return Eo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Io(c_),e,r);let i=(yield Promise.all(t.map(l=>C(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Io(c_),s=i_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield ff(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Eo._fromGetAccountInfoResponse(e,m,h)}else p=Eo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>C(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function uA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jj(e))return"Blackberry";if(Uj(e))return"Webos";if(Oj(e))return"Safari";if((e.includes("chrome/")||Fj(e))&&!e.includes("edge/"))return"Chrome";if(Vj(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kj(n=qt()){return/firefox\//i.test(n)}function Oj(n=qt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fj(n=qt()){return/crios\//i.test(n)}function Lj(n=qt()){return/iemobile/i.test(n)}function Vj(n=qt()){return/android/i.test(n)}function jj(n=qt()){return/blackberry/i.test(n)}function Uj(n=qt()){return/webos/i.test(n)}function IA(n,e=[]){let t;switch(n){case"Browser":t=uA(qt());break;case"Worker":t=`${uA(qt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hs}/${r}`}var u_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Bj(t){return C(this,arguments,function*(n,e={}){return yf(n,"GET","/v2/passwordPolicy",mA(n,e))})}var $j=6,l_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:$j,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var d_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mf(this),this.idTokenSubscription=new mf(this),this.beforeStateQueue=new u_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Io(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield gf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield ff(this,{idToken:e}),r=yield Eo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(_r(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Dj()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(_r(this.app))return Promise.reject(uf(this));let t=e?vt(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return _r(this.app)?Promise.reject(uf(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _r(this.app)?Promise.reject(uf(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Io(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield Bj(this),t=new l_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Pj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Io(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=yield gf.create(this,[Io(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ej(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Hj(n){return vt(n)}var mf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=M0(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var qj={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zj(n){qj=n}function Gj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Wj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Io);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var jte=Gj("rcb"),Ute=new wo(3e4,6e4);var Bte=new wo(2e3,1e4);var $te=600*1e3;var Hte=new wo(3e4,6e4);var qte=new wo(5e3,15e3);var zte=encodeURIComponent("fac");var lA="@firebase/auth",dA="1.10.8";var h_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Kj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qj(n){Cn(new At("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IA(n)},l=new d_(r,i,o,u);return Wj(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cn(new At("auth-internal",e=>{let t=Hj(e.getProvider("auth").getImmediate());return(r=>new h_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(lA,dA,Kj(n)),Ue(lA,dA,"esm2017")}var Yj=300,Gte=D0("authIdTokenMaxAge")||Yj;function Zj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}zj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=f_("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Zj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qj("Browser");var QU="auth";var vf=class{constructor(){return Gs(QU)}};var wA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DA={};var Er,y_;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,b){for(var _=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)_[Xn-2]=arguments[Xn];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],D=w.g[2];var b=w.g[3],_=v+(b^E&(D^b))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^b&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^b)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~b))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,D=this.h,b=0;b<v;){if(D==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(I[D++]=w.charCodeAt(b++),D==this.blockSize){i(this,I),D=0;break}}else for(;b<v;)if(I[D++]=w[b++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var b=w[D]|0;I&&b==v||(E[D]=b,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<w.length;D+=8){var b=Math.min(8,w.length-D),_=parseInt(w.substring(D,D+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-R(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(M(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var D=Te(E,v).g;E=V(E,D.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,S(E))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=V(this,w),M(w)?-1:S(w)?0:1};function R(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=v;D++){var b=I+(this.i(D)&65535)+(w.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=_>>>16,b&=65535,_&=65535,E[D]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function V(w,v){return w.add(R(v))}n.j=function(w){if(S(this)||S(w))return p;if(M(this))return M(w)?R(this).j(R(w)):R(R(this).j(w));if(M(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var b=this.i(I)>>>16,_=this.i(I)&65535,Xn=w.i(D)>>>16,Ta=w.i(D)&65535;E[2*I+2*D]+=_*Ta,Q(E,2*I+2*D),E[2*I+2*D+1]+=b*Ta,Q(E,2*I+2*D+1),E[2*I+2*D+1]+=_*Xn,Q(E,2*I+2*D+1),E[2*I+2*D+2]+=b*Xn,Q(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Y(w,v){this.g=w,this.h=v}function Te(w,v){if(S(v))throw Error("division by zero");if(S(w))return new Y(p,p);if(M(w))return v=Te(R(w),v),new Y(R(v.g),R(v.h));if(M(v))return v=Te(w,R(v)),new Y(R(v.g),v.h);if(30<w.g.length){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=wt(E),I=wt(I);var D=Ie(E,1),b=Ie(I,1);for(I=Ie(I,2),E=Ie(E,2);!S(I);){var _=b.add(I);0>=_.l(w)&&(D=D.add(E),b=_),I=Ie(I,1),E=Ie(E,1)}return v=V(w,D.j(v)),new Y(D,v)}for(D=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(E),_=b.j(v);M(_)||0<_.l(w);)E-=I,b=l(E),_=b.j(v);S(b)&&(b=m),D=D.add(b),w=V(w,_)}return new Y(D,w)}n.A=function(w){return Te(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function wt(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function Ie(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,D=[],b=0;b<I;b++)D[b]=0<v?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y_=DA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Er=DA.Integer=s}).apply(typeof wA<"u"?wA:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ir={};var v_,YU,Ws,__,Su,Ef,E_,I_,w_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,A){for(var L=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)L[Ce-2]=arguments[Ce];return d.prototype[T].apply(g,L)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,A=g.length||0;c.length=T+A;for(let L=0;L<A;L++)c[T+L]=g[L]}else c.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Te(c){return Te[" "](c),c}Te[" "]=function(){};var wt=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Ie(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function _(){var c=wp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Xn{constructor(){this.h=this.g=null}add(d,f){let g=Ta.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ta=new V(()=>new JN,c=>c.reset());class JN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ca,ba=!1,wp=new Xn,jI=()=>{let c=a.Promise.resolve(void 0);Ca=()=>{c.then(XN)}};var XN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){b(f)}var d=Ta;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ba=!1};function Mr(){this.s=this.s,this.C=this.C}Mr.prototype.s=!1,Mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var eM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Sa(c,d){if(lt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(wt){e:{try{Te(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Sa.aa.h.call(this)}}S(Sa,lt);var tM={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),nM=0;function rM(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++nM,this.da=this.fa=!1}function Wu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ku(c){this.src=c,this.g={},this.h=0}Ku.prototype.add=function(c,d,f,g,T){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=Tp(c,d,g,T);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new rM(d,this.src,A,!!g,T),d.fa=f,c.push(d)),d};function Dp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(Wu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Tp(c,d,f,g){for(var T=0;T<c.length;++T){var A=c[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var Cp="closure_lm_"+(1e6*Math.random()|0),bp={};function UI(c,d,f,g,T){if(g&&g.once)return $I(c,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)UI(c,d[A],f,g,T);return null}return f=Np(f),c&&c[Aa]?c.K(d,f,l(g)?!!g.capture:!!g,T):BI(c,d,f,!1,g,T)}function BI(c,d,f,g,T,A){if(!d)throw Error("Invalid event type");var L=l(T)?!!T.capture:!!T,Ce=Ap(c);if(Ce||(c[Cp]=Ce=new Ku(c)),f=Ce.add(d,f,g,L,A),f.proxy)return f;if(g=iM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)eM||(T=L),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(qI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function iM(){function c(f){return d.call(c.src,c.listener,f)}let d=oM;return c}function $I(c,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)$I(c,d[A],f,g,T);return null}return f=Np(f),c&&c[Aa]?c.L(d,f,l(g)?!!g.capture:!!g,T):BI(c,d,f,!0,g,T)}function HI(c,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)HI(c,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=Np(f),c&&c[Aa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Tp(A,f,g,T),-1<f&&(Wu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ap(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Tp(d,f,g,T)),(f=-1<c?d[c]:null)&&Sp(f))}function Sp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Aa])Dp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(qI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ap(d))?(Dp(f,c),f.h==0&&(f.src=null,d[Cp]=null)):Wu(c)}}}function qI(c){return c in bp?bp[c]:bp[c]="on"+c}function oM(c,d){if(c.da)c=!0;else{d=new Sa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Sp(c),c=f.call(g,d)}return c}function Ap(c){return c=c[Cp],c instanceof Ku?c:null}var Rp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Np(c){return typeof c=="function"?c:(c[Rp]||(c[Rp]=function(d){return c.handleEvent(d)}),c[Rp])}function dt(){Mr.call(this),this.i=new Ku(this),this.M=this,this.F=null}S(dt,Mr),dt.prototype[Aa]=!0,dt.prototype.removeEventListener=function(c,d,f,g){HI(this,c,d,f,g)};function Dt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new lt(d,c);else if(d instanceof lt)d.target=d.target||c;else{var T=d;d=new lt(g,c),I(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];T=Qu(L,g,!0,d)&&T}if(L=d.g=c,T=Qu(L,g,!0,d)&&T,T=Qu(L,g,!1,d)&&T,f)for(A=0;A<f.length;A++)L=d.g=f[A],T=Qu(L,g,!1,d)&&T}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Wu(f[g]);delete c.g[d],c.h--}}this.F=null},dt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},dt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Qu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Ce=L.listener,ot=L.ha||L.src;L.fa&&Dp(c.i,L),T=Ce.call(ot,g)!==!1&&T}}return T&&!g.defaultPrevented}function zI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function GI(c){c.g=zI(()=>{c.g=null,c.i&&(c.i=!1,GI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sM extends Mr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:GI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(c){Mr.call(this),this.h=c,this.g={}}S(Ra,Mr);var WI=[];function KI(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Sp(d)},c),c.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),KI(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mp=a.JSON.stringify,aM=a.JSON.parse,cM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Pp(){}Pp.prototype.h=null;function QI(c){return c.h||(c.h=c.i())}function YI(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xp(){lt.call(this,"d")}S(xp,lt);function kp(){lt.call(this,"c")}S(kp,lt);var Ti={},ZI=null;function Yu(){return ZI=ZI||new dt}Ti.La="serverreachability";function JI(c){lt.call(this,Ti.La,c)}S(JI,lt);function Ma(c){let d=Yu();Dt(d,new JI(d))}Ti.STAT_EVENT="statevent";function XI(c,d){lt.call(this,Ti.STAT_EVENT,c),this.stat=d}S(XI,lt);function Tt(c){let d=Yu();Dt(d,new XI(d,c))}Ti.Ma="timingevent";function ew(c,d){lt.call(this,Ti.Ma,c),this.size=d}S(ew,lt);function Pa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function uM(c,d,f,g,T,A){c.info(function(){if(c.g)if(A)for(var L="",Ce=A.split("&"),ot=0;ot<Ce.length;ot++){var me=Ce[ot].split("=");if(1<me.length){var ht=me[0];me=me[1];var ft=ht.split("_");L=2<=ft.length&&ft[1]=="type"?L+(ht+"="+me+"&"):L+(ht+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+L})}function lM(c,d,f,g,T,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+L})}function ko(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hM(c,f)+(g?" "+g:"")})}function dM(c,d){c.info(function(){return"TIMEOUT: "+d})}xa.prototype.info=function(){};function hM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<T.length;L++)T[L]=""}}}}return Mp(f)}catch{return d}}var Zu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Op;function Ju(){}S(Ju,Pp),Ju.prototype.g=function(){return new XMLHttpRequest},Ju.prototype.i=function(){return{}},Op=new Ju;function Pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nw}function nw(){this.i=null,this.g="",this.h=!1}var rw={},Fp={};function Lp(c,d,f){c.L=1,c.v=nl(er(d)),c.m=f,c.P=!0,iw(c,null)}function iw(c,d){c.F=Date.now(),Xu(c),c.A=er(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),vw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new nw,c.g=Fw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(WI[0]=T.toString()),T=WI);for(var A=0;A<T.length;A++){var L=UI(f,T[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ma(),uM(c.i,c.u,c.A,c.l,c.R,c.m)}Pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&tr(c)==3?d.j():this.Y(c)},Pr.prototype.Y=function(c){try{if(c==this.g)e:{let ft=tr(this.g);var d=this.g.Ba();let Lo=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Cw(this.g)))){this.J||ft!=4||d==7||(d==8||0>=Lo?Ma(3):Ma(2)),Vp(this);var f=this.g.Z();this.X=f;t:if(ow(this)){var g=Cw(this.g);c="";var T=g.length,A=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),ka(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,lM(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,ot=this.g;if((Ce=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ce)){var me=Ce;break t}}me=null}if(f=me)ko(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jp(this,f);else{this.o=!1,this.s=3,Tt(12),Ci(this),ka(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<L.length;)if(cn=fM(this,L),cn==Fp){ft==4&&(this.s=4,Tt(14),f=!1),ko(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==rw){this.s=4,Tt(15),ko(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else ko(this.i,this.l,cn,null),jp(this,cn);if(ow(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||L.length!=0||this.h.h||(this.s=1,Tt(16),f=!1),this.o=this.o&&f,!f)ko(this.i,this.l,L,"[Invalid Chunked Response]"),Ci(this),ka(this);else if(0<L.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),zp(ht),ht.M=!0,Tt(11))}}else ko(this.i,this.l,L,null),jp(this,L);ft==4&&Ci(this),this.o&&!this.J&&(ft==4?Pw(this.j,this):(this.o=!1,Xu(this)))}else NM(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Ci(this),ka(this)}}}catch{}finally{}};function ow(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Fp:(f=Number(d.substring(f,g)),isNaN(f)?rw:(g+=1,g+f>d.length?Fp:(d=d.slice(g,g+f),c.C=g+f,d)))}Pr.prototype.cancel=function(){this.J=!0,Ci(this)};function Xu(c){c.S=Date.now()+c.I,sw(c,c.I)}function sw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pa(m(c.ba,c),d)}function Vp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(dM(this.i,this.A),this.L!=2&&(Ma(),Tt(17)),Ci(this),this.s=2,ka(this)):sw(this,this.S-c)};function ka(c){c.j.G==0||c.J||Pw(c.j,c)}function Ci(c){Vp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,KI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function jp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Up(f.h,c))){if(!c.K&&Up(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)al(f),ol(f);else break e;qp(f),Tt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Pa(m(f.Za,f),6e3));if(1>=uw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Si(f,11)}else if((c.K||f.g==c)&&al(f),!Q(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let me=T[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let ht=me[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=me[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let Lo=me[5];Lo!=null&&typeof Lo=="number"&&0<Lo&&(g=1.5*Lo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let cn=c.g;if(cn){let ul=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var A=g.h;A.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Bp(A,A.h),A.h=null))}if(g.D){let Gp=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gp&&(g.ya=Gp,Se(g.I,g.D,Gp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=Ow(g,g.J?g.ia:null,g.W),L.K){lw(g.h,L);var Ce=L,ot=g.L;ot&&(Ce.I=ot),Ce.B&&(Vp(Ce),Xu(Ce)),g.g=L}else Nw(g);0<f.i.length&&sl(f)}else me[0]!="stop"&&me[0]!="close"||Si(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Si(f,7):Hp(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Ma(4)}catch{}}var pM=class{constructor(c,d){this.g=c,this.map=d}};function aw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function uw(c){return c.h?1:c.g?c.g.size:0}function Up(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Bp(c,d){c.g?c.g.add(d):c.h=d}function lw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}aw.prototype.cancel=function(){if(this.i=dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function dw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function gM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function mM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function hw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=mM(c),g=gM(c),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],c)}var fw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var A=c[f].substring(0,g);T=c[f].substring(g+1)}else A=c[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bi){this.h=c.h,el(this,c.j),this.o=c.o,this.g=c.g,tl(this,c.s),this.l=c.l;var d=c.i,f=new La;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),pw(this,f),this.m=c.m}else c&&(d=String(c).match(fw))?(this.h=!1,el(this,d[1]||"",!0),this.o=Oa(d[2]||""),this.g=Oa(d[3]||"",!0),tl(this,d[4]),this.l=Oa(d[5]||"",!0),pw(this,d[6]||"",!0),this.m=Oa(d[7]||"")):(this.h=!1,this.i=new La(null,this.h))}bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Fa(d,gw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Fa(d,gw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Fa(f,f.charAt(0)=="/"?EM:_M,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Fa(f,wM)),c.join("")};function er(c){return new bi(c)}function el(c,d,f){c.j=f?Oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function tl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function pw(c,d,f){d instanceof La?(c.i=d,DM(c.i,c.h)):(f||(d=Fa(d,IM)),c.i=new La(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function nl(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,vM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var gw=/[#\/\?@]/g,_M=/[#\?:]/g,EM=/[#\?]/g,IM=/[#\?@]/g,wM=/#/g;function La(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function xr(c){c.g||(c.g=new Map,c.h=0,c.i&&yM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=La.prototype,n.add=function(c,d){xr(this),this.i=null,c=Oo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function mw(c,d){xr(c),d=Oo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function yw(c,d){return xr(c),d=Oo(c,d),c.g.has(d)}n.forEach=function(c,d){xr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){xr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},n.V=function(c){xr(this);let d=[];if(typeof c=="string")yw(this,c)&&(d=d.concat(this.g.get(Oo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return xr(this),this.i=null,c=Oo(this,c),yw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function vw(c,d,f){mw(c,d),0<f.length&&(c.i=null,c.g.set(Oo(c,d),M(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var T=A;L[g]!==""&&(T+="="+encodeURIComponent(String(L[g]))),c.push(T)}}return this.i=c.join("&")};function Oo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function DM(c,d){d&&!c.j&&(xr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(mw(this,g),vw(this,T,f))},c)),c.j=d}function TM(c,d){let f=new xa;if(a.Image){let g=new Image;g.onload=y(kr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(kr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(kr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(kr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function CM(c,d){let f=new xa,g=new AbortController,T=setTimeout(()=>{g.abort(),kr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?kr(f,"TestPingServer: ok",!0,d):kr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),kr(f,"TestPingServer: error",!1,d)})}function kr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function bM(){this.g=new cM}function SM(c,d,f){let g=f||"";try{hw(c,function(T,A){let L=T;l(T)&&(L=Mp(T)),d.push(g+A+"="+encodeURIComponent(L))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Va(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Va,Pp),Va.prototype.g=function(){return new rl(this.l,this.j)},Va.prototype.i=(function(c){return function(){return c}})({});function rl(c,d){dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(rl,dt),n=rl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_w(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function _w(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ja(this):Ua(this),this.readyState==3&&_w(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ja(this))},n.Qa=function(c){this.g&&(this.response=c,ja(this))},n.ga=function(){this.g&&ja(this)};function ja(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ua(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ew(c){let d="";return Ie(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function $p(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ew(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Me(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Me,dt);var AM=/^https?$/i,RM=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Op.g(),this.v=this.o?QI(this.o):QI(Op),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Iw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(RM,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Iw(this,A)}};function Iw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,ww(c),il(c)}function ww(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),il(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Dw(this):this.bb())},n.bb=function(){Dw(this)};function Dw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||tr(c)!=4||c.Z()!=2)){if(c.u&&tr(c)==4)zI(c.Ea,0,c);else if(Dt(c,"readystatechange"),tr(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var T=String(c.D).match(fw)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!AM.test(T?T.toLowerCase():"")}f=g}if(f)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var A=2<tr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",ww(c)}}finally{il(c)}}}}function il(c,d){if(c.g){Tw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Dt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Tw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),aM(d)}};function Cw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function NM(c){let d={};c=(c.g&&2<=tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Q(c[g]))continue;var f=D(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}w(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function bw(c){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,c),this.cb=Ba("retryDelaySeedMs",1e4,c),this.Wa=Ba("forwardChannelMaxRetries",2,c),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new aw(c&&c.concurrentRequestLimit),this.Da=new bM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Tt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Ow(this,null,this.W),sl(this)};function Hp(c){if(Sw(c),c.G==3){var d=c.U++,f=er(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),$a(c,f),d=new Pr(c,c.j,d),d.L=2,d.v=nl(er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Fw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xu(d)}kw(c)}function ol(c){c.g&&(zp(c),c.g.cancel(),c.g=null)}function Sw(c){ol(c),c.u&&(a.clearTimeout(c.u),c.u=null),al(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function sl(c){if(!cw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ca||jI(),ba||(Ca(),ba=!0),wp.add(d,c),c.B=0}}function MM(c,d){return uw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pa(m(c.Ga,c,d),xw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Pr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Rw(this,T,d),f=er(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),$a(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Ew(A)))+"&"+d:this.m&&$p(f,this.m,A)),Bp(this.h,T),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),T.T=!0,Lp(T,f,null)):Lp(T,f,d),this.G=2}}else this.G==3&&(c?Aw(this,c):this.i.length==0||cw(this.h)||Aw(this))};function Aw(c,d){var f;d?f=d.l:f=c.U++;let g=er(c.I);Se(g,"SID",c.K),Se(g,"RID",f),Se(g,"AID",c.T),$a(c,g),c.m&&c.o&&$p(g,c.m,c.o),f=new Pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Rw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bp(c.h,f),Lp(f,g,d)}function $a(c,d){c.H&&Ie(c.H,function(f,g){Se(d,g,f)}),c.l&&hw({},function(f,g){Se(d,g,f)})}function Rw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=T[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Ce=!0;for(let ot=0;ot<f;ot++){let me=T[ot].g,ht=T[ot].map;if(me-=A,0>me)A=Math.max(0,T[ot].g-100),Ce=!1;else try{SM(ht,L,"req"+me+"_")}catch{g&&g(ht)}}if(Ce){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Nw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ca||jI(),ba||(Ca(),ba=!0),wp.add(d,c),c.v=0}}function qp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pa(m(c.Fa,c),xw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Mw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),ol(this),Mw(this))};function zp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Mw(c){c.g=new Pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=er(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),$a(c,d),c.m&&c.o&&$p(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=nl(er(d)),f.m=null,f.P=!0,iw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ol(this),qp(this),Tt(19))};function al(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Pw(c,d){var f=null;if(c.g==d){al(c),zp(c),c.g=null;var g=2}else if(Up(c.h,d))f=d.D,lw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=Yu(),Dt(g,new ew(g,f)),sl(c)}else Nw(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&MM(c,d)||g==2&&qp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Si(c,5);break;case 4:Si(c,10);break;case 3:Si(c,6);break;default:Si(c,2)}}}function xw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Si(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new bi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||el(g,"https"),nl(g),T?TM(g.toString(),f):CM(g.toString(),f)}else Tt(2);c.G=0,c.l&&c.l.sa(d),kw(c),Sw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function kw(c){if(c.G=0,c.ka=[],c.l){let d=dw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function Ow(c,d,f){var g=f instanceof bi?er(f):new bi(f);if(g.g!="")d&&(g.g=d+"."+g.g),tl(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new bi(null);g&&el(A,g),d&&(A.g=d),T&&tl(A,T),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Se(g,f,d),Se(g,"VER",c.la),$a(c,g),g}function Fw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Va({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lw(){}n=Lw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cl(){}cl.prototype.g=function(c,d){return new kt(c,d)};function kt(c,d){dt.call(this),this.g=new bw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Fo(this)}S(kt,dt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Hp(this.g)},kt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Mp(c),c=f);d.i.push(new pM(d.Ya++,c)),d.G==3&&sl(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,Hp(this.g),delete this.g,kt.aa.N.call(this)};function Vw(c){xp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Vw,xp);function jw(){kp.call(this),this.status=1}S(jw,kp);function Fo(c){this.g=c}S(Fo,Lw),Fo.prototype.ua=function(){Dt(this.g,"a")},Fo.prototype.ta=function(c){Dt(this.g,new Vw(c))},Fo.prototype.sa=function(c){Dt(this.g,new jw)},Fo.prototype.ra=function(){Dt(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,w_=Ir.createWebChannelTransport=function(){return new cl},I_=Ir.getStatEventTarget=function(){return Yu()},E_=Ir.Event=Ti,Ef=Ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zu.NO_ERROR=0,Zu.TIMEOUT=8,Zu.HTTP_ERROR=6,Su=Ir.ErrorCode=Zu,tw.COMPLETE="complete",__=Ir.EventType=tw,YI.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ws=Ir.WebChannel=YI,YU=Ir.FetchXmlHttpFactory=Va,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,v_=Ir.XhrIo=Me}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});var TA="@firebase/firestore",CA="4.8.0";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var ma="11.10.0";var So=new zn("@firebase/firestore");function Ks(){return So.logLevel}function U(n,...e){if(So.logLevel<=le.DEBUG){let t=e.map(uI);So.debug(`Firestore (${ma}): ${n}`,...t)}}function Tr(n,...e){if(So.logLevel<=le.ERROR){let t=e.map(uI);So.error(`Firestore (${ma}): ${n}`,...t)}}function vi(n,...e){if(So.logLevel<=le.WARN){let t=e.map(uI);So.warn(`Firestore (${ma}): ${n}`,...t)}}function uI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,gR(n,r,t)}function gR(n,e,t){let r=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tr(r),new Error(r)}function Ee(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||gR(e,i,r)}function X(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},S_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},A_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},R_=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Sf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},N_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},M_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new N_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Af=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},P_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Af(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Af(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ZU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function mR(){return new TextEncoder}var xu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ZU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ce(n,e){return n<e?-1:n>e?1:0}function x_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=mR(),s=JU(o.encode(bA(n,t)),o.encode(bA(e,t)));return s!==0?s:ce(r,i)}}t+=r>65535?2:1}return ce(n.length,e.length)}function bA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function JU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ce(n[t],e[t]);return ce(n.length,e.length)}function na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var SA="__name__",Rf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ce(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):x_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}},Ne=class n extends Rf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},XU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class n extends Rf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return XU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SA}static keyField(){return new n([SA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ne.fromString(e))}static fromName(e){return new n(Ne.fromString(e).popFirst(5))}static empty(){return new n(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ne(e.slice()))}};function yR(n,e,t){if(!t)throw new H(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eB(n,e,t,r){if(e===!0&&r===!0)throw new H(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AA(n){if(!z.isDocumentKey(n))throw new H(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RA(n){if(z.isDocumentKey(n))throw new H(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function lI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function fi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=lI(n);throw new H(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ke(n,e){let t={typeString:n};return e&&(t.value=e),t}function qu(n,e){if(!vR(n))throw new H(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(P.INVALID_ARGUMENT,t);return!0}var NA=-62135596800,MA=1e6,Qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*MA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NA)throw new H(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MA}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-NA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ku=-1,k_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};k_.UNKNOWN_ID=-1;function tB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Ao(i,z.empty(),e)}function nB(n){return new Ao(n.readTime,n.key,ku)}var Ao=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),z.empty(),ku)}static max(){return new n(ne.max(),z.empty(),ku)}};function rB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var iB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",O_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ya(n){return C(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==iB)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function oB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}var dI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),hI=-1;function sp(n){return n==null}function Ou(n){return n===0&&1/n==-1/0}function sB(n){return typeof n=="number"&&Number.isInteger(n)&&!Ou(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _R="";function aB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PA(e)),e=cB(n.get(t),e);return PA(e)}function cB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case _R:t+="";break;default:t+=o}}return t}function PA(n){return n+_R+""}var uB="remoteDocuments",ER="owner";var IR="mutationQueues";var wR="mutations";var DR="documentMutations",lB="remoteDocumentsV14";var TR="remoteDocumentGlobal";var CR="targets";var bR="targetDocuments";var SR="targetGlobal",AR="collectionParents";var RR="clientMetadata";var NR="bundles";var MR="namedQueries";var dB="indexConfiguration";var hB="indexState";var fB="indexEntries";var PR="documentOverlays";var pB="globals";var gB=[IR,wR,DR,uB,CR,ER,SR,bR,RR,TR,AR,NR,MR],Yne=[...gB,PR],mB=[IR,wR,DR,lB,CR,ER,SR,bR,RR,TR,AR,NR,MR,PR],yB=mB,vB=[...yB,dB,hB,fB];var Zne=[...vB,pB];function xA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Di(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Wn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}},Js=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nf(this.data.getIterator())}getIteratorFrom(e){return new Nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var an=class n{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new it(Gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mf("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var _B=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(n){if(Ee(!!n,39018),typeof n=="string"){let e=0,t=_B.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function br(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var kR="server_timestamp",OR="__type__",FR="__previous_value__",LR="__local_write_time__";function fI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OR])===null||t===void 0?void 0:t.stringValue)===kR}function ap(n){let e=n.mapValue.fields[FR];return fI(e)?ap(e):e}function Fu(n){let e=Cr(n.mapValue.fields[LR].timestampValue);return new Qe(e.seconds,e.nanos)}var F_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Pf="(default)",xf=class n{constructor(e,t){this.projectId=e,this.database=t||Pf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pI="__type__",VR="__max__",If={mapValue:{fields:{__type__:{stringValue:VR}}}},gI="__vector__",ra="value";function _i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fI(n)?4:UR(n)?9007199254740991:jR(n)?10:11:G(28295,{value:n})}function Yn(n,e){if(n===e)return!0;let t=_i(n);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fu(n).isEqual(Fu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Cr(i.timestampValue),a=Cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?Ou(s)===Ou(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return na(n.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(xA(s)!==xA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Yn(s[u],a[u])))return!1;return!0})(n,e);default:return G(52216,{left:n})}}function Lu(n,e){return(n.values||[]).find(t=>Yn(t,e))!==void 0}function ia(n,e){if(n===e)return 0;let t=_i(n),r=_i(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return kA(n.timestampValue,e.timestampValue);case 4:return kA(Fu(n),Fu(e));case 5:return x_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=br(o),u=br(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ce(a[l],u[l]);if(h!==0)return h}return ce(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ce(Re(o.latitude),Re(s.latitude));return a!==0?a:ce(Re(o.longitude),Re(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ra])===null||a===void 0?void 0:a.arrayValue,S=(u=m[ra])===null||u===void 0?void 0:u.arrayValue,M=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:OA(y,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===If.mapValue&&s===If.mapValue)return 0;if(o===If.mapValue)return 1;if(s===If.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=x_(u[p],h[p]);if(m!==0)return m;let y=ia(a[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)})(n.mapValue,e.mapValue);default:throw G(23264,{le:t})}}function kA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=Cr(n),r=Cr(e),i=ce(t.seconds,r.seconds);return i!==0?i:ce(t.nanos,r.nanos)}function OA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ia(t[i],r[i]);if(o)return o}return ce(t.length,r.length)}function oa(n){return L_(n)}function L_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Cr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return br(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=L_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${L_(t.fields[s])}`;return i+"}"})(n.mapValue):G(61005,{value:n})}function Tf(n){switch(_i(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ap(n);return e?16+Tf(e):16;case 5:return 2*n.stringValue.length;case 6:return br(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Tf(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Di(r.fields,(o,s)=>{i+=o.length+Tf(s)}),i})(n.mapValue);default:throw G(13486,{value:n})}}function V_(n){return!!n&&"integerValue"in n}function mI(n){return!!n&&"arrayValue"in n}function FA(n){return!!n&&"nullValue"in n}function LA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cf(n){return!!n&&"mapValue"in n}function jR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pI])===null||t===void 0?void 0:t.stringValue)===gI}function Ru(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Di(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ru(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ru(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VR}var Xne={mapValue:{fields:{[pI]:{stringValue:gI},[ra]:{arrayValue:{}}}}};var zt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}setAll(e){let t=Gt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ru(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Di(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ru(this.value))}};function BR(n){let e=[];return Di(n.fields,(t,r)=>{let i=new Gt([t]);if(Cf(r)){let o=BR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var Sn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),zt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),zt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sa=class{constructor(e,t){this.position=e,this.inclusive=t}};function VA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=ia(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yn(n.position[t],e.position[t]))return!1;return!0}var aa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function EB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kf=class{},et=class n extends kf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new U_(e,t,r):t==="array-contains"?new H_(e,r):t==="in"?new q_(e,r):t==="not-in"?new z_(e,r):t==="array-contains-any"?new G_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new B_(e,r):new $_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zn=class n extends kf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return $R(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function $R(n){return n.op==="and"}function HR(n){return IB(n)&&$R(n)}function IB(n){for(let e of n.filters)if(e instanceof Zn)return!1;return!0}function j_(n){if(n instanceof et)return n.field.canonicalString()+n.op.toString()+oa(n.value);if(HR(n))return n.filters.map(e=>j_(e)).join(",");{let e=n.filters.map(t=>j_(t)).join(",");return`${n.op}(${e})`}}function qR(n,e){return n instanceof et?(function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Yn(r.value,i.value)})(n,e):n instanceof Zn?(function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&qR(s,i.filters[a]),!0):!1})(n,e):void G(19439)}function zR(n){return n instanceof et?(function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`})(n):n instanceof Zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(zR).join(" ,")+"}"})(n):"Filter"}var U_=class extends et{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},B_=class extends et{constructor(e,t){super(e,"in",t),this.keys=GR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},$_=class extends et{constructor(e,t){super(e,"not-in",t),this.keys=GR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function GR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var H_=class extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mI(t)&&Lu(t.arrayValue,this.value)}},q_=class extends et{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}},z_=class extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}},G_=class extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!mI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lu(this.value.arrayValue,r))}};var W_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function UA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new W_(n,e,t,r,i,o,s)}function yI(n){let e=X(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>j_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),sp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oa(r)).join(",")),e.Pe=t}return e.Pe}function vI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jA(n.startAt,e.startAt)&&jA(n.endAt,e.endAt)}function K_(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ca=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function wB(n,e,t,r,i,o,s,a){return new ca(n,e,t,r,i,o,s,a)}function _I(n){return new ca(n)}function BA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DB(n){return n.collectionGroup!==null}function Nu(n){let e=X(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new it(Gt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new aa(o,r))}),t.has(Gt.keyField().canonicalString())||e.Te.push(new aa(Gt.keyField(),r))}return e.Te}function Kn(n){let e=X(n);return e.Ie||(e.Ie=TB(e,Nu(n))),e.Ie}function TB(n,e){if(n.limitType==="F")return UA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new aa(i.field,o)});let t=n.endAt?new sa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sa(n.startAt.position,n.startAt.inclusive):null;return UA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Q_(n,e,t){return new ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cp(n,e){return vI(Kn(n),Kn(e))&&n.limitType===e.limitType}function WR(n){return`${yI(Kn(n))}|lt:${n.limitType}`}function Qs(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zR(i)).join(", ")}]`),sp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>oa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>oa(i)).join(",")),`Target(${r})`})(Kn(n))}; limitType=${n.limitType})`}function up(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Nu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=VA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Nu(r),i)||r.endAt&&!(function(s,a,u){let l=VA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Nu(r),i))})(n,e)}function CB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KR(n){return(e,t)=>{let r=!1;for(let i of Nu(n)){let o=bB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bB(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ia(u,l):G(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var Sr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return xR(this.inner)}size(){return this.innerSize}};var SB=new Oe(z.comparator);function Ar(){return SB}var QR=new Oe(z.comparator);function Au(...n){let e=QR;for(let t of n)e=e.insert(t.key,t);return e}function YR(n){let e=QR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return Mu()}function ZR(){return Mu()}function Mu(){return new Sr(n=>n.toString(),(n,e)=>n.isEqual(e))}var AB=new Oe(z.comparator),RB=new it(z.comparator);function fe(...n){let e=RB;for(let t of n)e=e.add(t);return e}var NB=new it(ce);function MB(){return NB}function EI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function JR(n){return{integerValue:""+n}}function PB(n,e){return sB(e)?JR(e):EI(n,e)}var ua=class{constructor(){this._=void 0}};function xB(n,e,t){return n instanceof la?(function(i,o){let s={fields:{[OR]:{stringValue:kR},[LR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fI(o)&&(o=ap(o)),o&&(s.fields[FR]=o),{mapValue:s}})(t,e):n instanceof Ro?eN(n,e):n instanceof No?tN(n,e):(function(i,o){let s=XR(i,o),a=$A(s)+$A(i.Ee);return V_(s)&&V_(i.Ee)?JR(a):EI(i.serializer,a)})(n,e)}function kB(n,e,t){return n instanceof Ro?eN(n,e):n instanceof No?tN(n,e):t}function XR(n,e){return n instanceof da?(function(r){return V_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var la=class extends ua{},Ro=class extends ua{constructor(e){super(),this.elements=e}};function eN(n,e){let t=nN(e);for(let r of n.elements)t.some(i=>Yn(i,r))||t.push(r);return{arrayValue:{values:t}}}var No=class extends ua{constructor(e){super(),this.elements=e}};function tN(n,e){let t=nN(e);for(let r of n.elements)t=t.filter(i=>!Yn(i,r));return{arrayValue:{values:t}}}var da=class extends ua{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function $A(n){return Re(n.integerValue||n.doubleValue)}function nN(n){return mI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OB(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ro&&i instanceof Ro||r instanceof No&&i instanceof No?na(r.elements,i.elements,Yn):r instanceof da&&i instanceof da?Yn(r.Ee,i.Ee):r instanceof la&&i instanceof la})(n.transform,e.transform)}var Y_=class{constructor(e,t){this.version=e,this.transformResults=t}},Dr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ha=class{};function rN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vu(n.key,Dr.none()):new Mo(n.key,n.data,Dr.none());{let t=n.data,r=zt.empty(),i=new it(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jn(n.key,r,new an(i.toArray()),Dr.none())}}function FB(n,e,t){n instanceof Mo?(function(i,o,s){let a=i.value.clone(),u=qA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Jn?(function(i,o,s){if(!bf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(iN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Pu(n,e,t,r){return n instanceof Mo?(function(o,s,a,u){if(!bf(o.precondition,s))return a;let l=o.value.clone(),h=zA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Jn?(function(o,s,a,u){if(!bf(o.precondition,s))return a;let l=zA(o.fieldTransforms,u,s),h=s.data;return h.setAll(iN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return bf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function LB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=XR(r.transform,i||null);o!=null&&(t===null&&(t=zt.empty()),t.set(r.field,o))}return t||null}function HA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(o,s)=>OB(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mo=class extends ha{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jn=class extends ha{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qA(n,e,t){let r=new Map;Ee(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,kB(s,a,t[i]))}return r}function zA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,xB(o,s,e))}return r}var Vu=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Z_=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var J_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&FB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ZR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=rN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,r)=>HA(t,r))&&na(this.baseMutations,e.baseMutations,(t,r)=>HA(t,r))}},X_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return AB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var eE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var tE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ge,ge;function VB(n){switch(n){case P.OK:return G(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return G(15467,{code:n})}}function oN(n){if(n===void 0)return Tr("GRPC error has no .code"),P.UNKNOWN;switch(n){case Ge.OK:return P.OK;case Ge.CANCELLED:return P.CANCELLED;case Ge.UNKNOWN:return P.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return P.INTERNAL;case Ge.UNAVAILABLE:return P.UNAVAILABLE;case Ge.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ge.NOT_FOUND:return P.NOT_FOUND;case Ge.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ge.ABORTED:return P.ABORTED;case Ge.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ge.DATA_LOSS:return P.DATA_LOSS;default:return G(39323,{code:n})}}(ge=Ge||(Ge={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var GA=null;var jB=new Er([4294967295,4294967295],0);function WA(n){let e=mR().encode(n),t=new y_;return t.update(e),new Uint8Array(t.digest())}function KA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Er([t,r],0),new Er([i,o],0)]}var nE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new To(`Invalid padding: ${t}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new To(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Er.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Er.fromNumber(r)));return i.compare(jB)===1&&(i=new Er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=WA(e),[r,i]=KA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=WA(e),[r,i]=KA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},To=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Of=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Oe(ce),Ar(),fe())}},ju=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var Xs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Ff=class{constructor(e,t){this.targetId=e,this.De=t}},Lf=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Vf=class{constructor(){this.ve=0,this.Ce=QA(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),t=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new ju(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=QA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},rE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ar(),this.je=wf(),this.Je=wf(),this.He=new Oe(ce)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(K_(o))if(r===0){let s=new z(o.path);this.Xe(t,s,Sn.newNoDocument(s,ne.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}GA?.ct((function(h,p,m,y,S){var M,R,V,Q,Y,Te;let wt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ie=p.unchangedNames;return Ie&&(wt.bloomFilter={applied:S===0,hashCount:(M=Ie?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(Q=(V=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||V===void 0?void 0:V.length)!==null&&Q!==void 0?Q:0,padding:(Te=(Y=Ie?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Te!==void 0?Te:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),wt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof Mf)return vi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new nE(s,i,o)}catch(u){return vi(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&K_(a.target)){let u=new z(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Sn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Of(e,t,this.He,this.ze,r);return this.ze=Ar(),this.je=wf(),this.Je=wf(),this.He=new Oe(ce),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Vf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new it(ce),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new it(ce),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Vf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function wf(){return new Oe(z.comparator)}function QA(){return new Oe(z.comparator)}var UB={asc:"ASCENDING",desc:"DESCENDING"},BB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$B={and:"AND",or:"OR"},iE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function oE(n,e){return n.useProto3Json||sp(e)?e:{value:e}}function jf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HB(n,e){return jf(n,e.toTimestamp())}function Qn(n){return Ee(!!n,49232),ne.fromTimestamp((function(t){let r=Cr(t);return new Qe(r.seconds,r.nanos)})(n))}function II(n,e){return sE(n,e).canonicalString()}function sE(n,e){let t=(function(i){return new Ne(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aN(n){let e=Ne.fromString(n);return Ee(hN(e),10190,{key:e.toString()}),e}function aE(n,e){return II(n.databaseId,e.path)}function D_(n,e){let t=aN(e);if(t.get(1)!==n.databaseId.projectId)throw new H(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(uN(t))}function cN(n,e){return II(n.databaseId,e)}function qB(n){let e=aN(n);return e.length===4?Ne.emptyPath():uN(e)}function cE(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uN(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function YA(n,e,t){return{name:aE(n,e),fields:t.value.mapValue.fields}}function zB(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),It.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),It.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:oN(l.code);return new H(h,l.message||"")})(s);t=new Lf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=D_(n,r.document.name),o=Qn(r.document.updateTime),s=r.document.createTime?Qn(r.document.createTime):ne.min(),a=new zt({mapValue:{fields:r.document.fields}}),u=Sn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Xs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=D_(n,r.document),o=r.readTime?Qn(r.readTime):ne.min(),s=Sn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Xs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=D_(n,r.document),o=r.removedTargetIds||[];t=new Xs([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new tE(i,o),a=r.targetId;t=new Ff(a,s)}}return t}function GB(n,e){let t;if(e instanceof Mo)t={update:YA(n,e.key,e.value)};else if(e instanceof Vu)t={delete:aE(n,e.key)};else if(e instanceof Jn)t={update:YA(n,e.key,e.data),updateMask:t$(e.fieldMask)};else{if(!(e instanceof Z_))return G(16599,{Rt:e.type});t={verify:aE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof la)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ro)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof No)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof da)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:HB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)})(n,e.precondition)),t}function WB(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Qn(i.updateTime):Qn(o);return s.isEqual(ne.min())&&(s=Qn(o)),new Y_(s,i.transformResults||[])})(t,e))):[]}function KB(n,e){return{documents:[cN(n,e.path)]}}function QB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cN(n,i);let o=(function(l){if(l.length!==0)return dN(Zn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Ys(m.field),direction:JB(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=oE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function YB(n){let e=qB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=lN(p);return m instanceof Zn&&HR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new aa(Zs(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,sp(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new sa(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new sa(y,m)})(t.endAt)),wB(e,i,s,o,a,"F",u,l)}function ZB(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zs(t.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zs(t.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zs(t.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zs(t.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(n):n.fieldFilter!==void 0?(function(t){return et.create(Zs(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zn.create(t.compositeFilter.filters.map(r=>lN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(t.compositeFilter.op))})(n):G(30097,{filter:n})}function JB(n){return UB[n]}function XB(n){return BB[n]}function e$(n){return $B[n]}function Ys(n){return{fieldPath:n.canonicalString()}}function Zs(n){return Gt.fromServerFormat(n.fieldPath)}function dN(n){return n instanceof et?(function(t){if(t.op==="=="){if(LA(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NAN"}};if(FA(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LA(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NAN"}};if(FA(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(t.field),op:XB(t.op),value:t.value}}})(n):n instanceof Zn?(function(t){let r=t.getFilters().map(i=>dN(i));return r.length===1?r[0]:{compositeFilter:{op:e$(t.op),filters:r}}})(n):G(54877,{filter:n})}function t$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Uu=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uE=class{constructor(e){this.gt=e}};function n$(n){let e=YB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Q_(e,e.limit,"L"):e}var Uf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Ou(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Cr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(br(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?UR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):jR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):G(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ra,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Re(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),z.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Uf.Ut=new Uf;var lE=class{constructor(){this.Dn=new dE}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ao.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},dE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new it(Ne.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Ne.comparator)).toArray()}};var ere=new Uint8Array(0);var ZA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fN=41943040,sn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(fN,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var Bu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var JA="LruGarbageCollector",r$=1048576;function XA([n,e],[t,r]){let i=ce(n,t);return i===0?ce(e,r):i}var hE=class{constructor(e){this.Tr=e,this.buffer=new it(XA),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();XA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},fE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){U(JA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?U(JA,"Ignoring IndexedDB error during garbage collection: ",t):yield ya(t)}yield this.Rr(3e5)}))}},pE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(dI.ue);let r=new hE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(ZA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ks()<=le.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function i$(n,e){return new pE(n,e)}var gE=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var yE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Pu(r.mutation,i,an.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Au();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ar(),s=Mu(),a=(function(){return Mu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Jn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Pu(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new mE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Mu(),i=new Oe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||an.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ZR();h.forEach(m=>{if(!o.has(m)){let y=rN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Do()),a=ku,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:YR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Au();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,m){return new ca(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Sn.newInvalidDocument(h)))});let a=Au();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Pu(h.mutation,l,an.empty(),Qe.now()),up(t,l)&&(a=a.insert(u,l))}),a})}};var vE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:n$(i.bundledQuery),readTime:Qn(i.readTime)}})(t)),x.resolve()}};var _E=class{constructor(){this.overlays=new Oe(z.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Do();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Do(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Do(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Do(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new eE(t,r));let o=this.kr.get(t);o===void 0&&(o=fe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var EE=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var $u=class{constructor(){this.qr=new it(We.Qr),this.$r=new it(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new We(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new We(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new z(new Ne([])),r=new We(t,e),i=new We(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new z(new Ne([])),r=new We(t,e),i=new We(t,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new We(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return z.comparator(e.key,t.key)||ce(e.Hr,t.Hr)}static Ur(e,t){return ce(e.Hr,t.Hr)||z.comparator(e.key,t.key)}};var IE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new it(We.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new J_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?hI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new We(t,0),i=new We(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(ce);return t.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new We(new z(o),0),a=new it(ce);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new We(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new We(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var wE=class{constructor(e){this.ni=e,this.docs=(function(){return new Oe(z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Ar();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ar(),s=t.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||rB(nB(h),r)<=0||(i.has(h.key)||up(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DE(this)}getSize(e){return x.resolve(this.size)}},DE=class extends gE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var TE=class{constructor(e){this.persistence=e,this.ii=new Sr(t=>yI(t),vI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new $u,this.targetCount=0,this._i=Bu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Bu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Bf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new dI(0),this.ci=!1,this.ci=!0,this.li=new EE,this.referenceDelegate=e(this),this.hi=new TE(this),this.indexManager=new lE,this.remoteDocumentCache=(function(i){return new wE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new uE(t),this.Ti=new vE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _E,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new IE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new CE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},CE=class extends O_{constructor(e){super(),this.currentSequenceNumber=e}},bE=class n{constructor(e){this.persistence=e,this.Ai=new $u,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=z.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},$f=class n{constructor(e,t){this.persistence=e,this.gi=new Sr(r=>aB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=i$(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var SE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var AE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var RE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return R0()?8:oB(qt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new AE;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ks()<=le.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Qs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Ks()<=le.DEBUG&&U("QueryEngine","Query:",Qs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ks()<=le.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Qs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(t))):x.resolve())}ps(e,t){if(BA(t))return x.resolve(null);let r=Kn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Q_(t,null,"F"),r=Kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,Q_(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return BA(t)||i.isEqual(ne.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Ks()<=le.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(t)),this.vs(e,s,t,tB(i,ku)).next(a=>a))})}bs(e,t){let r=new it(KR(e));return t.forEach((i,o)=>{up(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ks()<=le.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Qs(t)),this.gs.getDocumentsMatchingQuery(e,t,Ao.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var wI="LocalStore",o$=3e8,NE=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(ce),this.Ms=new Sr(o=>yI(o),vI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function s$(n,e,t,r){return new NE(n,e,t,r)}function pN(n,e){return C(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function a$(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);Ee(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gN(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function c$(n,e){let t=X(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(M,R,V){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=o$?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Ar(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(u$(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function u$(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ar();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):U(wI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function l$(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d$(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Uu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function ME(n,e,t){return C(this,null,function*(){let r=X(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!va(s))throw s;U(wI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function eR(n,e,t){let r=X(n),i=ne.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=X(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:fe())).next(a=>(h$(r,CB(e),a),{documents:a,qs:o})))}function h$(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Hf=class{constructor(){this.activeTargetIds=MB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var PE=class{constructor(){this.Fo=new Hf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var xE=class{xo(e){}shutdown(){}};var tR="ConnectivityMonitor",qf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){U(tR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){U(tR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Df=null;function kE(){return Df===null?Df=(function(){return 268435456+Math.round(2147483648*Math.random())})():Df++,"0x"+Df.toString(16)}var T_="RestConnection",f$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},OE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=kE(),a=this.Go(e,t.toUriEncodedString());U(T_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=fo(l);return this.jo(e,a,u,r,h).then(p=>(U(T_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw vi(T_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ma})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=f$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var FE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var _t="WebChannelConnection",LE=class extends OE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=kE();return new Promise((a,u)=>{let l=new v_;l.setWithCredentials(!0),l.listenOnce(__.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Su.NO_ERROR:let p=l.getResponseJson();U(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Su.TIMEOUT:U(_t,`RPC '${e}' ${s} timed out`),u(new H(P.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:let m=l.getStatus();if(U(_t,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let M=(function(V){let Q=V.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(Q)>=0?Q:P.UNKNOWN})(S.status);u(new H(M,S.message))}else u(new H(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new H(P.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{U(_t,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);U(_t,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=kE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w_(),a=I_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(_t,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new FE({Ho:R=>{y?U(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(U(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),U(_t,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),M=(R,V,Q)=>{R.listen(V,Y=>{try{Q(Y)}catch(Te){setTimeout(()=>{throw Te},0)}})};return M(p,Ws.EventType.OPEN,()=>{y||(U(_t,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),M(p,Ws.EventType.CLOSE,()=>{y||(y=!0,U(_t,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),M(p,Ws.EventType.ERROR,R=>{y||(y=!0,vi(_t,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.__(new H(P.UNAVAILABLE,"The operation could not be completed")))}),M(p,Ws.EventType.MESSAGE,R=>{var V;if(!y){let Q=R.data[0];Ee(!!Q,16349);let Y=Q,Te=Y?.error||((V=Y[0])===null||V===void 0?void 0:V.error);if(Te){U(_t,`RPC '${e}' stream ${i} received error:`,Te);let wt=Te.status,Ie=(function(E){let I=Ge[E];if(I!==void 0)return oN(I)})(wt),w=Te.message;Ie===void 0&&(Ie=P.INTERNAL,w="Unknown error status: "+wt+" with message "+Te.message),y=!0,S.__(new H(Ie,w)),p.close()}else U(_t,`RPC '${e}' stream ${i} received:`,Q),S.a_(Q)}}),M(a,E_.STAT_EVENT,R=>{R.stat===Ef.PROXY?U(_t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ef.NOPROXY&&U(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function C_(){return typeof document<"u"?document:null}function lp(n){return new iE(n,!0)}var zf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var nR="PersistentStream",Gf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return U(nR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(U(nR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VE=class extends Gf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=zB(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Qn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=cE(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=K_(u)?{documents:KB(o,u)}:{query:QB(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sN(o,s.resumeToken);let l=oE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=jf(o,s.snapshotVersion.toTimestamp());let l=oE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=ZB(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=cE(this.serializer),t.removeTarget=e,this.k_(t)}},jE=class extends Gf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=WB(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=cE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>GB(this.serializer,r))};this.k_(t)}};var UE=class{},BE=class extends UE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,sE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,sE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},$E=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Tr(t),this._a=!1):U("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Po="RemoteStore",HE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>C(this,null,function*(){xo(this)&&(U(Po,"Restarting streams for network reachability change."),yield(function(u){return C(this,null,function*(){let l=X(u);l.Ia.add(4),yield zu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield dp(l)})})(this))}))}),this.Aa=new $E(r,i)}};function dp(n){return C(this,null,function*(){if(xo(n))for(let e of n.da)yield e(!0)})}function zu(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function mN(n,e){let t=X(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),bI(t)?CI(t):_a(t).x_()&&TI(t,e))}function DI(n,e){let t=X(n),r=_a(t);t.Ta.delete(e),r.x_()&&yN(t,e),t.Ta.size===0&&(r.x_()?r.B_():xo(t)&&t.Aa.set("Unknown"))}function TI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).H_(e)}function yN(n,e){n.Ra.$e(e),_a(n).Y_(e)}function CI(n){n.Ra=new rE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Aa.aa()}function bI(n){return xo(n)&&!_a(n).M_()&&n.Ta.size>0}function xo(n){return X(n).Ia.size===0}function vN(n){n.Ra=void 0}function p$(n){return C(this,null,function*(){n.Aa.set("Online")})}function g$(n){return C(this,null,function*(){n.Ta.forEach((e,t)=>{TI(n,e)})})}function m$(n,e){return C(this,null,function*(){vN(n),bI(n)?(n.Aa.la(e),CI(n)):n.Aa.set("Unknown")})}function y$(n,e,t){return C(this,null,function*(){if(n.Aa.set("Online"),e instanceof Lf&&e.state===2&&e.cause)try{yield(function(i,o){return C(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){U(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wf(n,r)}else if(e instanceof Xs?n.Ra.Ye(e):e instanceof Ff?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=yield gN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),yN(o,u);let p=new Uu(h.target,u,l,h.sequenceNumber);TI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){U(Po,"Failed to raise snapshot:",r),yield Wf(n,r)}})}function Wf(n,e,t){return C(this,null,function*(){if(!va(e))throw e;n.Ia.add(1),yield zu(n),n.Aa.set("Offline"),t||(t=()=>gN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){U(Po,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield dp(n)}))})}function _N(n,e){return e().catch(t=>Wf(n,t,e))}function hp(n){return C(this,null,function*(){let e=X(n),t=Ei(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hI;for(;v$(e);)try{let i=yield l$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,_$(e,i)}catch(i){yield Wf(e,i)}EN(e)&&IN(e)})}function v$(n){return xo(n)&&n.Pa.length<10}function _$(n,e){n.Pa.push(e);let t=Ei(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function EN(n){return xo(n)&&!Ei(n).M_()&&n.Pa.length>0}function IN(n){Ei(n).start()}function E$(n){return C(this,null,function*(){Ei(n).na()})}function I$(n){return C(this,null,function*(){let e=Ei(n);for(let t of n.Pa)e.X_(t.mutations)})}function w$(n,e,t){return C(this,null,function*(){let r=n.Pa.shift(),i=X_.from(r,e,t);yield _N(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield hp(n)})}function D$(n,e){return C(this,null,function*(){e&&Ei(n).Z_&&(yield(function(r,i){return C(this,null,function*(){if((function(s){return VB(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();Ei(r).N_(),yield _N(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield hp(r)}})})(n,e)),EN(n)&&IN(n)})}function rR(n,e){return C(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),U(Po,"RemoteStore received new credentials");let r=xo(t);t.Ia.add(3),yield zu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield dp(t)})}function T$(n,e){return C(this,null,function*(){let t=X(n);e?(t.Ia.delete(2),yield dp(t)):e||(t.Ia.add(2),yield zu(t),t.Aa.set("Unknown"))})}function _a(n){return n.Va||(n.Va=(function(t,r,i){let o=X(t);return o.ia(),new VE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:p$.bind(null,n),e_:g$.bind(null,n),n_:m$.bind(null,n),J_:y$.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.Va.N_(),bI(n)?CI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),vN(n))}))),n.Va}function Ei(n){return n.ma||(n.ma=(function(t,r,i){let o=X(t);return o.ia(),new jE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:E$.bind(null,n),n_:D$.bind(null,n),ea:I$.bind(null,n),ta:w$.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield hp(n)):(yield n.ma.stop(),n.Pa.length>0&&(U(Po,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var qE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function SI(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),va(n))return new H(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Kf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Au(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qf=class{constructor(){this.fa=new Oe(z.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Kf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var zE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},GE=class{constructor(){this.queries=iR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=X(t),o=i.queries;i.queries=iR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new H(P.ABORTED,"Firestore shutting down"))}};function iR(){return new Sr(n=>WR(n),cp)}function C$(n,e){return C(this,null,function*(){let t=X(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new zE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=SI(s,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&AI(t)})}function b$(n,e){return C(this,null,function*(){let t=X(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function S$(n,e){let t=X(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&AI(t)}function A$(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function AI(n){n.Da.forEach(e=>{e.next()})}var WE,oR;(oR=WE||(WE={})).Fa="default",oR.Cache="cache";var KE=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==WE.Cache}};var Yf=class{constructor(e){this.key=e}},Zf=class{constructor(e){this.key=e}},QE=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=KR(e),this.eu=new Kf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Qf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=up(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==M&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:R})}};return M(y)-M(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new fa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Qf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Zf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Yf(r))}),t}uu(e){this.Ha=e.qs,this.Za=fe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},RI="SyncEngine",YE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ZE=class{constructor(e){this.key=e,this.lu=!1}},JE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Sr(a=>WR(a),cp),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(z.comparator),this.Eu=new Map,this.Au=new $u,this.Ru={},this.Vu=new Map,this.mu=Bu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function R$(n,e,t=!0){return C(this,null,function*(){let r=SN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield wN(r,e,t,!0),i})}function N$(n,e){return C(this,null,function*(){let t=SN(n);yield wN(t,e,!0,!1)})}function wN(n,e,t,r){return C(this,null,function*(){let i=yield d$(n.localStore,Kn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield M$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mN(n.remoteStore,i),a})}function M$(n,e,t,r,i){return C(this,null,function*(){n.gu=(p,m,y)=>(function(M,R,V,Q){return C(this,null,function*(){let Y=R.view.nu(V);Y.Ds&&(Y=yield eR(M.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,Y)));let Te=Q&&Q.targetChanges.get(R.targetId),wt=Q&&Q.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(Y,M.isPrimaryClient,Te,wt);return aR(M,R.targetId,Ie._u),Ie.snapshot})})(n,p,m,y);let o=yield eR(n.localStore,e,!0),s=new QE(e,o.qs),a=s.nu(o.documents),u=ju.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);aR(n,t,l._u);let h=new YE(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function P$(n,e,t){return C(this,null,function*(){let r=X(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!cp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ME(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&DI(r.remoteStore,i.targetId),XE(r,i.targetId)}).catch(ya))):(XE(r,i.targetId),yield ME(r.localStore,i.targetId,!0))})}function x$(n,e){return C(this,null,function*(){let t=X(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),DI(t.remoteStore,r.targetId))})}function k$(n,e,t){return C(this,null,function*(){let r=B$(n);try{let i=yield(function(s,a){let u=X(s),l=Qe.now(),h=a.reduce((y,S)=>y.add(S.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Ar(),M=fe();return u.Os.getEntries(y,h).next(R=>{S=R,S.forEach((V,Q)=>{Q.isValidDocument()||(M=M.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let V=[];for(let Q of a){let Y=LB(Q,p.get(Q.key).overlayedDocument);Y!=null&&V.push(new Jn(Q.key,Y,BR(Y.value.mapValue),Dr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(R=>{m=R;let V=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,R.batchId,V)})}).then(()=>({batchId:m.batchId,changes:YR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(ce)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Gu(r,i.changes),yield hp(r.remoteStore)}catch(i){let o=SI(i,"Failed to persist write");t.reject(o)}})}function DN(n,e){return C(this,null,function*(){let t=X(n);try{let r=yield c$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),yield Gu(t,r,e)}catch(r){yield ya(r)}})}function sR(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&AI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O$(n,e,t){return C(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(z.comparator);s=s.insert(o,Sn.newNoDocument(o,ne.min()));let a=fe().add(o),u=new Of(ne.min(),new Map,new Oe(ce),s,a);yield DN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),NI(r)}else yield ME(r.localStore,e,!1).then(()=>XE(r,e,t)).catch(ya)})}function F$(n,e){return C(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield a$(t.localStore,e);CN(t,r,null),TN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gu(t,i)}catch(i){yield ya(i)}})}function L$(n,e,t){return C(this,null,function*(){let r=X(n);try{let i=yield(function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);CN(r,e,t),TN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gu(r,i)}catch(i){yield ya(i)}})}function TN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function CN(n,e,t){let r=X(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function XE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||bN(n,r)})}function bN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(DI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),NI(n))}function aR(n,e,t){for(let r of t)r instanceof Yf?(n.Au.addReference(r.key,e),V$(n,r)):r instanceof Zf?(U(RI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||bN(n,r.key)):G(19791,{yu:r})}function V$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(U(RI,"New document in limbo: "+t),n.Iu.add(r),NI(n))}function NI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new z(Ne.fromString(e)),r=n.mu.next();n.Eu.set(r,new ZE(t)),n.du=n.du.insert(t,r),mN(n.remoteStore,new Uu(Kn(_I(t.path)),r,"TargetPurposeLimboResolution",dI.ue))}}function Gu(n,e,t){return C(this,null,function*(){let r=X(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=SE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return C(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!va(p))throw p;U(wI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,M)}}})})(r.localStore,o))})}function j$(n,e){return C(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){U(RI,"User change. New user:",e.toKey());let r=yield pN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new H(P.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gu(t,r.Bs)}})}function U$(n,e){let t=X(n),r=t.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function SN(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O$.bind(null,e),e.hu.J_=S$.bind(null,e.eventManager),e.hu.pu=A$.bind(null,e.eventManager),e}function B$(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L$.bind(null,e),e}var AN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=lp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return s$(this.persistence,new RE,t.initialUser,this.serializer)}Du(t){return new Bf(bE.Vi,this.serializer)}bu(t){return new PE}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),eI=class extends AN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ee(this.persistence.referenceDelegate instanceof $f,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new fE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Bf(r=>$f.Vi(r,t),this.serializer)}};var $$=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j$.bind(null,this.syncEngine),yield T$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new GE})()}createDatastore(t){let r=lp(t.databaseInfo.databaseId),i=(function(s){return new LE(s)})(t.databaseInfo);return(function(s,a,u,l){return new BE(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new HE(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>sR(this.syncEngine,r,0),(function(){return qf.C()?new qf:new xE})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new JE(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield(function(o){return C(this,null,function*(){let s=X(o);U(Po,"RemoteStore shutting down."),s.Ia.add(5),yield zu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var tI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ii="FirestoreClient",nI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>C(this,null,function*(){U(Ii,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U(Ii,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=SI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function b_(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U(Ii,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield pN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{vi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{U("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{vi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function cR(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield H$(n);U(Ii,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rR(e.remoteStore,i)),n._onlineComponents=e})}function H$(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U(Ii,"Using user provided OfflineComponentProvider");try{yield b_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;vi("Error using user provided cache. Falling back to memory cache: "+t),yield b_(n,new AN)}}else U(Ii,"Using default OfflineComponentProvider"),yield b_(n,new eI(void 0));return n._offlineComponents})}function RN(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U(Ii,"Using user provided OnlineComponentProvider"),yield cR(n,n._uninitializedComponentsProvider._online)):(U(Ii,"Using default OnlineComponentProvider"),yield cR(n,new $$))),n._onlineComponents})}function q$(n){return RN(n).then(e=>e.syncEngine)}function uR(n){return C(this,null,function*(){let e=yield RN(n),t=e.eventManager;return t.onListen=R$.bind(null,e.syncEngine),t.onUnlisten=P$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=x$.bind(null,e.syncEngine),t})}function NN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lR=new Map;var MN="firestore.googleapis.com",dR=!0,Jf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MN,this.ssl=dR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r$)throw new H(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new S_;switch(r.type){case"firstParty":return new M_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=lR.get(t);r&&(U("ComponentProvider","Removing Datastore"),lR.delete(t),r.terminate())})(this),Promise.resolve()}};function PN(n,e,t,r={}){var i;n=fi(n,pa);let o=fo(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Pv(`https://${u}`),xv("Firestore",!0)),s.host!==MN&&s.host!==u&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!po(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=rt.MOCK_USER;else{h=T0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new H(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rt(m)}n._authCredentials=new A_(new Sf(h,p))}}var Xf=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qu(t,n._jsonSchema))return new n(e,r||null,new z(Ne.fromString(t.referencePath)))}};Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Ke("string",Et._jsonSchemaVersion),referencePath:Ke("string")};var pi=class n extends Xf{constructor(e,t,r){super(e,t,_I(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xN(n,e,...t){if(n=vt(n),yR("collection","path",e),n instanceof pa){let r=Ne.fromString(e,...t);return RA(r),new pi(n,null,r)}{if(!(n instanceof Et||n instanceof pi))throw new H(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ne.fromString(e,...t));return RA(r),new pi(n.firestore,null,r)}}function MI(n,e,...t){if(n=vt(n),arguments.length===1&&(e=xu.newId()),yR("doc","path",e),n instanceof pa){let r=Ne.fromString(e,...t);return AA(r),new Et(n,null,new z(r))}{if(!(n instanceof Et||n instanceof pi))throw new H(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ne.fromString(e,...t));return AA(r),new Et(n.firestore,n instanceof pi?n.converter:null,new z(r))}}var hR="AsyncQueue",ep=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zf(this,"async_queue_retry"),this.oc=()=>{let r=C_();r&&U(hR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=C_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=C_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new wr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!va(e))throw e;U(hR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Tr("INTERNAL UNHANDLED ERROR: ",fR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=qE.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:fR(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function fR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function pR(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var wi=class extends pa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ep,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ep(e),this._firestoreClient=void 0,yield e}})}};function kN(n,e){let t=typeof n=="object"?n:qs(),r=typeof n=="string"?n:e||Pf,i=Jh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=w0("firestore");o&&PN(i,...o)}return i}function ON(n){if(n._terminated)throw new H(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||z$(n),n._firestoreClient}function z$(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new F_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new nI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var gi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new H(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:Ke("string",gi._jsonSchemaVersion),bytes:Ke("string")};var ga=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hu=class{constructor(e){this._methodName=e}};var mi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(qu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Ke("string",mi._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var yi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ke("string",yi._jsonSchemaVersion),vectorValues:Ke("object")};var G$=/^__.*__$/,rI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mo(e,this.data,t,this.fieldTransforms)}},tp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function FN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:n})}}var iI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return rp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FN(this.Ec)&&G$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},oI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lp(e)}Dc(e,t,r,i=!1){return new iI({Ec:e,methodName:t,bc:r,path:Gt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function LN(n){let e=n._freezeSettings(),t=lp(n._databaseId);return new oI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function W$(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);PI("Data must be an object, but it was:",s,r);let a=VN(r,s),u,l;if(o.merge)u=new an(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=sI(e,p,t);if(!s.contains(m))throw new H(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);UN(h,m)||h.push(m)}u=new an(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new rI(new zt(a),u,l)}var np=class n extends Hu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function K$(n,e,t,r){let i=n.Dc(1,e,t);PI("Data must be an object, but it was:",i,r);let o=[],s=zt.empty();Di(r,(u,l)=>{let h=xI(e,u,t);l=vt(l);let p=i.gc(h);if(l instanceof np)o.push(h);else{let m=fp(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new an(o);return new tp(s,a,i.fieldTransforms)}function Q$(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[sI(e,r,t)],u=[i];if(o.length%2!=0)throw new H(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(sI(e,o[m])),u.push(o[m+1]);let l=[],h=zt.empty();for(let m=a.length-1;m>=0;--m)if(!UN(l,a[m])){let y=a[m],S=u[m];S=vt(S);let M=s.gc(y);if(S instanceof np)l.push(y);else{let R=fp(S,M);R!=null&&(l.push(y),h.set(y,R))}}let p=new an(l);return new tp(h,p,s.fieldTransforms)}function fp(n,e){if(jN(n=vt(n)))return PI("Unsupported field value:",e,n),VN(n,e);if(n instanceof Hu)return(function(r,i){if(!FN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=fp(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:jf(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,o)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gi)return{bytesValue:sN(i.serializer,r._byteString)};if(r instanceof Et){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:II(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yi)return(function(s,a){return{mapValue:{fields:{[pI]:{stringValue:gI},[ra]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return EI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${lI(r)}`)})(n,e)}function VN(n,e){let t={};return xR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(n,(r,i)=>{let o=fp(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function jN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof mi||n instanceof gi||n instanceof Et||n instanceof Hu||n instanceof yi)}function PI(n,e,t){if(!jN(t)||!vR(t)){let r=lI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function sI(n,e,t){if((e=vt(e))instanceof ga)return e._internalPath;if(typeof e=="string")return xI(n,e);throw rp("Field path arguments must be of type string or ",n,!1,void 0,t)}var Y$=new RegExp("[~\\*/\\[\\]]");function xI(n,e,t){if(e.search(Y$)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ga(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(P.INVALID_ARGUMENT,a+n+u)}function UN(n,e){return n.some(t=>t.isEqual(e))}var ip=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(BN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},aI=class extends ip{data(){return super.data()}};function BN(n,e){return typeof e=="string"?xI(n,e):e instanceof ga?e._internalPath:e._delegate._internalPath}function Z$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cI=class{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Di(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ra].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new yi(o)}convertGeoPoint(e){return new mi(Re(e.latitude),Re(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ap(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){let t=Cr(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ne.fromString(e);Ee(hN(r),9688,{name:e});let i=new xf(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||Tr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function J$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Co=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bo=class n extends ip{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(BN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",bo._jsonSchema={type:Ke("string",bo._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var ea=class extends bo{data(e={}){return super.data(e)}},ta=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Co(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ea(this._firestore,this._userDataWriter,r.key,r,new Co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ea(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ea(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:X$(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function X$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:Ke("string",ta._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var op=class extends cI{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}};function $N(n,e,t,...r){n=fi(n,Et);let i=fi(n.firestore,wi),o=LN(i),s;return s=typeof(e=vt(e))=="string"||e instanceof ga?Q$(o,"updateDoc",n._key,e,t,r):K$(o,"updateDoc",n._key,e),OI(i,[s.toMutation(n._key,Dr.exists(!0))])}function HN(n){return OI(fi(n.firestore,wi),[new Vu(n._key,Dr.none())])}function qN(n,e){let t=fi(n.firestore,wi),r=MI(n),i=J$(n.converter,e);return OI(t,[W$(LN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}function kI(n,...e){var t,r,i;n=vt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pR(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Et)l=fi(n.firestore,wi),h=_I(n._key.path),u={next:p=>{e[s]&&e[s](eH(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=fi(n,Xf);l=fi(p.firestore,wi),h=p._query;let m=new op(l);u={next:y=>{e[s]&&e[s](new ta(l,m,p,y))},error:e[s+1],complete:e[s+2]},Z$(n._query)}return(function(m,y,S,M){let R=new tI(M),V=new KE(y,R,S);return m.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return C$(yield uR(m),V)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return b$(yield uR(m),V)}))}})(ON(l),h,a,u)}function OI(n,e){return(function(r,i){let o=new wr;return r.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return k$(yield q$(r),i,o)})),o.promise})(ON(n),e)}function eH(n,e,t){let r=t.docs.get(e._key),i=new op(n);return new bo(n,i,e._key,r,new Co(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ma=i})(Hs),Cn(new At("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new wi(new R_(r.getProvider("auth-internal")),new P_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(TA,CA,e),Ue(TA,CA,"esm2017")})();var pp=function(){return pp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},pp.apply(this,arguments)};var rH={includeMetadataChanges:!1};function zN(n,e){return e===void 0&&(e=rH),new re(function(t){var r=kI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function GN(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:pp(pp({},r),(t={},t[e.idField]=n.id,t))}function WN(n){return zN(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function KN(n,e){return e===void 0&&(e={}),WN(n).pipe(ae(function(t){return t.map(function(r){return GN(r,e)})}))}var An=class{constructor(e){return e}},QN="firestore",FI=class{constructor(){return Gs(QN)}};var LI=new B("angularfire2.firestore-instances");function iH(n,e){let t=tf(QN,n,e);return t&&new An(t)}function oH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new An(r)}}var sH={provide:FI,deps:[[new fr,LI]]},aH={provide:An,useFactory:iH,deps:[[new fr,LI],_o]};function gp(n,...e){return Ue("angularfire",yo.full,"fst"),Wt([aH,sH,{provide:LI,useFactory:oH(n),multi:!0,deps:[De,He,vo,Eu,[new fr,vf],[new fr,sf],...e]}])}var Ea=on(KN,!0);var Ia=on(qN,!0,2);var Rr=on(xN,!0,2);var wa=on(HN,!0,2);var Nr=on(MI,!0,2);var mp=on(kN,!0);var Da=on($N,!0,2);function cH(n,e){if(n&1){let t=to();k(0,"tr")(1,"td"),j(2),F(),k(3,"td"),j(4),F(),k(5,"td"),j(6),F(),k(7,"td"),j(8),F(),k(9,"td")(10,"button",10),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.edit(i))}),j(11,"Edit"),F(),k(12,"button",11),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.remove(i.id))}),j(13,"Delete"),F()()()}if(n&2){let t=e.$implicit;ue(2),Ye(t.date),ue(2),Ye(t.location),ue(2),Ye(t.incidentType),ue(2),Ye(t.damageLevel)}}var yp=class n{constructor(e){this.firestore=e;let t=Rr(this.firestore,this.collectionName);Ea(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="disaster_incidents";form={date:"",location:"",incidentType:"",damageLevel:""};records=[];editId=null;save(){return C(this,null,function*(){let e=Rr(this.firestore,this.collectionName);if(this.editId){let t=Nr(this.firestore,`${this.collectionName}/${this.editId}`);yield Da(t,this.form)}else yield Ia(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=O({},e)}remove(e){return C(this,null,function*(){let t=Nr(this.firestore,`${this.collectionName}/${e}`);yield wa(t)})}reset(){this.form={date:"",location:"",incidentType:"",damageLevel:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(te(An))};static \u0275cmp=En({type:n,selectors:[["app-incident-report"]],decls:46,vars:6,consts:[[1,"container"],[1,"form-card",3,"ngSubmit"],[1,"form-row"],["type","date","name","date",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Enter location",3,"ngModelChange","ngModel"],["type","text","name","incidentType","placeholder","Type of incident",3,"ngModelChange","ngModel"],["name","damageLevel",3,"ngModelChange","ngModel"],["type","submit",1,"btn","primary"],[1,"styled-table"],[4,"ngFor","ngForOf"],[1,"btn","small",3,"click"],[1,"btn","danger","small",3,"click"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"h2"),j(2,"Incident Report"),F(),k(3,"form",1),ke("ngSubmit",function(){return r.save()}),k(4,"div",2)(5,"label"),j(6,"Date"),F(),k(7,"input",3),Je("ngModelChange",function(o){return nt(r.form.date,o)||(r.form.date=o),o}),F()(),k(8,"div",2)(9,"label"),j(10,"Location"),F(),k(11,"input",4),Je("ngModelChange",function(o){return nt(r.form.location,o)||(r.form.location=o),o}),F()(),k(12,"div",2)(13,"label"),j(14,"Incident Type"),F(),k(15,"input",5),Je("ngModelChange",function(o){return nt(r.form.incidentType,o)||(r.form.incidentType=o),o}),F()(),k(16,"div",2)(17,"label"),j(18,"Damage Level"),F(),k(19,"select",6),Je("ngModelChange",function(o){return nt(r.form.damageLevel,o)||(r.form.damageLevel=o),o}),k(20,"option"),j(21,"Low"),F(),k(22,"option"),j(23,"Moderate"),F(),k(24,"option"),j(25,"High"),F(),k(26,"option"),j(27,"Critical"),F()()(),k(28,"button",7),j(29),F()(),Jr(30,"hr"),k(31,"table",8)(32,"thead")(33,"tr")(34,"th"),j(35,"Date"),F(),k(36,"th"),j(37,"Location"),F(),k(38,"th"),j(39,"Type"),F(),k(40,"th"),j(41,"Damage Level"),F(),k(42,"th"),j(43,"Actions"),F()()(),k(44,"tbody"),Yr(45,cH,14,4,"tr",9),F()()()),t&2&&(ue(7),Ze("ngModel",r.form.date),ue(4),Ze("ngModel",r.form.location),ue(4),Ze("ngModel",r.form.incidentType),ue(4),Ze("ngModel",r.form.damageLevel),ue(10),mr(" ",r.editId?"Update Report":"Add Report"," "),ue(16),Zr("ngForOf",r.records))},dependencies:[Vn,ni,$s,Us,zh,Gh,ui,Bs,Vs,js,lo,uo],encapsulation:2})};function uH(n,e){if(n&1){let t=to();k(0,"tr")(1,"td"),j(2),F(),k(3,"td"),j(4),F(),k(5,"td"),j(6),F(),k(7,"td"),j(8),F(),k(9,"td"),j(10),F(),k(11,"td")(12,"button",10),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.edit(i))}),j(13,"Edit"),F(),k(14,"button",11),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.remove(i.id))}),j(15,"Delete"),F()()()}if(n&2){let t=e.$implicit;ue(2),Ye(t.date),ue(2),Ye(t.barangay),ue(2),Ye(t.numberOfFamilies),ue(2),Ye(t.reliefItems),ue(2),Ye(t.distributedBy)}}var vp=class n{constructor(e){this.firestore=e;let t=Rr(this.firestore,this.collectionName);Ea(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="relief_distribution";form={date:"",barangay:"",numberOfFamilies:"",reliefItems:"",distributedBy:""};records=[];editId=null;save(){return C(this,null,function*(){let e=Rr(this.firestore,this.collectionName);if(this.editId){let t=Nr(this.firestore,`${this.collectionName}/${this.editId}`);yield Da(t,this.form)}else yield Ia(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=O({},e)}remove(e){return C(this,null,function*(){let t=Nr(this.firestore,`${this.collectionName}/${e}`);yield wa(t)})}reset(){this.form={date:"",barangay:"",numberOfFamilies:"",reliefItems:"",distributedBy:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(te(An))};static \u0275cmp=En({type:n,selectors:[["app-relief-distribution"]],decls:39,vars:7,consts:[[1,"container"],[1,"card"],[3,"ngSubmit"],["type","date","name","date",3,"ngModelChange","ngModel"],["type","text","name","barangay","placeholder","Barangay",3,"ngModelChange","ngModel"],["type","number","name","numberOfFamilies","placeholder","Number of Families",3,"ngModelChange","ngModel"],["type","text","name","reliefItems","placeholder","Ex: Food Packs, Water",3,"ngModelChange","ngModel"],["type","text","name","distributedBy","placeholder","Staff / Organization",3,"ngModelChange","ngModel"],["type","submit",1,"primary"],[4,"ngFor","ngForOf"],[1,"secondary","btn-small",3,"click"],[1,"danger","btn-small",3,"click"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"h2"),j(2,"Relief Distribution"),F(),k(3,"div",1)(4,"form",2),ke("ngSubmit",function(){return r.save()}),k(5,"label"),j(6,"Date"),F(),k(7,"input",3),Je("ngModelChange",function(o){return nt(r.form.date,o)||(r.form.date=o),o}),F(),k(8,"label"),j(9,"Barangay"),F(),k(10,"input",4),Je("ngModelChange",function(o){return nt(r.form.barangay,o)||(r.form.barangay=o),o}),F(),k(11,"label"),j(12,"Number of Families"),F(),k(13,"input",5),Je("ngModelChange",function(o){return nt(r.form.numberOfFamilies,o)||(r.form.numberOfFamilies=o),o}),F(),k(14,"label"),j(15,"Relief Items"),F(),k(16,"input",6),Je("ngModelChange",function(o){return nt(r.form.reliefItems,o)||(r.form.reliefItems=o),o}),F(),k(17,"label"),j(18,"Distributed By"),F(),k(19,"input",7),Je("ngModelChange",function(o){return nt(r.form.distributedBy,o)||(r.form.distributedBy=o),o}),F(),k(20,"button",8),j(21),F()()(),k(22,"table")(23,"thead")(24,"tr")(25,"th"),j(26,"Date"),F(),k(27,"th"),j(28,"Barangay"),F(),k(29,"th"),j(30,"Families"),F(),k(31,"th"),j(32,"Items"),F(),k(33,"th"),j(34,"Distributed By"),F(),k(35,"th"),j(36,"Actions"),F()()(),k(37,"tbody"),Yr(38,uH,16,5,"tr",9),F()()()),t&2&&(ue(7),Ze("ngModel",r.form.date),ue(3),Ze("ngModel",r.form.barangay),ue(3),Ze("ngModel",r.form.numberOfFamilies),ue(3),Ze("ngModel",r.form.reliefItems),ue(3),Ze("ngModel",r.form.distributedBy),ue(2),mr(" ",r.editId?"Update Distribution":"Add Distribution"," "),ue(17),Zr("ngForOf",r.records))},dependencies:[Vn,ni,$s,Us,ui,pu,Vs,js,lo,uo],encapsulation:2})};function lH(n,e){if(n&1){let t=to();k(0,"tr")(1,"td"),j(2),F(),k(3,"td"),j(4),F(),k(5,"td"),j(6),F(),k(7,"td"),j(8),F(),k(9,"td"),j(10),F(),k(11,"td")(12,"button",10),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.edit(i))}),j(13,"Edit"),F(),k(14,"button",11),ke("click",function(){let i=mn(t).$implicit,o=Ln();return yn(o.remove(i.id))}),j(15,"Delete"),F()()()}if(n&2){let t=e.$implicit;ue(2),Ye(t.centerName),ue(2),Ye(t.barangay),ue(2),Ye(t.capacity),ue(2),Ye(t.currentPopulation),ue(2),Ye(t.status)}}var _p=class n{constructor(e){this.firestore=e;let t=Rr(this.firestore,this.collectionName);Ea(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="evacuation_centers";form={centerName:"",barangay:"",capacity:"",currentPopulation:"",status:""};records=[];editId=null;save(){return C(this,null,function*(){let e=Rr(this.firestore,this.collectionName);if(this.editId){let t=Nr(this.firestore,`${this.collectionName}/${this.editId}`);yield Da(t,this.form)}else yield Ia(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=O({},e)}remove(e){return C(this,null,function*(){let t=Nr(this.firestore,`${this.collectionName}/${e}`);yield wa(t)})}reset(){this.form={centerName:"",barangay:"",capacity:"",currentPopulation:"",status:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(te(An))};static \u0275cmp=En({type:n,selectors:[["app-evacuation-center"]],decls:47,vars:7,consts:[[1,"container"],[1,"card"],[3,"ngSubmit"],["type","text","name","centerName","placeholder","Center Name",3,"ngModelChange","ngModel"],["type","text","name","barangay","placeholder","Barangay",3,"ngModelChange","ngModel"],["type","number","name","capacity","placeholder","Max Capacity",3,"ngModelChange","ngModel"],["type","number","name","currentPopulation","placeholder","Current Occupants",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["type","submit",1,"primary"],[4,"ngFor","ngForOf"],[1,"secondary","btn-small",3,"click"],[1,"danger","btn-small",3,"click"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"h2"),j(2,"Evacuation Center Status"),F(),k(3,"div",1)(4,"form",2),ke("ngSubmit",function(){return r.save()}),k(5,"label"),j(6,"Center Name"),F(),k(7,"input",3),Je("ngModelChange",function(o){return nt(r.form.centerName,o)||(r.form.centerName=o),o}),F(),k(8,"label"),j(9,"Barangay"),F(),k(10,"input",4),Je("ngModelChange",function(o){return nt(r.form.barangay,o)||(r.form.barangay=o),o}),F(),k(11,"label"),j(12,"Capacity"),F(),k(13,"input",5),Je("ngModelChange",function(o){return nt(r.form.capacity,o)||(r.form.capacity=o),o}),F(),k(14,"label"),j(15,"Current Population"),F(),k(16,"input",6),Je("ngModelChange",function(o){return nt(r.form.currentPopulation,o)||(r.form.currentPopulation=o),o}),F(),k(17,"label"),j(18,"Status"),F(),k(19,"select",7),Je("ngModelChange",function(o){return nt(r.form.status,o)||(r.form.status=o),o}),k(20,"option"),j(21,"Open"),F(),k(22,"option"),j(23,"Closed"),F(),k(24,"option"),j(25,"Full"),F(),k(26,"option"),j(27,"Under Maintenance"),F()(),k(28,"button",8),j(29),F()()(),k(30,"table")(31,"thead")(32,"tr")(33,"th"),j(34,"Center"),F(),k(35,"th"),j(36,"Barangay"),F(),k(37,"th"),j(38,"Capacity"),F(),k(39,"th"),j(40,"Current Pop"),F(),k(41,"th"),j(42,"Status"),F(),k(43,"th"),j(44,"Actions"),F()()(),k(45,"tbody"),Yr(46,lH,16,5,"tr",9),F()()()),t&2&&(ue(7),Ze("ngModel",r.form.centerName),ue(3),Ze("ngModel",r.form.barangay),ue(3),Ze("ngModel",r.form.capacity),ue(3),Ze("ngModel",r.form.currentPopulation),ue(3),Ze("ngModel",r.form.status),ue(10),mr(" ",r.editId?"Update Center":"Add Center"," "),ue(17),Zr("ngForOf",r.records))},dependencies:[Vn,ni,$s,Us,zh,Gh,ui,pu,Bs,Vs,js,lo,uo],encapsulation:2})};var Ep=[{path:"",redirectTo:"IncidentReportComponent",pathMatch:"full"},{path:"IncidentReportComponent",component:yp},{path:"ReliefDistributionComponent",component:vp},{path:"EvacuationCenterComponent",component:_p}];var YN={providers:[um(),Iy({eventCoalescing:!0}),ou(Ep),nf(()=>rf({projectId:"angular-firebase-app-46f9a",appId:"1:230380245200:web:53dd27bb83f8077c234ed5",storageBucket:"angular-firebase-app-46f9a.firebasestorage.app",apiKey:"AIzaSyC0ChHzMqwztqfkgIHtt4GeFvkGfoXFrfs",authDomain:"angular-firebase-app-46f9a.firebaseapp.com",messagingSenderId:"230380245200"})),gp(()=>mp())]};var Ip=class n{title=xt("calulo-firebase");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=En({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[["routerLink","/IncidentReportComponent",2,"margin-right","10px"],["routerLink","/ReliefDistributionComponent",2,"margin-right","10px"],["routerLink","/EvacuationCenterComponent"]],template:function(t,r){t&1&&(k(0,"nav")(1,"a",0),j(2,"Incident Report"),F(),k(3,"a",1),j(4,"Relief Distribuition"),F(),k(5,"a",2),j(6,"EvacuationCenter"),F()(),Jr(7,"hr")(8,"router-outlet"))},dependencies:[tu,Vn,_v,kh],encapsulation:2})};var ZN={production:!1,firebase:{apiKey:"AIzaSyC0ChHzMqwztqfkgIHtt4GeFvkGfoXFrfs",authDomain:"angular-firebase-app-46f9a.firebaseapp.com",projectId:"angular-firebase-app-46f9a",storageBucket:"angular-firebase-app-46f9a.firebasestorage.app",messagingSenderId:"230380245200",appId:"1:230380245200:web:53dd27bb83f8077c234ed5"}};qy(Ip,YN).catch(n=>console.error(n));ou(Ep),nf(()=>rf(ZN.firebase)),gp(()=>mp());
